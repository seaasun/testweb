ni.RegisterNameSpace("helper");helper.Order=function(){this.RecaculateTotalQty=function(a){if(a.OrderGeos.length>0){a.DesiredQtyHome=0;a.DesiredQtyApt=0;a.DesiredQtyBuss=0;a.AvailableQtyHome=0;a.AvailableQtyApt=0;a.AvailableQtyBuss=0;a.TotalDesiredQty=0;a.TotalAvailableQty=0;a.TotalEmailDesiredQty=0;$.each(a.OrderGeos,function(b,c){a.DesiredQtyHome+=c.DesiredQtyHome;a.DesiredQtyApt+=c.DesiredQtyApt;a.DesiredQtyBuss+=c.DesiredQtyBuss;a.AvailableQtyHome+=c.AvailableQtyHome;a.AvailableQtyApt+=c.AvailableQtyApt;a.AvailableQtyBuss+=c.AvailableQtyBuss;a.TotalDesiredQty+=c.DesiredQty;a.TotalAvailableQty+=c.AvailableQty;a.TotalEmailDesiredQty+=c.EmailDesiredQty})}};this.RecaculateTotalGeoQtyAll=function(a){for(var b=0;b<a.OrderGeos.length;b++){var c=a.OrderGeos[b];c.DesiredQtyHome=0;c.DesiredQtyApt=0;c.DesiredQtyBuss=0;c.AvailableQtyHome=0;c.AvailableQtyApt=0;c.AvailableQtyBuss=0;$.each(a.OrderGeos[b].OrderGeoDetails,function(d,e){c.DesiredQtyHome+=e.DesiredQtyHome;c.DesiredQtyApt+=e.DesiredQtyApt;c.DesiredQtyBuss+=e.DesiredQtyBuss;c.AvailableQtyHome+=e.AvailableQtyHome;c.AvailableQtyApt+=e.AvailableQtyApt;c.AvailableQtyBuss+=e.AvailableQtyBuss});c.DesiredQty=c.DesiredQtyHome+c.DesiredQtyApt+c.DesiredQtyBuss;c.AvailableQty=c.AvailableQtyHome+c.AvailableQtyApt+c.AvailableQtyBuss}this.RecaculateTotalQty(a)};this.RecaculateTotalGeoQty=function(a,b){var c=a.OrderGeos[b];c.DesiredQtyHome=0;c.DesiredQtyApt=0;c.DesiredQtyBuss=0;c.AvailableQtyHome=0;c.AvailableQtyApt=0;c.AvailableQtyBuss=0;c.DesiredQty=0;c.AvailableQty=0;c.EmailDesiredQty=0;c.EmailAvailableQty=0;$.each(a.OrderGeos[b].OrderGeoDetails,function(d,e){if(a.ListType==50){c.DesiredQtyHome+=e.DesiredQtyHome;c.DesiredQtyApt+=e.DesiredQtyApt;c.DesiredQtyBuss+=e.DesiredQtyBuss;c.AvailableQtyHome+=e.AvailableQtyHome;c.AvailableQtyApt+=e.AvailableQtyApt;c.AvailableQtyBuss+=e.AvailableQtyBuss}else{c.DesiredQty+=e.DesiredQty;c.AvailableQty+=e.AvailableQty;c.EmailDesiredQty=e.Email_DesiredQty;c.EmailAvailableQty=e.Email_AvailableQty}});if(a.ListType==50){c.DesiredQty=c.DesiredQtyHome+c.DesiredQtyApt+c.DesiredQtyBuss;c.AvailableQty=c.AvailableQtyHome+c.AvailableQtyApt+c.AvailableQtyBuss}this.RecaculateTotalQty(a)};this.CaculatePrice=function(a,h,b,f,e){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){return}a.CostPrice=this.GetSinglePrice(a,h,b);a.GoodsCost=this.GetSingleGoodsPrice(a,e)*a.TotalDesiredQty;if(e!=undefined&&e!=null&&a.GoodsCost<e.MapMinPrice){a.GoodsCost=e.MapMinPrice}a.OrderCharge=a.CostPrice*a.TotalDesiredQty;if(a.OrderCharge<h.MinElementsCharge){a.OrderCharge=h.MinElementsCharge}a.ShippingCharge=this.GetLabelShipCharge(a,b);a.LabelCharge=this.GetLabelBaseCharge(a,b);a.PromotionAmount=this.GetPromotionCharge(a,f);a.ServiceCharge=this.GetServiceCharge(a,h);a.GeographyCharge=this.GetGeographyCharge(a,h);if(f&&f.PromotionType==entity.enums.PromotionType.DEBIT_CARD&&a.PromotionAmount>0){var d=a.OrderCharge+a.ShippingCharge+a.LabelCharge+a.ServiceCharge+a.GeographyCharge;if(d<=h.MinElementsCharge){d=h.MinElementsCharge;a.MinElementsChargeApply=true}if(d>a.PromotionAmount){a.TotalEstmCost=d-a.PromotionAmount}else{a.PromotionAmount=d;a.TotalEstmCost=0}}else{var c=a.OrderCharge-a.PromotionAmount;if(c<h.MinElementsCharge){c=h.MinElementsCharge}a.SubTotalCharge=c;a.TotalEstmCost=a.SubTotalCharge+a.ShippingCharge+a.LabelCharge+a.ServiceCharge+a.GeographyCharge;a.TotalEmailEstmCost=a.CostPrice*a.TotalEmailDesiredQty;a.RetailCost=a.TotalEstmCost;a.MinElementsChargeApply=(a.SubTotalCharge==h.MinElementsCharge);a.MinLabelChargeApply=(a.LabelCharge==b.MinLabelCharge);var g=a.OrderCharge-a.PromotionAmount+a.ShippingCharge+a.LabelCharge;a.MinOrderAmountApply=(g<h.MinElementsCharge)}a.TotalPretaxCost=a.TotalEstmCost};this.CheckPromotCode=function(a){var b=a.PromoCode;if(b==null||b.Length==0){return false}else{return true}},this.GetMobilePackagePromotionValue=function(d,f){var e=0;if(d==null||d.Length==0){return 0}if(uc.result.Promotion!=null){if(this.CheckMobileCondition(f,uc.result.Promotion.PackageIds)){var b=0;var c=uc.result.MobilePackages.getPackageById(f);if(uc.result.Promotion.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_ONLY){b=uc.result.Promotion.PromotionValue}else{if(uc.result.Promotion.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_ONLY){b=c.Cost*uc.result.Promotion.PromotionValue}}}var a=c.Cost-b;if(a<uc.result.Promotion.MinPurAmount){e=uc.result.Promotion.MinPurAmount-c.Cost}else{e=0-b}}return framework.common.formatMoney(e)},this.CaculateMobilePromotion=function(a,d){if(this.CheckPromotCode(a)){if(d.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_ONLY||d.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_LIST_BOTH||d.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_ONLY||d.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_LIST_BOTH){if(a.MobilePackageId>0){var b=uc.result.MobilePackages.getPackageById(a.MobilePackageId);if(this.CheckMobileCondition(a.MobilePackageId,d.PackageIds)){a.MobilePackageCharge=b.Cost-d.PromotionValue;var c=0;if(d.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_ONLY||d.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_LIST_BOTH){c=b.Cost-d.PromotionValue}else{if(d.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_ONLY||d.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_LIST_BOTH){c=b.Cost-b.Cost*d.PromotionValue}}if(c<d.MinPurAmount){c=d.MinPurAmount}a.MobilePackageCharge=c}else{a.MobilePackageCharge=b.Cost}}}}},this.CaculateMobilePackageCharge=function(a,c){if(this.CheckPromotCode(a)==false){if(a.MobilePackageId>0){var b=uc.result.MobilePackages.getPackageById(a.MobilePackageId);a.MobilePackageCharge=b.Cost}}else{this.CaculateMobilePromotion(a,c)}},this.CaculatePromotion=function(a,e,d){a.PromotionAmount=this.GetPromotionCharge(a,d);this.CaculateMobilePackageCharge(a,d);if(d&&d.PromotionType==entity.enums.PromotionType.DEBIT_CARD&&a.PromotionAmount>0){var c=a.OrderCharge+a.ShippingCharge+a.LabelCharge+a.ServiceCharge+a.GeographyCharge;if(c>a.PromotionAmount){a.TotalEstmCost=c-a.PromotionAmount}else{a.PromotionAmount=c;a.TotalEstmCost=0}}else{var b=a.OrderCharge-a.PromotionAmount;if(b<e.MinElementsCharge){b=e.MinElementsCharge}a.SubTotalCharge=b;a.TotalEstmCost=a.SubTotalCharge+a.ShippingCharge+a.LabelCharge+a.ServiceCharge+a.GeographyCharge;a.MinElementsChargeApply=(a.SubTotalCharge==e.MinElementsCharge)}a.TotalPretaxCost=a.TotalEstmCost};this.GetMultiplePriceByListUsageType=function(b,c){for(var a=0;a<c.length;a++){if(c[a].MultipleId==b){return c[a].Multiple}}};this.GetSinglePrice=function(c,l,m){var n=c.TotalDesiredQty;var f=c.ListUsage;var o=l==null?m.ListMultiplePrice:l.ListMultiplePrice;var e=this.GetMultiplePriceByListUsageType(f,o);var j=page.placeorder.CalculatePriceMethod;var d=0;var h=0;for(var g=0;g<c.ElementsForPricing.length;g++){var b=c.ElementsForPricing[g];if(b.ValuesCount<1){b.ValuesCount=1}var a=this.GetPriceByElement(b.ElementName,n,l);if(a==null){a=this.GetPriceByElement(b.ElementName,n,m);b.Price=(a==null?m.GlobalElementPrice:a.Price1);b.IsGlobal=true;b.NotificationRequired=a==null?true:a.NotificationRequired;b.PriceListName=a==null?"default":m.PriceListName;var k=a==null?0:a.Price2;k=(b.ValuesCount-1)*k;b.Price=b.Price+k;h+=b.Price;if(f>entity.enums.ListUsageType.OneTimes&&b.IsMultiple){if(j==entity.enums.CalculatePriceMethod.WholeOrder){b.Price=b.Price*e}else{if(b.ElementName=="BASE"){b.Price=b.Price*e}}}}else{b.Price=a.Price1;b.IsGlobal=false;b.PriceListName=l.PriceListName;var k=a==null?0:a.Price2;k=(b.ValuesCount-1)*k;b.Price=b.Price+k;h+=b.Price;if(f>entity.enums.ListUsageType.OneTimes&&b.IsMultiple){if(j==entity.enums.CalculatePriceMethod.WholeOrder){b.Price=b.Price*e}else{if(b.ElementName=="BASE"){b.Price=b.Price*e}}}}d+=b.Price}if(c.ListType==90){if(h>0.035){d=0.035}if(f>entity.enums.ListUsageType.OneTimes){d=d*e}}return d};this.GetSingleGoodsPrice=function(d,l){var f=0;var j=page.placeorder.CalculatePriceMethod;if(l!=undefined&&l!=null){var n=d.TotalDesiredQty;var g=d.ListUsage;var c=0;var e=0;var m=uc.result.UserPriceList==null?uc.result.GlobalPriceList.ListMultiplePrice:uc.result.UserPriceList.ListMultiplePrice;e=this.GetMultiplePriceByListUsageType(g,m);for(var h=0;h<d.ElementsForPricing.length;h++){var b=d.ElementsForPricing[h];if(b.ValuesCount<1){b.ValuesCount=1}var a=this.GetGoodsPriceByElement(b.ElementName,l);if(a==null&&this.PriceElementEquals(b.ElementName,"BASE")){c=l.MapBasePrice}else{if(a!=null){b.Price=(a.MapColumnPrice==null?0:a.MapColumnPrice);b.IsGlobal=false;var k=a==null?0:(a.MapColumnPrice2==null?0:a.MapColumnPrice2);k=(b.ValuesCount-1)*k;b.Price=b.Price+k;f+=b.Price}}}if(g>entity.enums.ListUsageType.OneTimes&&b.IsMultiple){if(j==entity.enums.CalculatePriceMethod.WholeOrder){f=(f+c)*e}else{f=c*e+f}}else{f=c+f}}return f};this.GetPriceByElement=function(c,e,a){for(var b=0;b<a.ElementsPrices.length;b++){var d=a.ElementsPrices[b];if(this.PriceElementEquals(d.PriceName,c)&&d.Lbound<=e&&d.Ubound>=e){return d}}return null};this.GetGoodsPriceByElement=function(b,d){if(d!=undefined&&d!=null&&d.MetadataPricingList!=undefined&&d.MetadataPricingList!=null){for(var a=0;a<d.MetadataPricingList.length;a++){var c=d.MetadataPricingList[a];if(this.PriceElementEquals(c.ColumnName,b)){return c}}}return null};this.GetLabelBaseCharge=function(a,b){var h=a.TotalDesiredQty;var g=a.MailLabelsCount;if(g==0){return 0}var d=0;for(var c=0;c<b.LabelPrices.length;c++){var f=b.LabelPrices[c];if(this.PriceElementEquals(f.PriceName,"base")&&f.Lbound<=h&&f.Ubound>=h){d=f.Price1;break}}var e=d*h*g;if(e<b.MinLabelCharge){e=b.MinLabelCharge}return e};this.GetLabelShipCharge=function(c,b){var k=c.TotalDesiredQty;var h=c.MailLabelsCount;if(h==0){return 0}var d=0;var a=0;for(var f=0;f<b.LabelPrices.length;f++){var g=b.LabelPrices[f];if(g.PriceName.toLowerCase()=="shipprice"&&g.Lbound<=k&&g.Ubound>=k){d=g.Price1;a=g.Price2;break}}var j=d;var e=(h-1)*a;return j+e};this.GetPromotionCharge=function(a,f){var h=a.PromoCode;var g=a.TotalDesiredQty;var b=a.CostPrice;a.PromotionPointType=0;a.PromotionPointValue=0;if(h==null||h.Length==0){return 0}var c=b*g;var d=0;if(f!=null){var e=false;if(f.MinPurAmountType==entity.enums.PromotionMinPurAmtType.BY_TOTAL_SPEND){e=(c>=f.MinPurAmount)}else{if(f.MinPurAmountType==entity.enums.PromotionMinPurAmtType.BY_TOTAL_RECORDS){e=(g>=f.MinPurQty)}else{e=((c>=f.MinPurAmount)&&(g>=f.MinPurQty))}}if(e){if(f.PromotionType==entity.enums.PromotionType.PERCENT_OFF_TOTAL_PRICE){d=c*f.PromotionValue}else{if(f.PromotionType==entity.enums.PromotionType.FLAT_DOLLAR_TOTAL_PRICE){d=f.PromotionValue}else{if(f.PromotionType==entity.enums.PromotionType.FREE_LEADS){d=b*f.PromotionValue}else{if(f.PromotionType==entity.enums.PromotionType.XNUMBER_OF_POINT){a.PromotionPointType=entity.enums.PromotionType.XNUMBER_OF_POINT;a.PromotionPointValue=f.PromotionValue}else{if(f.PromotionType==entity.enums.PromotionType.NUMBER_OF_POINT){a.PromotionPointType=entity.enums.PromotionType.NUMBER_OF_POINT;a.PromotionPointValue=f.PromotionValue}else{if(f.PromotionType==entity.enums.PromotionType.DEBIT_CARD){d=f.PromotionBalance}else{if(f.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_ONLY||f.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_ONLY){if(this.CheckMobileCondition(a.MobilePackageId,f.PackageIds)){this.CaculateMobilePromotion(a,f)}}else{if(f.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_LIST_BOTH||f.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_LIST_BOTH){if(this.CheckMobileCondition(a.MobilePackageId,f.PackageIds)){if(f.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_LIST_BOTH){d=f.PromotionValue}else{if(f.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_LIST_BOTH){d=c*f.PromotionValue}}this.CaculateMobilePromotion(a,f)}}}}}}}}}}}if(d>c&&f.PromotionType!=entity.enums.PromotionType.DEBIT_CARD){d=c}return d};this.CheckMobileCondition=function(e,d){var a=false;if(e>0){var c=d.split(",");for(var b=0;b<c.length;b++){if(parseInt(e)==parseInt($.trim(c[b]))){a=true;break}}}return a};this.GetServiceCharge=function(a,b){return b.ServiceCharge};this.GetGeographyCharge=function(b,e){var a=0;for(var c=0;c<e.GeographyPrices.length;c++){var d=e.GeographyPrices[c];if(d.PriceName==b.GeoType.toString()){a=d.Price1;break}}return a};this.SetGeoDetailsDesiredByDetail=function(e,b){if(e==null){return}var c=b;if(jQuery.isArray(e.OrderGeoDetails)&&e.OrderGeoDetails.length>0){var d=e.OrderGeoDetails;for(var a=0;a<d.length;a++){if(c<=0){d[a].DesiredQty=0}else{if(d[a].AvailableQty>=c){d[a].DesiredQty=c}else{if(d[a].AvailableQty>0){d[a].DesiredQty=d[a].AvailableQty}}c=c-d[a].DesiredQty}}}};this.SetGeoDetailsDesiredByOrder=function(a){if(a==null){return}if(jQuery.isArray(a.OrderGeos)&&a.OrderGeos.length>0){for(var b=0;b<a.OrderGeos.length;b++){this.SetGeoDetailsDesiredByDetail(a.OrderGeos[b],a.OrderGeos[b].DesiredQty)}}};this.CaculatePackage=function(a,d){if(a==null||a.MobilePackages==undefined||a.MobilePackages==null){return}if(jQuery.isArray(a.MobilePackages)&&a.MobilePackages.length>0){for(var c=0;c<a.MobilePackages.length;c++){if(a.MobilePackages[c].Details!=null){for(var b=0;b<a.MobilePackages[c].Details.length;b++){if(d>=a.MobilePackages[c].Details[b].MinGoal&&d<=a.MobilePackages[c].Details[b].MaxGoal){a.MobilePackages[c].ViewCount=a.MobilePackages[c].Details[b].ViewCount;a.MobilePackages[c].Cost=a.MobilePackages[c].Details[b].Price;break}}}}}};this.PriceElementEquals=function(b,a){return String.Equals(b,a,true)}};OrderHelper=new helper.Order();
;
ni.RegisterNameSpace("page");page.placeorder={order:null,orderflow:null,accountId:null,DataSourcePage:"resellerlanding.aspx",minQuantityOfOrder:100,isDemoBreakdownEnabled:false,isTwoDimensionalMatrixEnabled:false,isDLGReseller:false,isOrderQuoteEnabled:false,defaultPhoneOption:entity.enums.PhoneOption.NoPhoneNumber,footerOfDatasource:"",showPromotion:false,ZipMask:"99999",ZipRegularExpression:"^[0-9]{5}$",Zip4RegularExpression:"^[0-9]{9}$",CRRTRegularExpression:"^[0-9]{5}[:]{1}[A-Za-z]{1}[0-9]{3}$",ScfMask:"999",ScfRegExp:"^[0-9]{3}$",MapCenter:[38.20365531807151,-98.61328125],MaxZipcodeOriginalType:entity.enums.ZipcodeOrignalType.ZIP_RANGE_INPUT,MaxScfcodeOriginalType:entity.enums.ZipcodeOrignalType.SCF_RANGE_INPUT,GeoTypeNames:[],GeoTypeTitles:[],GeoTypeDescs:[],GeoTypeTexts:[],ZipcodeOriginalTypeDescs:[],AvailableStateDescs:[],SampleOutputInfo:null,isBlue:false,currentDataSource:null,priorVersionLink:null,IsShowOrderGeoDetailQuantity:true,IsInternationalPayment:false,IsPlaceOrderEnabled:true,IsMultipleAddress:false,isEnableMultiGeo:false,RadiusUnit:entity.enums.UmCodeType.MILE,AllHouseholdDesc:null,IsAcxiomMultiRadius:true,IsInputPrice:false,CurrentSessionId:"",dataSource:10,demoTabActive:"",HelpMsgStepDesc:"",DataSourceOfHideZip4:"",BusinessShortcutsName:"Business QuickPicks",Enable_AN_BusinessQP:false,Enable_DomainSuppression:false,Days_DomainSuppression:0,Allow_CustomDomainSuppression:false,ConsumerListType:0,FacebkText:"",OrderSourceParameter:"",Init:function(c){if(page.placeorder.orderflow==null){var a=new entity.OrderFlow();a.CurrentStep=entity.enums.OrderStep.GeoType;page.placeorder.orderflow=a}page.placeorder.currentDataSource=c==null?page.placeorder.dataSource:c;if(page.placeorder.order==null){var b=new entity.Order();b.NextStep=entity.enums.OrderStep.GeoType;b.ListType=c;b.ListUsage=entity.enums.ListUsageType.OneTimes;if(page.global.isAnicoUSite&&c==entity.enums.DataSourceType.Compass){b.ListUsage=entity.enums.ListUsageType.MultiTimes}if(c==entity.enums.DataSourceType.HomeData){b.DemoType=entity.enums.DemoType.Standard}if(page.placeorder.accountId!=null){b.AccountId=page.placeorder.accountId}page.placeorder.order=b}page.global.LoadJSApi_BeanStream();if(page.placeorder.order.ListType==entity.enums.DataSourceType.CanadaConsumer){page.placeorder.MaxZipcodeOriginalType=entity.enums.ZipcodeOrignalType.ZIP_PASTED;page.placeorder.MaxScfcodeOriginalType=entity.enums.ZipcodeOrignalType.SCF_INPUT}if(String.IsNullOrEmpty(page.placeorder.SampleOutputInfo)){jQuery("#sampleOutputExample").addClass("hidden")}else{jQuery("#sampleOutputExample").html(page.placeorder.SampleOutputInfo);jQuery("#sampleOutputExample").removeClass("hidden")}framework.common.Ajax({url:"PlaceOrder.aspx/GetGeoTypesInternationalTexts",data:{timeZone:page.global.Timezone},async:false,success:function(d){if(d.ResultFlag==true){page.placeorder.GeoTypeNames=d.DataSource.GeoTypeNames;page.placeorder.GeoTypeTitles=d.DataSource.GeoTypeTitles;page.placeorder.GeoTypeDescs=d.DataSource.GeoTypeDescs;page.placeorder.GeoTypeTexts=d.DataSource.GeoTypeTexts;page.placeorder.ZipcodeOriginalTypeDescs=d.DataSource.ZipcodeOriginalTypeDescs;page.placeorder.AvailableStateDescs=d.DataSource.AvailableStateDescs}},error:function(d){},waitingElement:"ct_geo"});page.placeorder.GoNext();$("#ct_main_panel").removeClass("hidden");$("#ct_main_panel_wait").addClass("hidden");if(String.IsNullOrEmpty(page.placeorder.priorVersionLink)){$("#PriorVersion").addClass("hidden")}else{$("#PriorVersionLink").attr("href",page.placeorder.priorVersionLink);$("#PriorVersion").removeClass("hidden")}},Clear:function(){var a=page.placeorder.order;jQuery("div[attr='orderstep_panel']").addClass("hidden");jQuery("td[attr='back_button']").removeClass("hidden");jQuery("td[attr='next_button']").removeClass("hidden");jQuery("#ct_result_save").addClass("hidden");jQuery("td[attr='search_result_button']").addClass("hidden");jQuery("td[attr='email_result_button']").addClass("hidden");jQuery("input[name='goBack']").unbind("click");jQuery("input[name='goNext']").unbind("click");jQuery("input[name='orderNow']").unbind("click");$("#spanStep1").addClass("stephead2");$("#spanStep2").addClass("stephead2");$("#spanStep3").addClass("stephead2");$("#spanStep4").addClass("stephead2")},SetScreen:function(b,a){var c=entity.lookup.ScreenHelp.getByCode(b,a);if(c!=null){$("a.screen_link").colorbox({iframe:true,width:900,height:610,opacity:0.5,href:"usadata/images/guide/"+c.Url});$("a.screen_link").attr("title",c.Title);$(".screen_link_element").removeClass("hidden")}else{$(".screen_link_element").addClass("hidden")}},SetVideo:function(b){var a=entity.lookup.VideoHelp.getByCode(b);if(a!=null&&page.placeorder.order.ListType==entity.enums.DataSourceType.Consumer){$("#video_link").colorbox({iframe:true,width:770,height:510,opacity:0.5,href:a.Url});$("#video_link").attr("title",a.Title);$("#video_link").removeClass("hidden")}else{$("#video_link").addClass("hidden")}},GoNext:function(b){page.placeorder.Clear();var d=page.placeorder.order;page.placeorder.SetVideo(d.NextStep);page.placeorder.SetScreen(d.NextStep,page.placeorder.order.ListType);var c=null;var a=page.placeorder.footerOfDatasource;switch(d.NextStep){case entity.enums.OrderStep.DataSource:window.location.href=page.placeorder.DataSourcePage;c=jQuery.toJSON(d);break;case entity.enums.OrderStep.GeoType:uc.geotype.Init();c=jQuery.toJSON(d);break;case entity.enums.OrderStep.Geo:$("#ma_explain_video_line").css("display","none");$("[id^='sl360_explain_video_setp_']").css("display","none");uc.geo.Init(b);c=jQuery.toJSON(d);break;case entity.enums.OrderStep.DemoOption:uc.demooption.Init();c=jQuery.toJSON(d);break;case entity.enums.OrderStep.Demo:$("#ma_explain_video_line").css("display","block");$("[id^='sl360_explain_video_setp_']").css("display","none");$("#sl360_explain_video_setp_3").css("display","block");jQuery("#ct_step_demo").removeClass("hidden");uc.demo.Init();c=jQuery.toJSON(d);break;case entity.enums.OrderStep.PollCount:$("#ma_explain_video_line").css("display","none");$("[id^='sl360_explain_video_setp_']").css("display","none");jQuery("#ct_step_pollcount").removeClass("hidden");uc.pollcount.Init();c=null;a="";break;case entity.enums.OrderStep.ListQuote:jQuery("#ct_step_listquote").removeClass("hidden");uc.result.Init();c=null;break;case entity.enums.OrderStep.Payment:jQuery("#ct_step_payment").removeClass("hidden");uc.payment.Init();c=null;break;case entity.enums.OrderStep.Success:jQuery("#ct_step_success").removeClass("hidden");uc.success.Init();c=null;break}jQuery("#footerOfDatasource").html(a);framework.common.LogClickEvent(d.NextStep,c,"GoNext.")},GoBack:function(){page.placeorder.Clear();var b=page.placeorder.order;var a=b.CurrentStep-1;if(page.placeorder.order.CurrentStep==entity.enums.OrderStep.ListQuote){a=entity.enums.OrderStep.Demo}else{if(page.placeorder.order.CurrentStep==entity.enums.OrderStep.Demo&&a==entity.enums.OrderStep.DemoOption){a=a-1}}if(page.placeorder.order.GeoType==entity.enums.GeoType.NationWide&&page.placeorder.order.CurrentStep==entity.enums.OrderStep.Demo){a=a-1}if(page.placeorder.order.GeoType==entity.enums.GeoType.MultiCount&&page.placeorder.order.CurrentStep==entity.enums.OrderStep.Demo){a=a-1}$("#ma_explain_video_line").css("display","none");$("[id^='sl360_explain_video_setp_']").css("display","none");if(page.placeorder.order.CurrentStep==entity.enums.OrderStep.Demo){if(page.placeorder.order.GeoType==entity.enums.GeoType.Polygon){$("#ma_explain_video_line").css("display","block");$("[id^='sl360_explain_video_setp_']").css("display","none");$("#sl360_explain_video_setp_2").css("display","block")}}framework.common.LogClickEvent(a,"","GoBack.");page.placeorder.SetVideo(a);page.placeorder.SetScreen(a,page.placeorder.order.ListType);switch(a){case entity.enums.OrderStep.DataSource:window.location.href=page.placeorder.DataSourcePage;break;case entity.enums.OrderStep.GeoType:$("#ma_explain_video_line").css("display","block");$("[id^='sl360_explain_video_setp_']").css("display","none");$("#sl360_explain_video_setp_1").css("display","block");uc.geotype.Init();break;case entity.enums.OrderStep.Geo:uc.geo.Init();break;case entity.enums.OrderStep.DemoOption:uc.demooption.Init();break;case entity.enums.OrderStep.Demo:uc.stepnav.Click_EditSelections_Demo();break;case entity.enums.OrderStep.PollCount:jQuery("#ct_step_pollcount").removeClass("hidden");uc.pollcount.Init();break;case entity.enums.OrderStep.ListQuote:jQuery("#ct_step_listquote").removeClass("hidden");uc.result.Init();break;case entity.enums.OrderStep.Payment:jQuery("#ct_step_placeorder").removeClass("hidden");break;case entity.enums.OrderStep.Success:jQuery("#ct_step_success").removeClass("hidden");break}b.CurrentStep=a},LoadOrder:function(a){framework.common.Ajax({url:"PlaceOrder.aspx/GetOrder",data:{orderId:a},success:function(b){if(b.ResultFlag==true){page.placeorder.order=b.DataSource}},error:function(b){}})},GetOrderFromSession:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetOrderFromSession",success:function(a){if(a.ResultFlag==true){var b=a.DataSource;if(b!=null){if(b.GeoType==entity.enums.GeoType.MultiCount){page.placeorder.isMultiCount=true}else{page.placeorder.isMultiCount=false}page.placeorder.order=b;page.placeorder.order.NextStep=entity.enums.OrderStep.PollCount;page.placeorder.Init()}else{page.placeorder.Init($.query.get("DataSource"))}}},error:function(a){alert(a.responseText)}})},Block:function(){framework.ui.showWaiting("ct_main_panel",true)},UnBlock:function(){$("#ct_main_panel").unblock()},GetInternationalGeoTypeDesc:function(a){var d=null;if(this.GeoTypeTitles!=null&&this.GeoTypeTitles.length>0){for(var b=0;b<this.GeoTypeTitles.length;b++){if(this.GeoTypeTitles[b].TextName==a){d=this.GeoTypeTitles[b].TextValue;break}}}if(String.IsNullOrEmpty(d)){var c=entity.lookup.GeoType.getByCode(a);d=c.Description}return d},CheckMyInformation:function(){framework.common.Ajax({url:"PlaceOrder.aspx/CheckCurrentUser",data:{},success:function(a){if(a.ResultFlag==true){}},error:function(a){}})},ClearMobileCampaign:function(){if(!$("#order_step_header_mobile").hasClass("hidden")){$("#order_step_header_mobile").addClass("hidden")}},ClearRedundantForSubmitOrder:function(a){page.placeorder.ClearMobileCampaign();if(a.OrderGeos!=null){for(var b=0;b<a.OrderGeos.length;b++){a.OrderGeos.OrderGeoDetails=null}}if(a.OrderDemos!=null){a.OrderDemos=null}if(a.ElementsForPricing!=null){a.ElementsForPricing=null}},GetAllHouseHoldsDescription:function(){if(page.placeorder.AllHouseholdDesc!=null){return page.placeorder.AllHouseholdDesc.SettingDesc}return"All Households In Target Area(s)"},IsValassisZip:function(b){var a=false;if((b.ListType==entity.enums.DataSourceType.Valassis||b.ListType==entity.enums.DataSourceType.ResidentOccupant)&&(b.GeoType==entity.enums.GeoType.Zip||b.GeoType==entity.enums.GeoType.ZipMap)){a=true}return a},TrackOrderPathGAEvent:function(b,a){if(typeof ga!=="undefined"){ga("send","event","OrderPath",b,a)}if(typeof _gaq!=="undefined"){_gaq.push(["_trackEvent","OrderPath",b,a])}}};jQuery(document).ready(function(){$(document).keydown(function(c){var b=(c.keyCode?c.keyCode:c.which);if(b==13){if($("#imgNext_bottom").length!=0){$("#imgNext_bottom").click();return false}}});var a=$.query.get("FromGateway");if(a){page.placeorder.GetOrderFromSession()}else{page.placeorder.Init($.query.get("DataSource"))}$("a.js_colobox").colorbox({iframe:true,width:840,height:600,opacity:0.5});jQuery.validator.methods.CommonIsValid=function(c,b,d){return d};if(page.placeorder.IsInternationalPayment){jQuery(".select-country").removeClass("hidden")}else{jQuery(".select-country").addClass("hidden")}if(framework.common.iPad.IsIpad()){$("select[multiple]").each(function(b,c){framework.common.iPad.addMaskToList(this.id)});framework.common.iPad.addMaskToList(jQuery("#demo_options_category")[0].id);framework.common.iPad.addMaskToList(jQuery("#demo_lifestyle_category")[0].id)}});
;
ni.RegisterNameSpace("uc");uc.geotype={InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.GeoType;uc.geotype.CheckHideZip4();var c=entity.lookup.DataSource.getByCode(page.placeorder.order.ListType);b.StepTitle="";b.StepDescription="";b.StepButtonsStatus=entity.enums.StepButtons.StartOver|entity.enums.StepButtons.Next;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Next,ButtonEvent:uc.geotype.Click_Next,TestKey:"uc.geotype.Click_Next"}];return b},_IsHideZip4:false,_IsInit:false,IsAgreeAttestation:false,Init:function(){this.SetErrorMessage(false);var b=page.placeorder.order;b.CurrentStep=entity.enums.OrderStep.GeoType;var a=uc.geotype.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,a);jQuery("#ct_step_geotype").removeClass("hidden");page.placeorder.isMultiCount=false;if(!uc.geotype._IsInit){if((page.global.isMyAcxiomPartnerUSite||page.global.isDatabilitiesUSite)&&!uc.geotype.IsAgreeAttestation){if(page.global.isDatabilitiesUSite){$("#attestation_site").text("Databilities");$("#attestation_minAmount").text("$250");$("#attestation_pCode").addClass("hidden");$("#attestation_oStart").addClass("hidden");$("a.register-button").attr("href",$("a.register-button").attr("href").replace("signup","register_databilities"))}}uc.geotype.LoadAvaliableGeoTypes();uc.geotype.LoadFromOrder();uc.geotype._IsInit=true}},LoadAvaliableGeoTypes:function(){var c=page.placeorder.order;var a=c.ListType;var d=[{key:entity.enums.DataSourceType.Consumer,value:[[0,1],[3,2],[4,6],[5,14],[7,17],[19,18],[20,-1],[22,-1],[23,-1]]},{key:entity.enums.DataSourceType.Business,value:[[0,1],[3,2],[4,6],[5,14],[7,18],[20,17],[23,-1]]},{key:entity.enums.DataSourceType.NewMover,value:[[0,1],[3,2],[4,6],[5,14],[7,18],[20,17],[23,-1]]},{key:entity.enums.DataSourceType.Occupant,value:[[9,1],[10,2],[4,17],[-1,18]]},{key:entity.enums.DataSourceType.NewHomeowner,value:[[0,1],[3,6],[4,14],[5,7],[20,18],[-1,17],[23,-1]]},{key:entity.enums.DataSourceType.HomeData,value:[[0,1],[3,6],[4,14],[5,7],[-1,17],[23,-1]]},{key:entity.enums.DataSourceType.Equifaxc,value:[[0,1],[3,2],[4,14],[5,7],[-1,18],[-1,17],[23,-1]]},{key:entity.enums.DataSourceType.Experian,value:[[0,1],[3,2],[4,6],[5,14],[7,18],[-1,17],[23,-1]]},{key:entity.enums.DataSourceType.Compass,value:[[0,1],[3,2],[4,6],[5,14],[7,18],[19,17],[23,-1]]},{key:entity.enums.DataSourceType.CanadaConsumer,value:[[0,1],[3,6],[5,14],[7,18],[-1,17],[23,-1]]},{key:entity.enums.DataSourceType.InfoUSABusiness,value:[[0,1],[3,2],[4,6],[5,14],[7,18],[-1,15],[23,-1]]},{key:entity.enums.DataSourceType.InfoUSAConsumer,value:[[0,1],[3,2],[4,6],[5,14],[7,18],[-1,15]]},{key:entity.enums.DataSourceType.Valassis,value:[[0,1],[3,2],[5,6],[7,14],[20,18],[-1,17]]},{key:entity.enums.DataSourceType.ResidentOccupant,value:[[0,1],[3,2],[5,6],[-1,14],[-1,17],[-1,18]]},{key:entity.enums.DataSourceType.InfoUSA_Business,value:[[0,1],[3,2],[4,6],[5,14],[7,17],[-1,15],[23,-1]]},{key:entity.enums.DataSourceType.InfoUSA_Consumer,value:[[0,1],[3,2],[4,6],[5,14],[7,17],[-1,15],[23,-1]]},{key:entity.enums.DataSourceType.InfoBase_BusinessList,value:[[0,1],[3,2],[4,6],[5,14],[20,18],[-1,17]]},{key:entity.enums.DataSourceType.InfoUSA_IDMS_Business,value:[[0,1],[3,2],[4,6],[5,18],[-1,17],[-1,16],[23,-1]]},{key:entity.enums.DataSourceType.Mobile_Consumer_Advertising,value:[[0,1],[3,2],[4,6],[5,14],[7,17],[19,16],[20,18],[23,-1]]}];var q=null;for(var l=0;l<d.length;l++){if(d[l].key==a){q=d[l].value}}var b=[];var f=[];var p=[];for(var l=0;l<q.length;l++){var s,e;if(q[l][0]!=null){s=this.GetGeoTypeDisplay(q[l][0]);if(s!=null){var m=this.GetInternationalGeoTypeDisplay(s.value);if(!String.IsNullOrEmpty(m)){s.desc=m}b.push(s)}}if(q[l][1]!=null){e=this.GetGeoTypeDisplay(q[l][1]);if(e!=null){var m=this.GetInternationalGeoTypeDisplay(e.value);if(!String.IsNullOrEmpty(m)){e.desc=m}f.push(e)}}}var r=b.length>=f.length;var n=r?b:f;for(var h=0;h<n.length;h++){if(r){if(h>f.length-1){p.push({left:b[h],right:null})}else{p.push({left:b[h],right:f[h]})}}else{if(h>b.length-1){p.push({left:null,right:f[h]})}else{p.push({left:b[h],right:f[h]})}}}var g={table:p,geotype:a};$("#ct_geotype_result").setTemplateElement("ct_geotype_template",null,{filter_data:false});$("#ct_geotype_result").processTemplate(g);$("#ct_geotype_result").removeClass("hidden");var k=jQuery("#geo_type_acxiom_radius");if(k.length>0&&!page.placeorder.IsAcxiomMultiRadius){k.parent().addClass("hidden")}},GetInternationalGeoTypeDisplay:function(a){var c=null;if(page.placeorder.GeoTypeDescs!=null&&page.placeorder.GeoTypeDescs.length>0){var d=null;for(var b=0;b<page.placeorder.GeoTypeDescs.length;b++){d=page.placeorder.GeoTypeDescs[b];if(d.TextName==a){c=d.TextValue;break}}}return c},LoadFromOrder:function(){var b=page.placeorder.order;var a=jQuery(String.format("#ct_step_geotype input[name='geo-radios'][value='{0}']",b.GeoType));if(a.length>0){a[0].checked=true}},ContinueAttestation:function(){uc.geotype.IsAgreeAttestation=true;framework.ui.CloseDialog("ucAttestation")},Click_Next:function(){if(Number(jQuery("input[name='geo-radios']:checked").val())==-1){var c=String.format("Please contact {1} for nationwide list counts at {0} or at {2}.",page.global.PhoneNumber,page.global.DataSpecialistDesc,page.globa.ContactEmail);uc.geotype.SetErrorMessage(true,c);return false}var b=page.placeorder.order;var d=Number(jQuery("input[name='geo-radios']:checked").val());if(b.GeoType!=d){b.OrderGeos=null;b.OrderAddresses=null;b.GeoType=d}if(b.GeoType==entity.enums.GeoType.AcxiomMultiRadius){page.placeorder.IsShowOrderGeoDetailQuantity=false}if(b.GeoType==entity.enums.GeoType.MultiCount){page.placeorder.isMultiCount=true}else{page.placeorder.isMultiCount=false}if(b.GeoType==entity.enums.GeoType.NationWide){b.NextStep=entity.enums.OrderStep.Demo;geos=[];var a=new entity.OrderGeo();a.GeoKeyCode="1";a.GeoKeyDesc="NATIONWIDE";a.GeoType=entity.enums.GeoType.NationWide;geos.push(a);b.OrderGeos=geos}else{if(b.GeoType==entity.enums.GeoType.MultiCount){b.NextStep=entity.enums.OrderStep.Demo}else{b.NextStep=entity.enums.OrderStep.Geo}}page.placeorder.TrackOrderPathGAEvent("Step 1 - GeoType","GeoType Next Button");page.placeorder.GoNext()},Click_Back:function(){page.placeorder.GoBack()},SetErrorMessage:function(a,b){if(a){jQuery("#geo_type_message_error").removeClass("hidden").html(b)}else{jQuery("#geo_type_message_error").addClass("hidden")}},GetGeoTypeDisplay:function(c){radiusDesc="Choose by Radius around an Address <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'><input type='button' class='slhelp' primaryKey='Specify Radius Around Address'/><i class='fa fa-question-circle tip slhelp hidden' primarykey='Specify Radius Around Address' aria-hidden='true'></i>";var a="Closest records to an Address <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'>";var d=[{index:0,value:5,id:"geo_type_zip",desc:uc.geotype._IsHideZip4?"Enter ZIP Codes (Copy and Paste up to 2000 ZIP/Carrier Routes codes)":"Enter ZIP Codes (Copy and Paste up to 2000 ZIP/Carrier Routes/ZIP9 codes)"},{index:1,value:7,id:"geo_type_radius",desc:radiusDesc},{index:2,value:11,id:"geo_type_zipradius",desc:"Choose by Radius around a ZIP Code <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'><input type='button' class='slhelp' primaryKey='Choose By Radius Around Zipcode'/><i class='fa fa-question-circle tip slhelp hidden' primarykey='Choose By Radius Around Zipcode' aria-hidden='true'></i>"},{index:3,value:4,id:"geo_type_city",desc:"Choose by City"},{index:4,value:3,id:"geo_type_county",desc:"Choose by County"},{index:5,value:2,id:"geo_type_state",desc:"Choose by State"},{index:6,value:12,id:"geo_type_closex",desc:a},{index:7,value:8,id:"geo_type_scf",desc:"Enter SCF Codes (up to 25) [first 3 digits of a zip code]"},{index:8,value:9,id:"geo_type_ZipUpload",desc:"Upload a ZIP Code File (Excel format required)"},{index:9,value:5,id:"geo_type_zip",desc:uc.geotype._IsHideZip4?"Enter ZIP Codes (Copy and Paste up to 2000 ZIP/Carrier Routes codes)":"Enter ZIP Codes (Copy and Paste up to 2000 ZIP/Carrier Routes/ZIP9 codes)"},{index:10,value:4,id:"geo_type_city",desc:"Choose by City Name"},{index:12,value:9,id:"geo_type_ZipUpload",desc:"Upload a Microsoft Excel ZIP Code File"},{index:13,value:-1,id:"geo_type_entireusa",desc:"Choose the entire United States"},{index:14,value:13,id:"geo_type_polygon",desc:"Select from Map (Draw Polygon) <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'>"},{index:15,value:14,id:"geo_type_multiradius",desc:"Radius around Multiple Addresses <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'><input type='button' class='slhelp' primaryKey='Specify Radius Around Address'/><i class='fa fa-question-circle tip slhelp hidden' primarykey='Specify Radius Around Address' aria-hidden='true'></i>"},{index:16,value:15,id:"geo_type_multiclosex",desc:"Closest Records to Multiple Addresses <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'>"},{index:17,value:16,id:"geo_type_acxiom_radius",desc:"Radius around Multiple Addresses <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'><input type='button' class='slhelp' primaryKey='Specify Radius Around Address'/><i class='fa fa-question-circle tip slhelp hidden' primarykey='Specify Radius Around Address' aria-hidden='true'></i>"},{index:18,value:18,id:"geo_type_zip_map",desc:"Select ZIP Codes or Carrier Routes from Map <img src='usadata/images/google.jpg'></img><img class='sl360_map_icon hidden' src='usadata/images/googlemap.png'><input type='button' class='slhelp' primaryKey='Choose by Radius'/><i class='fa fa-question-circle tip slhelp hidden' primarykey='Choose by Radius' aria-hidden='true'></i>"},{index:19,value:10,id:"geo_type_msa",desc:"Choose by Metro Area"},{index:20,value:20,id:"geo_type_nationwide",desc:"Total U.S."},{index:22,value:22,id:"geo_type_Congressional_District",desc:"Congressional District"},{index:23,value:23,id:"geo_type_multigeo",desc:"Choose More than one type of Area <input type='button' class='slhelp' primaryKey='Choose More than one type of Area'/><i class='fa fa-question-circle tip slhelp hidden' primarykey='Choose More than one type of Area' aria-hidden='true'></i>"},{index:24,value:24,id:"geo_type_multicount",desc:"Multi Saved List Count"}];if(c==24&&!page.placeorder.isEnableMultiCount){return null}if(c==18&&!page.placeorder.EnableZipCodeOrCarrierRoute){return null}if(c==15&&!page.placeorder.IsMultipleAddress){return null}if(c==23&&!page.placeorder.isEnableMultiGeo){return null}if(c==16&&!page.placeorder.IsMultipleAddress){return null}if(c==17&&!page.placeorder.IsMultipleAddress){return null}if((c==7||c==19||c==20)&&(page.global.isMyAcxiomPartnerUSite||page.global.isDatabilitiesUSite)){return null}if(page.placeorder.disabledGeoTypes){var e=page.placeorder.disabledGeoTypes.split(",");for(var b in e){if(e[b]*1==c){return null}}}for(var b=0;b<d.length;b++){if(d[b].index==c){return d[b]}}return null},CheckHideZip4:function(){$("#geoZipOriginalType7").show();uc.geotype._IsHideZip4=false;var a=page.placeorder.DataSourceOfHideZip4.split(",");for(i=0;i<a.length;i++){if(a[i]==page.placeorder.order.ListType){uc.geotype._IsHideZip4=true;break}}if(uc.geotype._IsHideZip4){$("#geoZipOriginalType7").hide();$("label[for='geo_type_zip']").html("Enter ZIP Codes (Copy and Paste up to 2000 ZIP/Carrier Routes codes)");$("#Span6").html("Copy And Paste (up to 2000 ZIP/Carrier Routes)")}}};
;
ni.RegisterNameSpace("uc");uc.geo={gotoresult:false,Y:null,PolygonList:[],PolylineList:[],overlay:null,InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.Geo;b.StepTitle="";b.StepDescription="";b.StepButtonsStatus=entity.enums.StepButtons.Back|entity.enums.StepButtons.Next;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Next,ButtonEvent:uc.geo.Click_Next},{ButtonKey:entity.enums.StepButtons.Back,ButtonEvent:uc.geo.Click_Back}];return b},Init:function(a){if(a!=null&&a.gotoresult==true){uc.geo.gotoresult=true}else{uc.geo.gotoresult=false}var d=page.placeorder.order;d.CurrentStep=entity.enums.OrderStep.Geo;var c=uc.geo.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,c);jQuery("#geo_zip_map_result").addClass("hidden");jQuery("#ct_geo").fadeIn(1000);jQuery("#ct_step_geo").removeClass("hidden");uc.geo.SetErrorMessage(false,"");if(page.global.isMyAcxiomPartnerUSite){$("#geo_radius_zip").attr("title","Enter Zip Code");$("#geo_radius_address").attr("title","Enter Address");$("#geo_polygon_address").attr("title","Enter Location")}else{$("#geo_radius_zip").removeAttr("title");$("#geo_radius_address").removeAttr("title");$("#geo_polygon_address").removeAttr("title")}if(page.placeorder.ZipcodeOriginalTypeDescs!=null&&page.placeorder.ZipcodeOriginalTypeDescs.length>0){for(var b=0;b<page.placeorder.ZipcodeOriginalTypeDescs.length;b++){jQuery("#geoZipOriginalType"+page.placeorder.ZipcodeOriginalTypeDescs[b].TextName).html(page.placeorder.ZipcodeOriginalTypeDescs[b].TextValue)}}if(page.placeorder.AvailableStateDescs!=null&&page.placeorder.AvailableStateDescs.length>0){jQuery(".availableStateDesc").html(page.placeorder.AvailableStateDescs[0].TextValue)}jQuery("#ct_geo").removeClass("hidden");jQuery("#ct_geo [attr='geography_panel']").addClass("hidden");switch(d.GeoType){case entity.enums.GeoType.State:jQuery("#ct_geo_state").removeClass("hidden");uc.geo.state.Init();if($("#multiGeo_p_state #ct_geo_state").length>=1){$("#ct_geo").append($("#ct_geo_state"))}break;case entity.enums.GeoType.City:jQuery("#ct_geo_city").removeClass("hidden");uc.geo.city.Init();if($("#multiGeo_p_city #ct_geo_city").length>=1){$("#ct_geo").append($("#ct_geo_city"))}break;case entity.enums.GeoType.County:jQuery("#ct_geo_county").removeClass("hidden");uc.geo.county.Init();if($("#multiGeo_p_county #ct_geo_county").length>=1){$("#ct_geo").append($("#ct_geo_county"))}break;case entity.enums.GeoType.CongressionalDistrict:jQuery("#ct_geo_district").removeClass("hidden");uc.geo.district.Init();break;case entity.enums.GeoType.MultiGeo:jQuery("#ct_multiGeo").removeClass("hidden");$("#ct_multiGeo_tabs").tabs({select:function(f,g){var e=$(g.tab).attr("ord");uc.geo.SelectTab(parseInt(e))}});uc.geo.zip.Init();uc.geo.state.Init();uc.geo.county.Init();uc.geo.city.Init();$("#multiGeo_p_zip").append($("#ct_geo_zip"));$("#multiGeo_p_city").append($("#ct_geo_city"));$("#multiGeo_p_county").append($("#ct_geo_county"));$("#multiGeo_p_state").append($("#ct_geo_state"));jQuery("#ct_geo_zip").removeClass("hidden");jQuery("#ct_geo_city").removeClass("hidden");jQuery("#ct_geo_county").removeClass("hidden");jQuery("#ct_geo_state").removeClass("hidden");break;case entity.enums.GeoType.Radius:if(page.placeorder.isBlue){uc.geo.radius=uc.geo.radius_blue}if(page.placeorder.order.SeeBreakDown){jQuery("input[name=ckb_seeBreakdown]").attr("checked",true)}else{jQuery("input[name=ckb_seeBreakdown]").attr("checked",false)}case entity.enums.GeoType.ZipRadius:case entity.enums.GeoType.Closex:case entity.enums.GeoType.Polygon:case entity.enums.GeoType.MultiRadius:case entity.enums.GeoType.MultiClosex:case entity.enums.GeoType.AcxiomMultiRadius:case entity.enums.GeoType.ZipMap:if(page.placeorder.isBlue){uc.geo.radius=uc.geo.radius_blue}else{jQuery("#ct_geo_radius").removeClass("hidden")}uc.geo.radius.Init();if(page.placeorder.EnableZipCodeOrCarrierRouteRadius){jQuery("#span_radius").removeClass("hidden")}break;case entity.enums.GeoType.Zip:jQuery("#ct_geo_zip").removeClass("hidden");uc.geo.zip.Init();if($("#multiGeo_p_zip #ct_geo_zip").length>=1){$("#ct_geo").append($("#ct_geo_zip"))}break;case entity.enums.GeoType.Scf:jQuery("#ct_geo_scf").removeClass("hidden");uc.geo.scf.Init();break;case entity.enums.GeoType.Msa:jQuery("#ct_geo_msa").removeClass("hidden");uc.geo.msa.Init();break;case entity.enums.GeoType.ZipUpload:jQuery("#ct_geo_zipUpload").removeClass("hidden");uc.geo.zipupload.Init();break}if(page.placeorder.order.GeoType==entity.enums.GeoType.Radius&&page.placeorder.currentDataSource==entity.enums.DataSourceType.Consumer){jQuery("#span_seeBreakDown").removeClass("hidden")}else{jQuery("#span_seeBreakDown").addClass("hidden")}},SelectTab:function(a){$("#multiGeo_p_zip").addClass("hidden");switch(a){case entity.enums.MultiGeoTab.ZipCode:$("#multiGeo_p_zip").removeClass("hidden");break;case entity.enums.DemoTab.City:$("#multiGeo_p_city").removeClass("hidden");break;case entity.enums.DemoTab.County:$("#multiGeo_p_county").removeClass("hidden");break;case entity.enums.DemoTab.State:$("#multiGeo_p_state").removeClass("hidden");break}},SetSeeBreakDown:function(){uc.geo.SetErrorMessage(false,"");if($("#span_seeBreakDown input[type='checkbox'][name='ckb_seeBreakdown']:checked").val()=="on"){page.placeorder.order.SeeBreakDown=true}else{page.placeorder.order.SeeBreakDown=false}},SetOrderGeos:function(){var b=page.placeorder.order;var a=false;switch(b.GeoType){case entity.enums.GeoType.State:a=uc.geo.state.SetOrderGeos(b);break;case entity.enums.GeoType.City:a=uc.geo.city.SetOrderGeos(b);break;case entity.enums.GeoType.County:a=uc.geo.county.SetOrderGeos(b);break;case entity.enums.GeoType.CongressionalDistrict:a=uc.geo.district.SetOrderGeos(b);break;case entity.enums.GeoType.MultiGeo:a=uc.geo.multigeo.SetOrderGeos(b);break;case entity.enums.GeoType.Radius:case entity.enums.GeoType.ZipRadius:case entity.enums.GeoType.Closex:case entity.enums.GeoType.Polygon:case entity.enums.GeoType.MultiRadius:case entity.enums.GeoType.MultiClosex:case entity.enums.GeoType.AcxiomMultiRadius:case entity.enums.GeoType.ZipMap:a=uc.geo.radius.SetOrderGeos(b);break;case entity.enums.GeoType.Zip:a=uc.geo.zip.SetOrderGeos(b);break;case entity.enums.GeoType.Scf:a=uc.geo.scf.SetOrderGeos(b);break;case entity.enums.GeoType.Msa:a=uc.geo.msa.SetOrderGeos(b);break;case entity.enums.GeoType.ZipUpload:a=uc.geo.zipupload.SetOrderGeos(b);break}return a},CheckIfGeoExists:function(c,b){if(c==null||String.IsNullOrEmpty(c.GeoKeyCode)||b==null||b.length<1){return null}for(var a=0;a<b.length;a++){if(b[a]!=null&&c.GeoKeyCode==b[a].GeoKeyCode){return b[a]}}return null},SetErrorMessage:function(a,b){if(a){jQuery("#geo_message_error").removeClass("hidden").html(b)}else{jQuery("#geo_message_error").addClass("hidden")}},SetErrorMessageForMulti:function(a,b){if(a){jQuery("#multigeo_message_error").removeClass("hidden").html(b)}else{jQuery("#multigeo_message_error").addClass("hidden")}},Click_Next:function(){uc.geo.SetErrorMessage(false,"");var b=page.placeorder.order;var a=uc.geo.SetOrderGeos();if(a){page.placeorder.TrackOrderPathGAEvent("Step 1 - Geo","Geo Next Button");if(uc.geo.gotoresult){uc.geo.gotoresult=false;framework.common.Ajax({url:"PlaceOrder.aspx/SubmitOrder",data:{order:page.placeorder.order},success:function(c){if(c.ResultFlag==true){$("#ct_geo div[name='GeoType']").each(function(){$(this).addClass("hidden")});page.placeorder.order=c.DataSource;page.placeorder.order.NextStep=entity.enums.OrderStep.PollCount;page.placeorder.GoNext()}},error:function(c){},waitingElement:"ct_geo"})}else{$("#ct_geo div[name='GeoType']").each(function(){$(this).addClass("hidden")});b.NextStep=entity.enums.OrderStep.Demo;page.placeorder.GoNext()}}},Click_Back:function(){var a=page.placeorder.order.GeoType;$("#ct_geo div[name='GeoType']").each(function(){$(this).addClass("hidden")});$("#ma_explain_video_line").css("display","block");$("[id^='sl360_explain_video_setp_']").css("display","none");$("#sl360_explain_video_setp_1").css("display","block");page.placeorder.TrackOrderPathGAEvent("Step 1 - Geo","Geo Back Button");page.placeorder.GoBack()}};uc.geo.zip={_IsInit:false,ZipRegExp:null,DuplicateZips:[],Init:function(){if(uc.geo.zip._IsInit==false){uc.geo.zip.CreateZipInputs();jQuery("#geo_zip_range_input").slideUp();if(page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.ZIP_INPUT&&page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.ZIP_PASTED&&page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.ZIP_RANGE_INPUT){page.placeorder.order.ZipcodeOriginalType=entity.enums.ZipcodeOrignalType.ZIP_INPUT}ZipRegExp=new RegExp(page.placeorder.ZipRegularExpression,"i");uc.geo.zip._IsInit=true;if(page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.ZIP_INPUT){uc.geo.zip.ToggleZipInput();uc.geo.zip.ToggleTargetPanel(page.placeorder.order.ZipcodeOriginalType)}if(entity.enums.ZipcodeOrignalType.ZIP_PASTED>page.placeorder.MaxZipcodeOriginalType){jQuery("#geo_zip_paste_panel").addClass("hidden")}if(entity.enums.ZipcodeOrignalType.ZIP_RANGE_INPUT>page.placeorder.MaxZipcodeOriginalType){jQuery("#geo_zip_range_input_panel").addClass("hidden")}}if(!page.global.isMyAcxiomPartnerUSite){uc.geo.zip.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.zip.LoadFromOrder()}}jQuery("#geo_zip_range_from").setMask(page.placeorder.ZipMask);jQuery("#geo_zip_range_to").setMask(page.placeorder.ZipMask)},LoadFromOrder:function(){var a=page.placeorder.order;if((a.GeoType==entity.enums.GeoType.Zip||a.GeoType==entity.enums.GeoType.MultiGeo)&&a.OrderGeos!=null){var e=$("#geo_zip_inputs input:text")||[];var d=[];for(var b=0;b<a.OrderGeos.length;b++){if(a.OrderGeos[b].GeoType==entity.enums.GeoType.Zip){d.push(a.OrderGeos[b])}}var g=d.length;for(var c=0;c<e.length;c++){if(c<=g-1){e[c].value=d[c].GeoKeyCode}else{e[c].value=""}}jQuery("#geo_zip_paste").val("");var h="";if(g>0){h=d[0].GeoKeyCode}for(var c=1;c<g;c++){h+="\n"+d[c].GeoKeyCode}jQuery("#geo_zip_paste").val(h);jQuery("#geo_zip_range_from").val("");jQuery("#geo_zip_range_to").val("");var k="";var f="";if(g>0){k=d[0].GeoKeyCode;f=d[0].GeoKeyCode}for(var c=1;c<g;c++){k=uc.geo.zip.MinZipcode(k,d[c].GeoKeyCode);f=uc.geo.zip.MaxZipcode(k,d[c].GeoKeyCode)}jQuery("#geo_zip_range_from").val(k);jQuery("#geo_zip_range_to").val(f)}},MinZipcode:function(d,c){if(d<c){return d}return c},MaxZipcode:function(d,c){if(d<c){return c}return d},CreateZipInputs:function(){$("#geo_zip_inputs").setTemplateElement("geo_zip_template");$("#geo_zip_inputs").processTemplate({linecount:5});$("#geo_zip_inputs input:text").setMask(page.placeorder.ZipMask)},GetInputedZips:function(){var b=$("#geo_zip_inputs input:text")||[];var a=[];b.each(function(c){var d=jQuery.trim(this.value);if(d!=""){a.push(d)}});return a},IsValidZipcode:function(a){return ZipRegExp.test(a)},IsValidZip4:function(a){return ZipRegExp.test(a)},IsValidCRRT:function(a){return ZipRegExp.test(a)},GetPastedZips:function(){var a=jQuery("#geo_zip_paste").val();var d=a.split("\n");var b=new Array();var f=0;var e="";if(uc.geo.zip.tempRadio==1){ZipRegExp=new RegExp(page.placeorder.ZipRegularExpression,"i");for(var c=0;c<d.length;c++){e=jQuery.trim(d[c]);if(uc.geo.zip.IsValidZipcode(e)){if(!uc.geo.zip.IsZipExisting(b,e)){b[f]=e;f++}else{uc.geo.zip.AddDuplicateValue(e)}}else{uc.geo.zip.AddDuplicateValue(e)}}}else{if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.ZIP4){ZipRegExp=new RegExp(page.placeorder.Zip4RegularExpression,"i");for(var c=0;c<d.length;c++){e=jQuery.trim(d[c]);if(uc.geo.zip.IsValidZip4(e)){if(!uc.geo.zip.IsZipExisting(b,e)){b[f]=e;f++}else{uc.geo.zip.AddDuplicateValue(e)}}else{uc.geo.zip.AddDuplicateValue(e)}}}else{if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.CRRT){ZipRegExp=new RegExp(page.placeorder.CRRTRegularExpression,"i");for(var c=0;c<d.length;c++){e=jQuery.trim(d[c]);if(uc.geo.zip.IsValidCRRT(e)){if(!uc.geo.zip.IsZipExisting(b,e)){b[f]=e;f++}else{uc.geo.zip.AddDuplicateValue(e)}}else{uc.geo.zip.AddDuplicateValue(e)}}}}}return b},AddDuplicateValue:function(a){if(!uc.geo.zip.IsZipExisting(uc.geo.zip.DuplicateZips,a)){uc.geo.zip.DuplicateZips.push(a)}},GetRangeZips:function(c,b,a){framework.common.Ajax({url:"PlaceOrder.aspx/GetZipcodesByRange",data:{fromZipcode:c,toZipcode:b,maxLength:a},async:false,success:function(d){if(d.ResultFlag==true){return d.DataSource}},error:function(d){},waitingElement:"ct_geo"})},IsZipExisting:function(a,c){for(var b=0;b<a.length;b++){if(a[b]==c){return true}}return false},ResetZips:function(f){if(f.length>0){if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_INPUT){$("#geo_zip_inputs input:text").val("");var c=$("#geo_zip_inputs input:text").val("")||[];for(var e=0;e<f.length;e++){c[e].value=f[e]}return true}else{if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){jQuery("#geo_zip_paste").val("");var b=f[0];for(var e=1;e<f.length;e++){b+="\n"+f[e]}jQuery("#geo_zip_paste").val(b);return true}else{var a="";var d="";if(f.length>0){a=f[0];d=f[0]}for(var e=1;e<f.length;e++){a=uc.geo.zip.MinZipcode(a,f[e]);d=uc.geo.zip.MaxZipcode(a,f[e])}jQuery("#geo_zip_range_from").val(a);jQuery("#geo_zip_range_to").val(d)}}}},ToggleZipInput:function(){jQuery("#geo_zip_enter_switch").toggleClass("collapsed-panel-restore");jQuery("#geo_zip_inputs").slideToggle()},ToggleZipPastePanel:function(){jQuery("#geo_zip_paste_switch").toggleClass("collapsed-panel-restore");jQuery("#geo_zip_paste_div").toggleClass("hidden")},ToggleZipRangeInput:function(){jQuery("#geo_zip_range_input_switch").toggleClass("collapsed-panel-restore");jQuery("#geo_zip_range_input").slideToggle()},tempRadio:1,TogglePastePanel:function(a){var b=parseInt($(a).attr("originalType"));uc.geo.zip.ToggleZipcodePanel(b)},ToggleZipcodePanel:function(b){var a;if(b!=page.placeorder.order.ZipcodeOriginalType){a=b}else{if(b==entity.enums.ZipcodeOrignalType.ZIP_INPUT){a=entity.enums.ZipcodeOrignalType.ZIP_PASTED}else{if(b==entity.enums.ZipcodeOrignalType.ZIP_PASTED){a=entity.enums.ZipcodeOrignalType.ZIP_RANGE_INPUT}else{a=entity.enums.ZipcodeOrignalType.ZIP_INPUT}}}if(a>page.placeorder.MaxZipcodeOriginalType){a=entity.enums.ZipcodeOrignalType.ZIP_INPUT}uc.geo.zip.ToggleTargetPanel(page.placeorder.order.ZipcodeOriginalType);uc.geo.zip.ToggleTargetPanel(a);page.placeorder.order.ZipcodeOriginalType=a},ToggleTargetPanel:function(a){if(a==entity.enums.ZipcodeOrignalType.ZIP_INPUT){uc.geo.zip.ToggleZipInput()}else{if(a==entity.enums.ZipcodeOrignalType.ZIP_PASTED){uc.geo.zip.ToggleZipPastePanel()}else{uc.geo.zip.ToggleZipRangeInput()}}},SetOrderGeos:function(e){uc.geo.zip.DuplicateZips=[];uc.geo.SetErrorMessage(false);uc.geo.zip.tempRadio=$("input[type='radio'][name='pastezip_radio']:checked").val();var a=null;if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_INPUT){a=uc.geo.zip.GetInputedZips();if(a==null||a.length==0){uc.geo.SetErrorMessage(true,"Please input at least one ZIP.");return false}}else{if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){a=uc.geo.zip.GetPastedZips();if(a==null||a.length==0){if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.ATUO){uc.geo.SetErrorMessage(true,"Please input at least one ZIP (e.g. 10017) and each end with newline.")}else{if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.ZIP4){uc.geo.SetErrorMessage(true,"Please input at least one ZIP (e.g. 071100001).")}else{if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.CRRT){uc.geo.SetErrorMessage(true,"Please input at least one ZIP (e.g. 07110:B001).")}}}return false}}else{var h=jQuery("#geo_zip_range_from").val().trim();if(h==""||!uc.geo.zip.IsValidZipcode(h)){uc.geo.SetErrorMessage(true,"Please input the from ZIP code.");return false}var j=jQuery("#geo_zip_range_to").val().trim();if(j==""||!uc.geo.zip.IsValidZipcode(j)){uc.geo.SetErrorMessage(true,"Please input the to ZIP code.");return false}if(h>j){var k=h;h=j;j=k;jQuery("#geo_zip_range_from").val(h);jQuery("#geo_zip_range_to").val(j)}framework.common.Ajax({url:"PlaceOrder.aspx/GetZipcodesByRange",data:{fromZipcode:h,toZipcode:j,maxLength:page.global.MaxNumberOfPastedZips},async:false,success:function(i){if(i.ResultFlag==true){a=i.DataSource}},error:function(i){},waitingElement:"ct_geo"});if(a==null||a.length==0){uc.geo.SetErrorMessage(true,"Please input at least one ZIP.");return false}}}var l=true;var d=0;if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){d=uc.geo.zip.tempRadio}e.ZipType=d;if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){if(uc.geo.zip.DuplicateZips.length>0){uc.geo.zip.ResetZips(a);var b="";for(var g=0;g<uc.geo.zip.DuplicateZips.length;g++){b+=(g==0?"":", ")+uc.geo.zip.DuplicateZips[g].toString()}uc.geo.SetErrorMessage(true,"There were invalid or duplicate entries. They have been removed. Please click Next to continue. <br />Invalid or Duplicate entries: "+b);l=false}}else{framework.common.Ajax({url:"PlaceOrder.aspx/GetZipsByZips",data:{zips:a,zipType:d},async:false,success:function(m){var i=m.DataSource;uc.geo.zip.ResetZips(i);if(i==null||i.length==0){uc.geo.SetErrorMessage(true,"Please input at least one zip.");l=false}if(i.length!=a.length){uc.geo.SetErrorMessage(true,"There were invalid or duplicate entries. They have been removed. Please click Next to continue.");l=false;setTimeout(function(){uc.geo.SetErrorMessage(false)},3000)}},error:function(i){uc.geo.SetErrorMessage(i.responseText);l=false},waitingElement:"ct_main_panel"})}if(!l){return false}var c=a.length>page.global.MaxNumberOfPastedZips?page.global.MaxNumberOfPastedZips:a.length;geos=[];for(var g=0;g<c;g++){var f=new entity.OrderGeo();f.GeoKeyCode=a[g];f.GeoKeyDesc=a[g];f.GeoType=entity.enums.GeoType.Zip;geos.push(f)}if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please input at least one zip.");return false}e.OrderGeos=geos;return true}};uc.geo.state={isFirstLoad:true,Init:function(){if(uc.geo.state.isFirstLoad){uc.geo.state.LoadStates();uc.geo.state.isFirstLoad=false}if(!page.global.isMyAcxiomPartnerUSite){uc.geo.state.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.state.LoadFromOrder()}}},LoadFromOrder:function(){var d=page.placeorder.order;if((d.GeoType==entity.enums.GeoType.State||d.GeoType==entity.enums.GeoType.MultiGeo)&&d.OrderGeos!=null){var c=[];for(var b=0;b<d.OrderGeos.length;b++){var a=d.OrderGeos[b].GeoType;if(a==entity.enums.GeoType.State){c.push(d.OrderGeos[b])}}framework.ui.fillDropDownList({ElementId:"geo_state_right",DataSource:c,ValueField:"GeoKeyCode",TextField:"GeoKeyDesc",SelectValue:null})}},LoadStates:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetStates",data:{},success:function(a){if(a.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_state_left",DataSource:a.DataSource,ValueField:"StateCode",TextField:"StateName",SelectValue:null})}},error:function(a){uc.geo.SetErrorMessage(true,"We've a problem on retrieving states list, please try again later.")},waitingElement:"ct_main_panel"})},AddStatesToTarget:function(){var a=$("#geo_state_left").selectedOptions()||[];for(var b=0;b<a.length;++b){if(!$("#geo_state_right").containsOption(a[b].value)){$("#geo_state_right").addOption(a[b].value,a[b].text,false)}}$("#geo_state_right").sortOptions(true);framework.common.iPad.refreshMask("geo_state_right")},RemoveStatesFromTarget:function(){$("#geo_state_right").removeOption(/./,true);framework.common.iPad.refreshMask("geo_state_right")},RemoveAllStatesFromTarget:function(){$("#geo_state_right").removeOption(/./);framework.common.iPad.refreshMask("geo_state_right")},SetOrderGeos:function(a){geos=[];jQuery("#geo_state_right option").each(function(b){var c=new entity.OrderGeo();c.StateCode=this.value;c.GeoKeyCode=this.value;c.GeoKeyDesc=this.text;c.GeoType=entity.enums.GeoType.State;geos.push(c)});if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please select at least one state.");return false}a.OrderGeos=geos;return true}};uc.geo.district={isFirstLoad:true,Init:function(){if(uc.geo.district.isFirstLoad){uc.geo.district.LoadStates();uc.geo.district.isFirstLoad=false}if(!page.global.isMyAcxiomPartnerUSite){uc.geo.district.LoadFromOrder()}},LoadFromOrder:function(){var c=page.placeorder.order;if(c.GeoType==entity.enums.GeoType.CongressionalDistrict&&c.OrderGeos!=null){var b="";for(var a=0;a<c.OrderGeos.length;++a){b=c.OrderGeos[a].GeoKeyCode+"|"+c.OrderGeos[a].StateCode;if(!$("#geo_district_right").containsOption(b)){$("#geo_district_right").addOption(b,c.OrderGeos[a].CityName,false)}}if(framework.common.iPad.IsIpad()){jQuery("#geo_district_right[multiple] option:selected").removeAttr("selected")}framework.common.iPad.refreshMask("geo_district_right")}},LoadStates:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetStates",data:{},success:function(a){if(a.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_district_state",DataSource:a.DataSource,ValueField:"StateCode",TextField:"StateName",SelectValue:null});uc.geo.district.LoadDistricts()}},error:function(a){uc.geo.SetErrorMessage(true,"We've a problem on retrieving states list, please try again later.")},waitingElement:"ct_main_panel"})},LoadDistricts:function(){var a=jQuery("#geo_district_state").val();framework.common.Ajax({url:"PlaceOrder.aspx/GetDistrictsByState",data:{statecode:a},success:function(b){if(b.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_district_left",DataSource:b.DataSource,ValueField:"Code",TextField:"Name",SelectValue:null})}},error:function(b){},waitingElement:"ct_geo_district"})},AddDistrictsToTarget:function(){var a=$("#geo_district_left").selectedOptions()||[];var d=jQuery("#geo_district_state").val();var c="";for(var b=0;b<a.length;++b){c=a[b].value+"|"+d;if(!$("#geo_district_right").containsOption(c)){$("#geo_district_right").addOption(c,a[b].text,false)}}},RemoveDistrictsFromTarget:function(){$("#geo_district_right").removeOption(/./,true)},RemoveAllDistrictsFromTarget:function(){$("#geo_district_right").removeOption(/./)},SetOrderGeos:function(a){geos=[];jQuery("#geo_district_right option").each(function(b){var d=new entity.OrderGeo();var c=this.value.split("|")[1];d.StateCode=c;d.GeoKeyCode=this.value.split("|")[0];d.GeoKeyDesc=String.format("{0}({1})",this.text,c);d.CityName=this.text;d.GeoType=entity.enums.GeoType.CongressionalDistrict;geos.push(d)});if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please select at least one district.");return false}a.OrderGeos=geos;return true}};uc.geo.multigeo={isFirstLoad:true,Init:function(){if(uc.geo.multigeo.isFirstLoad){uc.geo.multigeo.LoadStates();uc.geo.multigeo.isFirstLoad=false}if(!page.global.isMyAcxiomPartnerUSite){}},SetOrderGeos:function(e){uc.geo.zip.DuplicateZips=[];uc.geo.SetErrorMessage(false);geos=[];jQuery("#geo_state_right option").each(function(l){var m=new entity.OrderGeo();m.StateCode=this.value;m.GeoKeyCode=this.value;m.GeoKeyDesc=this.text;m.GeoType=entity.enums.GeoType.State;geos.push(m)});jQuery("#geo_city_right option").each(function(l){var n=new entity.OrderGeo();var m=this.value.split("|")[1];n.StateCode=m;n.GeoKeyCode=this.text+":"+m;n.GeoKeyDesc=String.format("{0}({1})",this.text,m);n.CityName=this.text;n.GeoType=entity.enums.GeoType.City;geos.push(n)});jQuery("#geo_county_right option").each(function(l){var m=$(this).attr("state");var n=new entity.OrderGeo();n.StateCode=m;n.CountyCode=this.value;n.CountyName=this.text;n.CountyFips=$(this).attr("countyfips");n.GeoKeyCode=this.value;n.GeoKeyDesc=String.format("{0}({1})",this.text,m);n.GeoType=entity.enums.GeoType.County;geos.push(n)});uc.geo.zip.tempRadio=$("input[type='radio'][name='pastezip_radio']:checked").val();var a=null;if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_INPUT){a=uc.geo.zip.GetInputedZips()}else{if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){a=uc.geo.zip.GetPastedZips();if(a==null||a.length==0){if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.ATUO){uc.geo.SetErrorMessage(true,"Please input at least one ZIP (e.g. 10017) and each end with newline.")}else{if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.ZIP4){uc.geo.SetErrorMessage(true,"Please input at least one ZIP (e.g. 071100001).")}else{if(uc.geo.zip.tempRadio==entity.enums.RadiusTypeChoice.CRRT){uc.geo.SetErrorMessage(true,"Please input at least one ZIP (e.g. 07110:B001).")}}}return false}}else{var h=jQuery("#geo_zip_range_from").val().trim();if(h==""||!uc.geo.zip.IsValidZipcode(h)){uc.geo.SetErrorMessage(true,"Please input the from ZIP code.");return false}var j=jQuery("#geo_zip_range_to").val().trim();if(j==""||!uc.geo.zip.IsValidZipcode(j)){uc.geo.SetErrorMessage(true,"Please input the to ZIP code.");return false}if(h>j){var k=h;h=j;j=k;jQuery("#geo_zip_range_from").val(h);jQuery("#geo_zip_range_to").val(j)}framework.common.Ajax({url:"PlaceOrder.aspx/GetZipcodesByRange",data:{fromZipcode:h,toZipcode:j,maxLength:page.global.MaxNumberOfPastedZips},async:false,success:function(i){if(i.ResultFlag==true){a=i.DataSource}},error:function(i){},waitingElement:"ct_geo"});if(a==null||a.length==0){uc.geo.SetErrorMessage(true,"Please input at least one ZIP.");return false}}}var d=0;if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){d=uc.geo.zip.tempRadio}e.ZipType=d;if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.ZIP_PASTED){if(uc.geo.zip.DuplicateZips.length>0){uc.geo.zip.ResetZips(a);var b="";for(var g=0;g<uc.geo.zip.DuplicateZips.length;g++){b+=(g==0?"":", ")+uc.geo.zip.DuplicateZips[g].toString()}uc.geo.SetErrorMessage(true,"There were invalid or duplicate entries. They have been removed. Please click Next to continue. <br />Invalid or Duplicate entries: "+b);isValid=false}}else{framework.common.Ajax({url:"PlaceOrder.aspx/GetZipsByZips",data:{zips:a,zipType:d},async:false,success:function(l){var i=l.DataSource;uc.geo.zip.ResetZips(i);if(i.length!=a.length){uc.geo.SetErrorMessage(true,"There were invalid or duplicate entries. They have been removed. Please click Next to continue.");return false}},error:function(i){uc.geo.SetErrorMessage(i.responseText);return false},waitingElement:"ct_main_panel"})}if(a!=null){var c=a.length>page.global.MaxNumberOfPastedZips?page.global.MaxNumberOfPastedZips:a.length;for(var g=0;g<c;g++){var f=new entity.OrderGeo();f.GeoKeyCode=a[g];f.GeoKeyDesc=a[g];f.GeoType=entity.enums.GeoType.Zip;geos.push(f)}}if(geos==null||geos.length==0){uc.geo.SetErrorMessageForMulti(true,"Please select at least one of Zip,City,County or State.");return false}else{uc.geo.SetErrorMessageForMulti(false,"")}e.OrderGeos=geos;return true}};uc.geo.city={isFirstLoad:true,Init:function(){if(uc.geo.city.isFirstLoad){uc.geo.city.LoadStates();uc.geo.city.isFirstLoad=false}if(!page.global.isMyAcxiomPartnerUSite){uc.geo.city.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.city.LoadFromOrder()}}},LoadFromOrder:function(){var c=page.placeorder.order;if((c.GeoType==entity.enums.GeoType.City||c.GeoType==entity.enums.GeoType.MultiGeo)&&c.OrderGeos!=null){var b="";for(var a=0;a<c.OrderGeos.length;++a){if(c.OrderGeos[a].GeoType!=entity.enums.GeoType.City){continue}b=c.OrderGeos[a].CityName+"|"+c.OrderGeos[a].StateCode;if(!$("#geo_city_right").containsOption(b)){$("#geo_city_right").addOption(b,c.OrderGeos[a].CityName,false)}}if(framework.common.iPad.IsIpad()){jQuery("#geo_city_right[multiple] option:selected").removeAttr("selected")}framework.common.iPad.refreshMask("geo_city_right")}},LoadStates:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetStates",data:{},success:function(a){if(a.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_city_state",DataSource:a.DataSource,ValueField:"StateCode",TextField:"StateName",SelectValue:null});uc.geo.city.LoadCities()}},error:function(a){uc.geo.SetErrorMessage(true,"We've a problem on retrieving states list, please try again later.")},waitingElement:"ct_main_panel"})},LoadCities:function(){var a=jQuery("#geo_city_state").val();framework.common.Ajax({url:"PlaceOrder.aspx/GetCitiesByState",data:{statecode:a},success:function(b){if(b.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_city_left",DataSource:b.DataSource,ValueField:"CityCode",TextField:"CityName",SelectValue:null})}},error:function(b){},waitingElement:"ct_geo_city"})},AddCitiesToTarget:function(){var a=$("#geo_city_left").selectedOptions()||[];var d=jQuery("#geo_city_state").val();var c="";for(var b=0;b<a.length;++b){c=a[b].text+"|"+d;if(!$("#geo_city_right").containsOption(c)){$("#geo_city_right").addOption(c,a[b].text,false)}}$("#geo_city_right").sortOptions(true);framework.common.iPad.refreshMask("geo_city_right")},RemoveCitiesFromTarget:function(){$("#geo_city_right").removeOption(/./,true);framework.common.iPad.refreshMask("geo_city_right")},RemoveAllCitiesFromTarget:function(){$("#geo_city_right").removeOption(/./);framework.common.iPad.refreshMask("geo_city_right")},SetOrderGeos:function(a){geos=[];jQuery("#geo_city_right option").each(function(b){var d=new entity.OrderGeo();var c=this.value.split("|")[1];d.StateCode=c;d.GeoKeyCode=this.text+":"+c;d.GeoKeyDesc=String.format("{0}({1})",this.text,c);d.CityName=this.text;d.GeoType=entity.enums.GeoType.City;geos.push(d)});if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please select at least one city.");return false}a.OrderGeos=geos;return true}};uc.geo.county={isFirstLoad:true,Init:function(){if(uc.geo.county.isFirstLoad){uc.geo.county.LoadStates();uc.geo.county.isFirstLoad=false}if(!page.global.isMyAcxiomPartnerUSite){uc.geo.county.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.county.LoadFromOrder()}}},LoadFromOrder:function(){var d=page.placeorder.order;if((d.GeoType==entity.enums.GeoType.County||d.GeoType==entity.enums.GeoType.MultiGeo)&&d.OrderGeos!=null){var c=[];for(var b=0;b<d.OrderGeos.length;b++){var a=d.OrderGeos[b].GeoType;if(a==entity.enums.GeoType.County){c.push(d.OrderGeos[b])}}framework.ui.fillDropDownList({ElementId:"geo_county_right",DataSource:c,ValueField:"GeoKeyCode",TextField:"CountyName",SelectValue:null,Attributes:{countycode:"GeoKeyCode",countyfips:"CountyFips",state:"StateCode"}})}},LoadStates:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetStates",data:{},success:function(a){if(a.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_county_state",DataSource:a.DataSource,ValueField:"StateCode",TextField:"StateName",SelectValue:null});uc.geo.county.LoadCounties()}},error:function(a){uc.geo.SetErrorMessage(true,"We've a problem on retrieving states list, please try again later.")},waitingElement:"ct_main_panel"})},LoadCounties:function(){var a=jQuery("#geo_county_state").val();framework.common.Ajax({url:"PlaceOrder.aspx/GetCountiesByState",data:{statecode:a},success:function(b){if(b.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_county_left",DataSource:b.DataSource,ValueField:"CountyCode",TextField:"CountyName",SelectValue:null,Attributes:{countycode:"CountyCode",countyfips:"CountyFips",state:"StateCode"}})}},error:function(b){},waitingElement:"ct_geo_county"})},AddCountiesToTarget:function(){var d=$("#geo_county_left").selectedOptions()||[];for(var e=0;e<d.length;++e){if(!$("#geo_county_right").containsOption(d[e].value)){$("#geo_county_right").append($(d[e]).clone())}}$("#geo_county_right").val(-1);var c=$("#geo_county_right").get(0);var f=[];while(c.options.length){var a=c.options[c.options.length-1];f.unshift(c.removeChild(a))}f.sort(function(h,g){return h.value>g.value});while(f.length){c.appendChild(f.shift())}framework.common.iPad.refreshMask("geo_county_right")},RemoveCountiesFromTarget:function(){$("#geo_county_right").removeOption(/./,true);framework.common.iPad.refreshMask("geo_county_right")},RemoveAllCountiesFromTarget:function(){$("#geo_county_right").removeOption(/./);framework.common.iPad.refreshMask("geo_county_right")},SetOrderGeos:function(a){geos=[];jQuery("#geo_county_right option").each(function(b){var c=$(this).attr("state");var d=new entity.OrderGeo();d.StateCode=c;d.CountyCode=this.value;d.CountyName=this.text;d.CountyFips=$(this).attr("countyfips");d.GeoKeyCode=this.value;d.GeoKeyDesc=String.format("{0}({1})",this.text,c);d.GeoType=entity.enums.GeoType.County;geos.push(d)});if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please select at least one county.");return false}a.OrderGeos=geos;return true}};uc.geo.radius={_NeedAddLayer:true,_initAddLayer:true,_IsInit:false,RadiusAddresses:[],CurrentAddress:null,Overlays:null,MapZips:[],MapPaths:[],isCallAndLoadMap:false,HighlightOverlays:null,HighlightData:null,MultiRadiusFileName:null,Init:function(){var b=page.placeorder.order;uc.geo.radius.Overlays=new Object();jQuery("#ct_geo_radius_input").addClass("hidden");jQuery("#ct_geo_radius_zip").addClass("hidden");jQuery("#ct_geo_radius_closex").addClass("hidden");jQuery("#ct_geo_polygon").addClass("hidden");jQuery("#ct_geo_multiRadius").addClass("hidden");jQuery("#ct_geo_multiClosex").addClass("hidden");jQuery("#add_radius_target_address_radius").addClass("hidden");jQuery("#add_radius_target_address_closex").addClass("hidden");jQuery("#multi_closex_name").addClass("hidden");jQuery("#search_closex").addClass("hidden");jQuery("#multi_radius_address").addClass("hidden");jQuery("#ct_geo_multi_radius_input").addClass("hidden");jQuery("#ct_geo_zip_map").addClass("hidden");jQuery("#span_closex_name").addClass("hidden");if(page.placeorder.RadiusUnit==entity.enums.UmCodeType.KM){jQuery(".radius_unit").html("Kilometer(s)")}switch(b.GeoType){case entity.enums.GeoType.Radius:jQuery("#ct_geo_radius_input").removeClass("hidden");if(b.ListType==entity.enums.DataSourceType.CanadaConsumer){jQuery("#radiusTypeByRadius").find("option").remove().end().append('<option value="4" title="Postal Code">Postal Code</option>')}break;case entity.enums.GeoType.ZipRadius:jQuery("#ct_geo_radius_zip").removeClass("hidden");jQuery("#geo_radius_zip").setMask(page.placeorder.ZipMask);break;case entity.enums.GeoType.Closex:jQuery("#ct_geo_radius_closex").removeClass("hidden");break;case entity.enums.GeoType.Polygon:jQuery("#ct_geo_polygon").removeClass("hidden");if(b.ListType==entity.enums.DataSourceType.CanadaConsumer){jQuery("#radiusTypeByPolygon").find("option").remove().end().append('<option value="4" title="Postal Code">Postal Code</option>')}break;case entity.enums.GeoType.MultiRadius:jQuery("#ct_geo_multiRadius").removeClass("hidden");if(page.placeorder.IsMultipleAddress){jQuery("#multi_radius_address").removeClass("hidden")}break;case entity.enums.GeoType.MultiClosex:jQuery("#ct_geo_multiClosex").removeClass("hidden");if(page.placeorder.IsMultipleAddress){jQuery("#multi_radius_address").removeClass("hidden")}break;case entity.enums.GeoType.AcxiomMultiRadius:jQuery("#ct_geo_multi_radius_input").removeClass("hidden");if(page.placeorder.IsMultipleAddress){jQuery("#add_multi_radius_target_address_radius").removeClass("hidden");jQuery("#multi_radius_address").removeClass("hidden")}break;case entity.enums.GeoType.ZipMap:jQuery("#ct_geo_zip_map").removeClass("hidden");break}uc.geo.radius.ShowMoreAddresses();var a=4;if(!uc.geo.radius._IsInit){framework.ui.showWaiting("ct_geo_radius",true);framework.common.GoogleMap.LoadMapApi(function(){jQuery("#geo_radius_map").jmap("init",{mapCenter:page.placeorder.MapCenter,mapZoom:a,mapEnableScrollZoom:true,mapEnableScaleControl:true},function(){if(!page.global.isMyAcxiomPartnerUSite){uc.geo.radius.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.radius.LoadFromOrder()}}var c=jQuery("#geo_radius_map");var e=Mapifies.MapObjects.Get(c);uc.geo.overlay=new google.maps.OverlayView();uc.geo.overlay.draw=function(){};uc.geo.overlay.setMap(e);if(uc.geo.overlay.getProjection()==undefined){uc.geo.overlay=new google.maps.OverlayView();uc.geo.overlay.draw=function(){};uc.geo.overlay.setMap(e)}google.maps.event.addListener(e,"idle",function(){});google.maps.event.addListener(e,"zoom_changed",function(){var k=page.placeorder.order;var h=page.placeorder.order.RadiusTypeChoice!=entity.enums.RadiusTypeChoice.CRRT?entity.enums.RadiusTypeChoice.ZIP5:entity.enums.RadiusTypeChoice.CRRT;if(framework.common.IsWMSEnable){var f=jQuery("#geo_radius_map");var j=Mapifies.MapObjects.Get(f);var i=j.getZoom();if(uc.geo.radius._NeedAddLayer&&!uc.geo.radius._initAddLayer){uc.geo.radius._initAddLayer=true}uc.geo.radius._NeedAddLayer=true;if(uc.geo.radius._NeedAddLayer&&uc.geo.radius.isCallAndLoadMap==false){if(uc.geo.radius._initAddLayer){var g=jQuery("#zip_map_address").val();if(framework.common.IsNumber(g,5)){uc.geo.radius.isCallAndLoadMap=true;framework.common.Ajax({url:"PlaceOrder.aspx/GetZip",data:{zip:g},success:function(m){if(m.ResultFlag){var n=m.DataSource.Latitude;var o=m.DataSource.Longitude;jQuery("#geo_radius_addr_lat").val(n);jQuery("#geo_radius_add_lng").val(o);var l=jQuery("#zip_map_radius").val();if(page.placeorder.EnableZipCodeOrCarrierRouteRadius){if(l!=undefined&&l!=""&&l!=null){uc.geo.radius.showRadiusElements(o,n,l,true)}}else{uc.geo.radius.ZipMapSelected({x:o,y:n})}}uc.geo.radius.isCallAndLoadMap=false},error:function(l){uc.geo.SetErrorMessage(true,valid.message);uc.geo.radius.isCallAndLoadMap=false}})}uc.geo.radius.AddLayer(h,false)}}}});framework.ui.showWaiting("ct_geo_radius",false);if(b.GeoType==entity.enums.GeoType.ZipMap&&page.placeorder.AddressByCurrentUser!=""){uc.geo.radius.SearchAddressWithAddress(page.placeorder.AddressByCurrentUser,"",uc.geo.radius.showRadiusElements,uc.geo.radius.USMapLoad,true);var d=page.placeorder.order.RadiusTypeChoice!=entity.enums.RadiusTypeChoice.CRRT?entity.enums.RadiusTypeChoice.ZIP5:entity.enums.RadiusTypeChoice.CRRT;uc.geo.radius.AddLayer(d,false)}else{}});framework.common.InitAutocomplete(jQuery("#geo_radius_address")[0],uc.geo.radius.SearchAddress);framework.common.InitAutocomplete(jQuery("#geo_radius_closex_address")[0],uc.geo.radius.SearchClosexAddress);framework.common.InitAutocomplete(jQuery("#geo_polygon_address")[0],uc.geo.radius.SearchPolygonAddress);framework.common.InitAutocomplete(jQuery("#multi_radius")[0],uc.geo.radius.SearchAcxiomAddress);framework.common.InitAutocomplete(jQuery("#geo_multiclosex_address")[0],uc.geo.radius.SearchMultiClosexAddress);framework.common.InitAutocomplete(jQuery("#zip_map_address")[0],uc.geo.radius.SearchZipMapAddress)});jQuery("#geo_radius_value").numeric();jQuery("#geo_radius_zip_value").numeric();jQuery("#geo_multiradius_value").numeric();jQuery("#geo_radius_closex_qty").setMask("99999");jQuery("#geo_multiclosex_qty").setMask("99999");uc.geo.radius._IsInit=true}else{jQuery("#geo_radius_map").jmap("init",{mapCenter:page.placeorder.MapCenter,mapZoom:a,mapEnableScrollZoom:true,mapEnableScaleControl:true},function(){if(!page.global.isMyAcxiomPartnerUSite){uc.geo.radius.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.radius.LoadFromOrder()}}var c=jQuery("#geo_radius_map");var d=Mapifies.MapObjects.Get(c);uc.geo.overlay=new google.maps.OverlayView();uc.geo.overlay.draw=function(){};uc.geo.overlay.setMap(d);if(uc.geo.overlay.getProjection()==undefined){uc.geo.overlay=new google.maps.OverlayView();uc.geo.overlay.draw=function(){};uc.geo.overlay.setMap(d)}google.maps.event.addListener(d,"idle",function(){})})}if(jQuery("#geo_radius_closex_qty").val().trim()!=""){if(jQuery("#geo_radius_closex_qty").val().indexOf(".")>0||jQuery("#geo_radius_closex_address").val().trim()==""){jQuery("#geo_radius_closex_qty").attr("value","")}}if(jQuery("#geo_radius_address").val().trim()==""){jQuery("#geo_radius_value").attr("value","")}if(jQuery("#geo_radius_zip").val().trim()==""){jQuery("#geo_radius_zip_value").attr("value","")}},CheckCloseXQuantity:function(a){uc.geo.SetErrorMessage(false,"");uc.geo.SetErrorMessageForMulti(false,"");var b=jQuery(a);if(String.IsNullOrEmpty(b.val())){uc.geo.SetErrorMessage(true,"Quantity is required!");return}var c=Number(b.val());if(c>25000){b.val(25000)}if(c<=0){uc.geo.SetErrorMessage(true,"Quantity must be greater than 0!");return}},unique:function(g){var h=[],e={},b,c,a="__object__",k=[],d,f;var j={number:function(i){return"__number__"+i},string:function(i){return"__string__"+i},"boolean":function(i){return"__boolean__"+i},"undefined":function(i){return"__undefined__"},object:function(i){return i===null?"__null__":a in i?i[a]:(i[a]=a+k.push(i))}};for(d=0,f=g.length;d<f;d++){b=g[d];c=j[typeof b](b);if(!(c in e)){h.push(b);e[c]=true}}for(d=0,f=k.length;d<f;delete k[d++][a]){}return h},AddLayer:function(c,e){var a=jQuery("#geo_radius_map");var f=Mapifies.MapObjects.Get(a);var d=f.getZoom();if(d<12){return}uc.geo.radius._initAddLayer=false;if(e){uc.geo.radius.ClearMapZips()}uc.geo.radius.ShowSelectedZips(uc.geo.radius.MapZips);var b=c==entity.enums.RadiusTypeChoice.CRRT?"CR":"ZIP";framework.common.addLayer(b,b,1,Mapifies.MapObjects.Get(jQuery("#geo_radius_map")));page.placeorder.order.RadiusTypeChoice=c},ClearMapZips:function(){var a=Mapifies.MapObjects.Get(jQuery("#geo_radius_map"));jQuery.each(uc.geo.radius.MapZips,function(b,c){uc.geo.radius.RemoveGeoElement(c,a)});uc.geo.radius.MapZips=[]},CheckRadius:function(b){uc.geo.SetErrorMessage(false,"");if(String.IsNullOrEmpty(jQuery(b).val())){uc.geo.SetErrorMessage(true,"Radius is required!");return}var a=Number(jQuery(b).val());if(a>200){jQuery(b).val(200)}if(a<=0){uc.geo.SetErrorMessage(true,"Radius must be greater than 0!");return}var c=page.placeorder.order;switch(c.GeoType){case entity.enums.GeoType.Radius:uc.geo.radius.SearchAddress();break;case entity.enums.GeoType.ZipRadius:uc.geo.radius.SearchZipAddress();break;case entity.enums.GeoType.MultiRadius:uc.geo.radius.SearchMultiAddress();break;case entity.enums.GeoType.AcxiomMultiRadius:uc.geo.radius.SearchAcxiomAddress();break;case entity.enums.GeoType.ZipMap:uc.geo.radius.SearchZipMapAddress();break}},SetRadiusDescription:function(){var a=framework.ui.GetRadiusUnitDesc(page.placeorder.RadiusUnit);var b=String.format('You may change the radius by entering the number of "{0}" (maximum 50 {0}) and re-clicking "Search". When you are ready to proceed, please click "Next".',a)},LoadFromOrder:function(){var c=page.placeorder.order;var a="";var l=null;var m=null;var j="";var d="";var n="";var f=c.RadiusTypeChoice;uc.geo.radius.RadiusAddresses=[];if(c.OrderAddresses!=null&&c.OrderAddresses.length>0){for(var e=0;e<c.OrderAddresses.length;e++){if(c.OrderAddresses[e].AddrUsageType==2){a=c.OrderAddresses[e].AddressLine;l=c.OrderAddresses[e].Latitude;m=c.OrderAddresses[e].Longitude;n=c.OrderAddresses[e].AddrSearchString;j=c.OrderAddresses[e].Radius;d=c.OrderAddresses[e].Quantity;uc.geo.radius.RadiusAddresses.push(c.OrderAddresses[e])}}}if(f==entity.enums.RadiusTypeChoice.UNKNOWN){f=entity.enums.RadiusTypeChoice.AUTO}switch(c.GeoType){case entity.enums.GeoType.Radius:jQuery("#geo_radius_address").val(a);jQuery("#geo_radius_value").val(j);jQuery("#radiusTypeByRadius").val(f);break;case entity.enums.GeoType.ZipRadius:jQuery("#geo_radius_zip").val(a);jQuery("#geo_radius_zip_value").val(j);jQuery("#radiusTypeByRadiusZip").val(f);break;case entity.enums.GeoType.Closex:jQuery("#geo_radius_closex_address").val(a);jQuery("#geo_radius_closex_qty").val(d);break;case entity.enums.GeoType.Polygon:jQuery("#geo_polygon_address").val(a);jQuery("#radiusTypeByPolygon").val(f);$("#ma_explain_video_line").css("display","block");$("#sl360_explain_video_setp_2").css("display","block");break;case entity.enums.GeoType.MultiRadius:jQuery("#geo_multiradius_address").val(a);jQuery("#geo_multiradius_value").val(j);jQuery("#RadiusTypeByMultiRadius").val(f);break;case entity.enums.GeoType.MultiClosex:jQuery("#geo_multiclosex_address").val(a);jQuery("#geo_multiclosex_qty").val(d);break}if(c.GeoType!=entity.enums.GeoType.ZipMap){if(l!=null&&m!=null){uc.geo.radius.SearchMapByLatLngAndAddress(l,m,a,true)}if(uc.geo.radius.RadiusAddresses.length>0){uc.geo.radius.CurrentAddress=uc.geo.radius.RadiusAddresses[uc.geo.radius.RadiusAddresses.length-1];var b=jQuery("#geo_radius_map");b.jmap("ClearMap");if(uc.geo.radius.CurrentAddress!=null){b.jmap("MoveTo",{mapCenter:[uc.geo.radius.CurrentAddress.Latitude,uc.geo.radius.CurrentAddress.Longitude]})}framework.ui.ShowMarkers(uc.geo.radius.RadiusAddresses,b)}uc.geo.radius.ShowTargetAddresses(uc.geo.radius.RadiusAddresses)}else{var h=page.placeorder.order.RadiusTypeChoice!=entity.enums.RadiusTypeChoice.CRRT?entity.enums.RadiusTypeChoice.ZIP5:entity.enums.RadiusTypeChoice.CRRT;if(framework.common.IsWMSEnable&&c.GeoType==entity.enums.GeoType.ZipMap){jQuery("input[name=geo_zip_map_type][value="+h+"]").attr("checked",true);google.maps.event.addListener(Mapifies.MapObjects.Get(jQuery("#geo_radius_map")),"mousemove",uc.geo.radius.ZipMapMouseMoveHandler);google.maps.event.addListener(Mapifies.MapObjects.Get(jQuery("#geo_radius_map")),"mouseout",uc.geo.radius.RemoveHighlightGeoElement);google.maps.event.addListener(Mapifies.MapObjects.Get(jQuery("#geo_radius_map")),"click",uc.geo.radius.ZipMapClickHandler)}if(c.OrderGeos!=null){var g=[];jQuery.each(c.OrderGeos,function(o,p){g.push(p.GeoKeyDesc)});uc.geo.radius.MapZips=[];var k=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"crid":"zip";framework.common.ShowGeoElements(k,g,uc.geo.radius.Overlays,uc.geo.radius.MapZips,Mapifies.MapObjects.Get(jQuery("#geo_radius_map")),uc.geo.radius.AddGeoElement)}}},DoSearch:function(){var a=page.placeorder.order;switch(a.GeoType){case entity.enums.GeoType.Radius:uc.geo.radius.SearchAddress();break;case entity.enums.GeoType.ZipRadius:uc.geo.radius.SearchZipAddress();break;case entity.enums.GeoType.Closex:uc.geo.radius.SearchClosexAddress();break;case entity.enums.GeoType.Polygon:uc.geo.radius.SearchPolygonAddress();break}},SearchAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_radius_address").val();var a=jQuery("#geo_radius_value").val();return uc.geo.radius.SearchAddressWithAddress(b,a)},ShowUploadMultiAddress:function(){uc.geo.radius.ResetUploadFile();framework.ui.ShowDialog("UploadFileForMultiRadius")},currentFile:"",BindUploadFile:function(){$("#ct_geo_UploadFail").html("");$("#ct_geo_UploadFail").hide();$("#ct_geo_btn").hide();uc.geo.radius.currentFile="";var b=$("#ct_geo_btnSelect"),a;var c=new AjaxUpload(b,{action:"Common/ExcelUploader.ashx",autoSubmit:false,name:"myfile",responseType:"json",onChange:function(e,f){uc.geo.SetErrorMessage(false,"");$("#ct_geo_UploadFail").html("");$("#ct_geo_UploadFail").hide();$("#ct_geo_btn").hide();if(!(f&&/^(xls|xlsx)$/.test(f))){$("#ct_geo_UploadFail").html("We just accept Microsoft Excel (97 or newer).");$("#ct_geo_UploadFail").show();return false}var d=document.getElementById("ct_geo_filename");if(d){d.value=e}},onSubmit:function(d,e){uc.geo.SetErrorMessage(false,"");$("#ct_geo_UploadFail").html("");$("#ct_geo_UploadFail").hide();$("#ct_geo_btn").hide();if(!(e&&/^(xls|xlsx)$/.test(e))){$("#ct_geo_UploadFail").html("We just accept Microsoft Excel (97 or newer).");$("#ct_geo_UploadFail").show();return false}framework.ui.showWaiting("UploadFileForMultiRadius",true);this.disable()},onComplete:function(e,d){window.clearInterval(a);this.enable();if(d.ResultFlag){uc.geo.radius.currentFile=d.DataSource;uc.geo.radius.GetRecord(d.DataSource);uc.geo.radius.MultiRadiusFileName=d.DataSource}else{$("#ct_geo_UploadFail").html(d.ResultMessage);$("#ct_geo_UploadFail").show()}framework.ui.showWaiting("UploadFileForMultiRadius",false)}});return c},headStr:null,sRecord:null,cols:null,GetRecord:function(a){uc.geo.SetErrorMessage(false,"");$("#ct_geo_UploadFail").html("");$("#ct_geo_UploadFail").hide();$("#ct_geo_btn").hide();var b=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/GetRecord",data:{filePath:a.TargetFile,type:2},success:function(c){if(c.ResultFlag){if(c.ResultMessage!=null){$("#ct_geo_UploadFail").html(c.ResultMessage);$("#ct_geo_UploadFail").show()}else{if(c.DataSource!=null){uc.geo.radius.headStr=c.DataSource.HeadRow;uc.geo.radius.sRecord=c.DataSource.SuccessRow;uc.geo.radius.cols=c.DataSource.UpLoadListColumn;$("#ct_geo_SelectFile").hide();$("#ct_geo_filetable").setTemplateElement("ct_geo_listfilestable");$("#ct_geo_filetable").processTemplate(c.DataSource);$("#ct_geo_TipForSuccessfully").setTemplateElement("ct_geo_TipOfSuccessfully");$("#ct_geo_TipForSuccessfully").processTemplate(c.DataSource);$("#ct_geo_RecordDetails").show();$("#ct_geo_btn").show()}}}else{$("#ct_geo_UploadFail").html("").html(c.ResultMessage);$("#ct_geo_UploadFail").show()}},error:function(c){$("#ct_geo_UploadFail").html("Error occurred when getting file info, please try it later.");$("#ct_geo_UploadFail").show()}});framework.ui.showWaiting("ct_geo_SelectFile",false)},BackToUploadFile:function(){uc.geo.radius.ResetUploadFile()},NextToUploadFile:function(){var a=page.placeorder.order;if(uc.geo.radius.currentFile&&uc.geo.radius.currentFile!=""){framework.common.Ajax({url:"PlaceOrder.aspx/GetAddressByFile2",data:{FilePath:uc.geo.radius.MultiRadiusFileName.TargetFile},success:function(b){var g=b.DataSource.GeoItems;if(b.ResultFlag){if(g.length>0){var d=[];for(var c=0;c<g.length;c++){var f=new entity.OrderAddress();f.AddrUsageType=2;f.AddressName=String.IsNullOrEmpty(g[c].KeyCode)?g[c].AddressLine:g[c].KeyCode;f.Latitude=g[c].Latitude;f.Longitude=g[c].Longitude;f.AddressLine=g[c].AddressLine;f.Radius=g[c].Distance;d.push(f)}uc.geo.radius.AddMultiTargetAddress(d)}var e=String.format("Total records: {0}, {1} records been found on map.",b.DataSource.TotalCount,b.DataSource.GeoItems.length);uc.geo.SetErrorMessage(true,e);framework.ui.CloseDialog()}else{uc.geo.SetErrorMessage(true,"Error occurred when getting GEO info, please try it later.1")}},error:function(b){uc.geo.SetErrorMessage(true,"Error occurred when getting GEO info, please try it later.2")}})}},ResetUploadFile:function(){$("#ct_geo_filename").attr("value","");$("#ct_geo_RecordDetails").hide();$("#ct_geo_btn").hide();uc.geo.SetErrorMessage(false,"");$("#ct_geo_SelectFile").show()},SearchAcxiomAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#multi_radius").val();var a=jQuery("#multi_radius_value").val();return uc.geo.radius.SearchAddressWithAddress(b,a)},SearchZipMapAddress:function(){uc.geo.SetErrorMessage(false,"");uc.geo.radius.isCallAndLoadMap=true;var e=Mapifies.MapObjects.Get(jQuery("#geo_radius_map"));if(uc.geo.radius.Overlays){jQuery("#geo_radius_map").jmap("ClearMap");uc.geo.radius.ClearMapZips()}_.each(uc.geo.radius.Overlays,function(g,f){uc.geo.radius.RemoveGeoElement(f,e)});var b=jQuery("#zip_map_address").val();var a=jQuery("#zip_map_radius").val();var c={center:new google.maps.LatLng(0,0),strokeWeight:2,strokeOpacity:1,fillOpacity:0.25,map:e,radius:100,clickable:false};var d=new google.maps.Circle(c);d.setMap(null);if(framework.common.IsNumber(b,5)){return uc.geo.radius.SearchZipAddressWithZip(b,a,uc.geo.radius.showRadiusElements)}else{return uc.geo.radius.SearchAddressWithAddress(b,a,uc.geo.radius.showRadiusElements,uc.geo.radius.USMapLoad)}},SearchMultiAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_multiradius_address").val();var a=jQuery("#geo_multiradius_value").val();return uc.geo.radius.SearchAddressWithAddress(b,a)},SearchAddressWithAddress:function(c,b,f,d,e){var a=jQuery("#geo_radius_map");jQuery("#geo_radius_addr_lat").val("");jQuery("#geo_radius_add_lng").val("");if(String.IsNullOrEmpty(c)){a.jmap("ClearMap");return}a.jmap("SearchAddress",{query:c,returnType:"getLocations"},function(s,r){var g=Mapifies.SearchCode(r);if(g.success){var n=new Array();var l=s;var m=0;for(var j=0;j<l.length;j++){if(uc.geo.radius.IsValidAddress(l[j].types[0])){n[m++]=l[j]}}var p;if(n.length>0){p=n[0]}else{p=s[0]}if(typeof d=="function"){}jQuery("#geo_radius_addr_lat").val(p.geometry.location.lat());jQuery("#geo_radius_add_lng").val(p.geometry.location.lng());var q=Mapifies.MapObjects.Get(a);var k=null;if(String.IsNullOrEmpty(b)){k=15}a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[p.geometry.location.lat(),p.geometry.location.lng()],mapZoom:k});if(!String.IsNullOrEmpty(b)){a.jmap("AddRoundCircleOverlay",{mapCenter:[p.geometry.location.lat(),p.geometry.location.lng()],radius:b})}a.jmap("AddMarker",{pointLatLng:[p.geometry.location.lat(),p.geometry.location.lng()],pointIcon:"themes/default/assets/images/gmap/mm_20_blue.png",pointTitle:p.formatted_address});var o=new entity.OrderAddress();o.AddrUsageType=2;o.AddressName=c;o.Latitude=p.geometry.location.lat();o.Longitude=p.geometry.location.lng();o.AddressLine=c;o.Radius=b;uc.geo.radius.CurrentAddress=o;var h=uc.geo.radius.RadiusAddresses.concat(new Array(o));framework.ui.ShowMarkers(h,a);uc.geo.radius.ShowMoreAddresses(n);uc.geo.radius.WarnIfAddressAccuracyIsMatched(p.formatted_address,p.types[0])}else{uc.geo.SetErrorMessage(true,"Sorry, we are unable to geocode that address!");a.jmap("ClearMap")}});return false},ShowTargetAddresses:function(e){if(e==null||e.length==0){jQuery("#targetRadiusAddressesDiv").addClass("hidden");jQuery("#targetRadiusAddresses").html("");return}jQuery("#targetRadiusAddressesDiv").removeClass("hidden");var c="";var d=framework.ui.GetRadiusUnitDesc(page.placeorder.RadiusUnit);var b='<div><span><a href="javascript:void(0);" address="{0}" onclick="javascript:uc.geo.radius.NailPoint(this);" title="Move to the target area.">Address: {0}, Radius: {1} {2}</a></span> <a href="javascript:void(0);" targetAddress="{0}" onclick="javascript:uc.geo.radius.RemoveTargetAddress(this);" title="Remove the target area." ><img src="images/delete_icon.jpg" alt="delete" style="vertical-align:middle;"></a></div>';if(page.placeorder.order.GeoType==entity.enums.GeoType.Closex||page.placeorder.order.GeoType==entity.enums.GeoType.MultiClosex){b='<div><span><a href="javascript:void(0);" address="{0}" onclick="javascript:uc.geo.radius.NailPoint(this);" title="Move to the target area.">Address: {0}, Quantity: {1} </a></span> <a href="javascript:void(0);" targetAddress="{0}" onclick="javascript:uc.geo.radius.RemoveTargetAddress(this);" title="Remove the target area." ><img src="images/delete_icon.jpg" alt="delete"></a></div>';for(var a=0;a<e.length;a++){c=c+String.format(b,e[a].AddressLine,e[a].Quantity)}}else{for(var a=0;a<e.length;a++){c=c+String.format(b,e[a].AddressLine,e[a].Radius,d)}}jQuery("#targetRadiusAddresses").html(String.format("<div>{0}</div>",c))},AddRadiusTargetAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_radius_address").val();var a=jQuery("#geo_radius_value").val();uc.geo.radius.AddTargetAddress(b,a,"Please enter an address!")},AddAcxiomRadiusTargetAddress:function(){uc.geo.SetErrorMessage(false,"");var c=jQuery("#multi_radius").val();var a=jQuery("#multi_radius_value").val();var b=jQuery("#multi_radius_name").val();if(String.IsNullOrEmpty(b)){uc.geo.SetErrorMessage(true,"Address name is required!");return}uc.geo.radius.AddTargetAddress(c,a,"Please enter an address!",b);jQuery("#multi_radius_name").val("")},AddMultiRadiusTargetAddress:function(){uc.geo.SetErrorMessage(false,"");var c=jQuery("#geo_multiradius_address").val();var a=jQuery("#geo_multiradius_value").val();var b=jQuery("#ct_geo_multiradius_name").val();if(String.IsNullOrEmpty(b)){uc.geo.SetErrorMessage(true,"Address name is required!");return}uc.geo.radius.AddTargetAddress(c,a,"Please enter an address!",b)},AddZipRadiusTargetAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_radius_zip").val();var a=jQuery("#geo_radius_zip_value").val();uc.geo.radius.AddTargetAddress(b,a,"Please enter a valid ZIP code!")},AddClosetTargetAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_radius_closex_address").val();var c=jQuery("#geo_radius_closex_qty").val();var a=jQuery("#multi_closex_name").val();uc.geo.radius.AddClosetTargetAddressWithAdress(b,c,a);jQuery("#multi_closex_name").val("")},AddMultiClosetTargetAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_multiclosex_address").val();var c=jQuery("#geo_multiclosex_qty").val();var a=jQuery("#ct_geo_multiclosex_name").val();if(String.IsNullOrEmpty(a)){uc.geo.SetErrorMessage(true,"Address name is required!");return}uc.geo.radius.AddClosetTargetAddressWithAdress(b,c,a)},AddClosetTargetAddressWithAdress:function(b,e,a){var d=jQuery("#geo_radius_addr_lat").val();var c=jQuery("#geo_radius_add_lng").val();if(String.IsNullOrEmpty(b)){uc.geo.SetErrorMessage(true,errorMsgForAddress);return}if(String.IsNullOrEmpty(e)){uc.geo.SetErrorMessage(true,"Quantity is required!");return}var g=Number(e);if(g<=0){uc.geo.SetErrorMessage(true,"Quantity must be greater than 0!");return}if(String.IsNullOrEmpty(d)||String.IsNullOrEmpty(c)){uc.geo.SetErrorMessage(true,"Sorry, we are unable to geocode that address!");return}if(String.IsNullOrEmpty(a)){a=b}var f=new entity.OrderAddress();f.AddrUsageType=2;f.AddressName=a;f.Latitude=d;f.Longitude=c;f.AddressLine=b;f.Radius=0;f.Quantity=e;uc.geo.radius.AddATargetAddress(f)},AddTargetAddress:function(d,b,a,c){var f=jQuery("#geo_radius_addr_lat").val();var e=jQuery("#geo_radius_add_lng").val();if(String.IsNullOrEmpty(d)){uc.geo.SetErrorMessage(true,a);return}if(String.IsNullOrEmpty(b)){uc.geo.SetErrorMessage(true,"Radius is required!");return}var h=Number(b);if(h<=0){uc.geo.SetErrorMessage(true,"Radius must be greater than 0!");return}if(String.IsNullOrEmpty(f)||String.IsNullOrEmpty(e)){uc.geo.SetErrorMessage(true,"Sorry, we are unable to geocode that address!");return}var g=new entity.OrderAddress();g.AddrUsageType=2;g.AddressName=String.IsNullOrEmpty(c)?d:c;g.Latitude=f;g.Longitude=e;g.AddressLine=d;g.Radius=b;uc.geo.radius.AddATargetAddress(g)},AddATargetAddress:function(d){var c=false;for(var b=0;b<uc.geo.radius.RadiusAddresses.length;b++){if(uc.geo.radius.RadiusAddresses[b].AddressName==d.AddressName||uc.geo.radius.RadiusAddresses[b].AddressLine==d.AddressLine){c=true;uc.geo.radius.RadiusAddresses[b]=d;break}}if(!c){uc.geo.radius.RadiusAddresses.push(d)}uc.geo.radius.CurrentAddress=d;var a=jQuery("#geo_radius_map");a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[d.Latitude,d.Longitude]});framework.ui.ShowMarkers(uc.geo.radius.RadiusAddresses,a);uc.geo.radius.ShowTargetAddresses(uc.geo.radius.RadiusAddresses)},AddMultiTargetAddress:function(b){_.each(b,function(c,f){var e=false;for(var d=0;d<uc.geo.radius.RadiusAddresses.length;d++){if(uc.geo.radius.RadiusAddresses[d].AddressName==c.AddressName||uc.geo.radius.RadiusAddresses[d].AddressLine==c.AddressLine){e=true;uc.geo.radius.RadiusAddresses[d]=c;break}}if(!e){uc.geo.radius.RadiusAddresses.push(c)}});uc.geo.radius.CurrentAddress=b[0];var a=jQuery("#geo_radius_map");a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[uc.geo.radius.CurrentAddress.Latitude,uc.geo.radius.CurrentAddress.Longitude]});framework.ui.ShowMarkers(uc.geo.radius.RadiusAddresses,a);uc.geo.radius.ShowTargetAddresses(uc.geo.radius.RadiusAddresses)},RemoveTargetAddress:function(c){var e=$(c);var b=e.attr("targetAddress");if(String.IsNullOrEmpty(b)){return}if(uc.geo.radius.RadiusAddresses==null||uc.geo.radius.RadiusAddresses.length==0){return}var d=$.grep(uc.geo.radius.RadiusAddresses,function(g,f){if(g.AddressLine==b){return false}else{return true}});uc.geo.radius.RadiusAddresses=d;if(uc.geo.radius.CurrentAddress!=null&&uc.geo.radius.CurrentAddress.AddressLine==b&&d.length>0){uc.geo.radius.CurrentAddress=uc.geo.radius.RadiusAddresses[uc.geo.radius.RadiusAddresses.length-1]}var a=jQuery("#geo_radius_map");a.jmap("ClearMap");if(uc.geo.radius.CurrentAddress!=null){a.jmap("MoveTo",{mapCenter:[uc.geo.radius.CurrentAddress.Latitude,uc.geo.radius.CurrentAddress.Longitude]})}framework.ui.ShowMarkers(uc.geo.radius.RadiusAddresses,a);uc.geo.radius.ShowTargetAddresses(uc.geo.radius.RadiusAddresses)},ZipMapMouseMoveHandler:function(b,a){var e=Mapifies.MapObjects.Get(jQuery("#geo_radius_map"));var c=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"cr":"zipxy";var d=page.global.MapGetDataUrl+String.format("type={0}&x={1}&y={2}&callback=?",c,b.latLng.lng(),b.latLng.lat());$.get(d,function(f){if(f!=undefined){var g=f.id;if(uc.geo.radius.HighlightOverlays!=null&&_.has(uc.geo.radius.HighlightOverlays,g)){}else{uc.geo.radius.RemoveHighlightGeoElement(e);uc.geo.radius.AddHighlightGeoElement(g,f.data,e)}}},"json")},ZipMapClickHandler:function(b,a){if(uc.geo.radius.HighlightOverlays!=null){var c=Mapifies.MapObjects.Get(jQuery("#geo_radius_map"));_.each(uc.geo.radius.HighlightOverlays,function(e,g){var d=g;var f=uc.geo.radius.HighlightData[g];if(_.has(uc.geo.radius.Overlays,d)){uc.geo.radius.RemoveGeoElement(d,c)}else{uc.geo.radius.AddGeoElement(d,f,c)}})}},ZipMapSelected:function(a){var d=Mapifies.MapObjects.Get(jQuery("#geo_radius_map"));var b=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"cr":"zipxy";var c=page.global.MapGetDataUrl+String.format("type={0}&x={1}&y={2}&callback=?",b,a.x,a.y);$.get(c,function(e){var f=e.id;if(_.has(uc.geo.radius.Overlays,f)){}else{uc.geo.radius.AddGeoElement(f,e.data,d)}},"json")},USMapLoad:function(){jQuery("#geo_radius_map").jmap("init",{mapCenter:page.placeorder.MapCenter,mapZoom:4,mapEnableScrollZoom:true,mapEnableScaleControl:true},function(){uc.geo.radius.LoadFromOrder()})},showRadiusElements:function(b,g,a,e){var f=Mapifies.MapObjects.Get(jQuery("#geo_radius_map"));var c=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"radius_cr":"radius_zip";var d=page.global.MapGetDataUrl+String.format("type={0}&x={1}&y={2}&r={3}&callback=?",c,b,g,a);$.get(d,function(h){if(!_.isArray(h)){if(_.has(uc.geo.radius.Overlays,id)){}else{uc.geo.radius.AddGeoElement(h.id,h.data,f)}}else{_.each(h,function(i){var j=i.id;if(_.has(uc.geo.radius.Overlays,j)){}else{uc.geo.radius.AddGeoElement(j,i.data,f)}})}if(e){}else{framework.common.ZoomMapToElements(uc.geo.radius.Overlays,f)}},"json")},RemoveHighlightGeoElement:function(){if(uc.geo.radius.HighlightOverlays!=null){_.each(uc.geo.radius.HighlightOverlays,function(a,b){_.each(uc.geo.radius.HighlightOverlays[b],function(c){c.setMap(null)});delete uc.geo.radius.HighlightOverlays[b];delete uc.geo.radius.HighlightData[b]})}},AddHighlightGeoElement:function(e,b,c){if(page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.ZIP5&&!(framework.common.IsNumber(e,5))){return}var d=new uc.geo.radius.Path();d.values=[];d.id=e;var a=new Array();_.each(b,function(h){var g=new Array();_.each(h,function(l){g.push({points:l.encodedPoints,levels:l.encodedLevels,opacity:0.8,weight:2,numLevels:18,zoomFactor:2});d.values.push(l.encodedPoints)});var i={center:new google.maps.LatLng(0,0),strokeWeight:2,strokeOpacity:1,fillOpacity:0.25,map:c,radius:100,clickable:false};var k=new google.maps.Circle(i);k.setMap(null);var f={strokeColor:"#B07D1E",strokeWeight:2,strokeOpacity:1,fillColor:"#B07D1E",fillOpacity:0.4,map:c,paths:google.maps.geometry.encoding.decodePath(g[0].points),clickable:false,editable:false};var j=new google.maps.Polygon(f);a.push(j)});if(uc.geo.radius.HighlightOverlays==null){uc.geo.radius.HighlightOverlays=new Object();uc.geo.radius.HighlightData=new Object()}uc.geo.radius.HighlightOverlays[e]=a;uc.geo.radius.HighlightData[e]=b},AddGeoElement:function(e,b,c){if(page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.ZIP5&&!(framework.common.IsNumber(e,5))){return}var d=new uc.geo.radius.Path();d.values=[];d.id=e;var a=new Array();_.each(b,function(h){var g=new Array();_.each(h,function(l){g.push({points:l.encodedPoints,levels:l.encodedLevels,opacity:0.8,weight:2,numLevels:18,zoomFactor:2});d.values.push(l.encodedPoints)});var i={center:new google.maps.LatLng(0,0),strokeWeight:2,strokeOpacity:1,fillOpacity:0.25,map:c,radius:100,clickable:false};var k=new google.maps.Circle(i);k.setMap(null);var f={strokeColor:"#0000ff",strokeWeight:2,strokeOpacity:1,fillColor:"#0000ff",fillOpacity:0.4,map:c,paths:google.maps.geometry.encoding.decodePath(g[0].points),clickable:false,editable:false};var j=new google.maps.Polygon(f);a.push(j)});uc.geo.radius.Overlays[e]=a;if(!String.IsNullOrEmpty(e)){uc.geo.radius.MapZips.push(e);uc.geo.radius.ShowSelectedZips(uc.geo.radius.MapZips)}uc.geo.radius.MapPaths.push(d)},RemoveGeoElement:function(b,a){_.each(uc.geo.radius.Overlays[b],function(c){c.setMap(null)});delete uc.geo.radius.Overlays[b];uc.geo.radius.MapZips=jQuery.grep(uc.geo.radius.MapZips,function(c){return c!=b});uc.geo.radius.ShowSelectedZips(uc.geo.radius.MapZips);uc.geo.radius.MapPaths=jQuery.grep(uc.geo.radius.MapPaths,function(d,c){return d.id!=b})},ShowSelectedZips:function(d){jQuery("#geo_zip_map_result").html("");if(d==null||d.length==0){jQuery("#geo_zip_map_result").addClass("hidden");return}jQuery("#geo_zip_map_result").removeClass("hidden");var c="";var a="<div><span>{0}</span></div>";for(var b=0;b<d.length;b++){c=c+String.format(a,d[b])}jQuery("#geo_zip_map_result").html(String.format("<div>{0}</div>",c))},NailPoint:function(f){var d=jQuery(f).attr("address");if(String.IsNullOrEmpty(d)){return}var c=null;var b=null;for(var e in uc.geo.radius.RadiusAddresses){b=uc.geo.radius.RadiusAddresses[e];if(b.AddressLine==d){c=b;break}}if(c!=null){var a=jQuery("#geo_radius_map");a.jmap("MoveTo",{mapCenter:[c.Latitude,c.Longitude]})}},IsValidAddress:function(a){if(a<8){return false}return true},WarnIfAddressAccuracyIsMatched:function(a,c){if(String.IsNullOrEmpty(a)||uc.geo.radius.IsValidAddress(c)){return}var b=String.format("Please note: The address entered was not found and the nearest matched address ({0}) will be used for this search.",a);uc.geo.SetErrorMessage(true,b)},WarnIfZipIsMatched:function(a){if(String.IsNullOrEmpty(a)){return}var b=String.format("Please note: The address/zip ({0}) code could not be found, please check and confirm the address/zip code.",a);uc.geo.SetErrorMessage(true,b)},SearchMultiClosexAddress:function(){uc.geo.SetErrorMessage(false,null);var a=jQuery("#geo_multiclosex_address").val();return uc.geo.radius.SearchAddressWithAddress(a,null)},SearchClosexAddress:function(){uc.geo.SetErrorMessage(false,null);var a=jQuery("#geo_radius_closex_address").val();return uc.geo.radius.SearchAddressWithAddress(a,null);return false},SearchZipAddress:function(){uc.geo.SetErrorMessage(false,"");var c=jQuery("#geo_radius_zip").val();var b=jQuery("#geo_radius_zip_value").val();var a=jQuery("#geo_radius_map");jQuery("#geo_radius_addr_lat").val("");jQuery("#geo_radius_add_lng").val("");if(String.IsNullOrEmpty(c)){a.jmap("ClearMap");return}uc.geo.radius.isCallAndLoadMap=true;framework.common.Ajax({url:"PlaceOrder.aspx/GetZip",data:{zip:c},success:function(d){if(d.ResultFlag){var e=d.DataSource.Latitude;var h=d.DataSource.Longitude;jQuery("#geo_radius_addr_lat").val(e);jQuery("#geo_radius_add_lng").val(h);var g=Mapifies.MapObjects.Get(a);var f=null;if(String.IsNullOrEmpty(b)){f=14}a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[e,h],mapZoom:f});if(!String.IsNullOrEmpty(b)){a.jmap("AddRoundCircleOverlay",{mapCenter:[e,h],radius:b})}a.jmap("AddMarker",{pointLatLng:[e,h],pointTitle:c})}else{uc.geo.SetErrorMessage(true,"This ZIP Code is not exist! Please input again.");a.jmap("ClearMap")}uc.geo.radius.isCallAndLoadMap=false},error:function(d){uc.geo.SetErrorMessage(true,valid.message);uc.geo.radius.isCallAndLoadMap=false}});return false},SearchZipAddressWithZip:function(c,b,d){uc.geo.SetErrorMessage(false,"");var a=jQuery("#geo_radius_map");jQuery("#geo_radius_addr_lat").val("");jQuery("#geo_radius_add_lng").val("");if(String.IsNullOrEmpty(c)){a.jmap("ClearMap");return}framework.common.Ajax({url:"PlaceOrder.aspx/GetZip",data:{zip:c},success:function(e){if(e.ResultFlag){var f=e.DataSource.Latitude;var j=e.DataSource.Longitude;jQuery("#geo_radius_addr_lat").val(f);jQuery("#geo_radius_add_lng").val(j);var i=Mapifies.MapObjects.Get(a);var h=14;a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[f,j],mapZoom:h});if(!String.IsNullOrEmpty(b)){a.jmap("AddRoundCircleOverlay",{mapCenter:[f,j],radius:b})}a.jmap("AddMarker",{pointLatLng:[f,j],pointTitle:c});if(typeof d=="function"){if(page.placeorder.EnableZipCodeOrCarrierRouteRadius){if(b!=undefined&&b!=""&&b!=null){d(j,f,b)}}else{uc.geo.radius.ZipMapSelected({x:j,y:f})}uc.geo.radius.AddLayer(page.placeorder.order.RadiusTypeChoice,false)}}else{var g=String.format("Please note: The address/zip code ({0}) could not be found, please check and confirm the address/zip code.",c);uc.geo.SetErrorMessage(true,g);a.jmap("ClearMap");uc.geo.radius.USMapLoad()}uc.geo.radius.isCallAndLoadMap=false},error:function(e){uc.geo.radius.isCallAndLoadMap=false;uc.geo.SetErrorMessage(true,valid.message)}});return false},SearchMapByLatLngAndAddress:function(d,h,b,c){if(c){}else{ZECCO.hermespopup.hide()}var g=page.placeorder.order;radius=null;switch(g.GeoType){case entity.enums.GeoType.Radius:jQuery("#geo_radius_address").val(b);radius=jQuery("#geo_radius_value").val();break;case entity.enums.GeoType.ZipRadius:jQuery("#geo_radius_zip").val(b);radius=jQuery("#geo_radius_zip_value").val();break;case entity.enums.GeoType.Closex:jQuery("#geo_radius_closex_address").val(b);break;case entity.enums.GeoType.Polygon:jQuery("#geo_polygon_address").val(b);break}radius=Number(radius||0);d=Number(d);h=Number(h);var e=null;if(radius<=0){e=15}var a=jQuery("#geo_radius_map");jQuery("#geo_radius_addr_lat").val(d);jQuery("#geo_radius_add_lng").val(h);var f=Mapifies.MapObjects.Get(a);a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[d,h],mapZoom:e});if(g.GeoType!=entity.enums.GeoType.Closex&&g.GeoType!=entity.enums.GeoType.Polygon&&radius>0){a.jmap("AddRoundCircleOverlay",{mapCenter:[d,h],radius:radius})}if(g.GeoType!=entity.enums.GeoType.Polygon){a.jmap("AddMarker",{pointLatLng:[d,h],pointTitle:b})}},SearchPolygonAddress:function(){uc.geo.SetErrorMessage(false,"");var b=jQuery("#geo_polygon_address").val();var a=jQuery("#geo_radius_map");jQuery("#geo_radius_addr_lat").val("");jQuery("#geo_radius_add_lng").val("");if(String.IsNullOrEmpty(b)){a.jmap("ClearMap");return}a.jmap("SearchAddress",{query:b,returnType:"getLocations"},function(l,k){var c=Mapifies.SearchCode(k);if(c.success){var g=new Array();var e=l;var f=0;for(var d=0;d<e.length;d++){if(uc.geo.radius.IsValidAddress(e[d].types[0])){g[f++]=e[d]}}var h;if(g.length>0){h=g[0]}else{h=l[0]}jQuery("#geo_radius_addr_lat").val(h.geometry.location.lat());jQuery("#geo_radius_add_lng").val(h.geometry.location.lng());var j=Mapifies.MapObjects.Get(a);a.jmap("ClearMap");a.jmap("MoveTo",{mapCenter:[h.geometry.location.lat(),h.geometry.location.lng()],mapZoom:14});a.jmap("AddMarker",{pointLatLng:[h.geometry.location.lat(),h.geometry.location.lng()],pointIcon:"themes/default/assets/images/gmap/mm_20_blue.png",pointTitle:h.formatted_address},function(i){uc.geo.radius.searchMarker=i});uc.geo.radius.ShowMoreAddresses(g);uc.geo.radius.WarnIfAddressAccuracyIsMatched(h.formatted_address,h.types[0])}else{uc.geo.SetErrorMessage(true,"Sorry, we are unable to geocode that address!");a.jmap("ClearMap");uc.geo.radius.ShowMoreAddresses()}});return false},IsValidAddress:function(a){if(a!="street_address"){return false}return true},ShowMoreAddresses:function(k){var a=page.placeorder.order;var f=null;if(a.Geotype==entity.enums.GeoType.Radius){f="geo_radius_show_more"}else{if(a.GeoType==entity.enums.GeoType.CloseX){f="geo_radius_closex_show_more"}else{f="geo_radius_polgyon_show_more"}}if(k==window.undefined||k==null||k.length<2){jQuery("#"+f).addClass("hidden");return}var e=k;var c="";for(var d=0;d<e.length;d++){placemark=e[d];var h="";h="<b><i>"+placemark.formatted_address+"</i></b>";var g=placemark.formatted_address;var b="<div><a class='ShortAddress' href='javascript:void(0);' onclick=\"javascript:uc.geo.radius.SearchMapByLatLngAndAddress('{0}','{1}','{2}');\"> {3} </a></div><div>{4}</div>";var j=String.format(b,placemark.geometry.location.lat(),placemark.geometry.location.lng(),placemark.formatted_address,h,placemark.formatted_address);c+=j}jQuery("#"+f).removeClass("hidden");jQuery("#geo_radius_more_addresses").html(c)},SetOrderGeos:function(d){var j=[];var m=jQuery("#geo_radius_addr_lat").val();var n=jQuery("#geo_radius_add_lng").val();var q;var l;var p;var h=new entity.OrderGeo();l=0;var e=0;var g=entity.enums.RadiusTypeChoice.UNKNOWN;if(!page.placeorder.IsMultipleAddress||d.GeoType==entity.enums.GeoType.Polygon||d.GeoType==entity.enums.GeoType.ZipRadius||d.GeoType==entity.enums.GeoType.Radius||d.GeoType==entity.enums.GeoType.Closex){uc.geo.radius.RadiusAddresses=[]}switch(d.GeoType){case entity.enums.GeoType.Radius:h.GeoType=entity.enums.GeoType.Radius;g=jQuery("#radiusTypeByRadius").val();if(uc.geo.radius.RadiusAddresses.length<1){uc.geo.radius.AddRadiusTargetAddress()}break;case entity.enums.GeoType.ZipRadius:h.GeoType=entity.enums.GeoType.ZipRadius;g=jQuery("#radiusTypeByRadiusZip").val();if(uc.geo.radius.RadiusAddresses.length<1){uc.geo.radius.AddZipRadiusTargetAddress()}break;case entity.enums.GeoType.Closex:h.GeoType=entity.enums.GeoType.Closex;if(uc.geo.radius.RadiusAddresses.length<1){uc.geo.radius.AddClosetTargetAddress()}break;case entity.enums.GeoType.Polygon:q=jQuery("#geo_polygon_address").val();p=uc.geo.radius.ComposePoints();var a=new entity.OrderAddress();a.AddrUsageType=2;a.AddressName=q;a.Latitude=m;a.Longitude=n;a.AddrSearchString=p;a.AddressLine=q;uc.geo.radius.RadiusAddresses.push(a);h.GeoType=entity.enums.GeoType.Polygon;g=jQuery("#radiusTypeByPolygon").val();break;case entity.enums.GeoType.MultiRadius:h.GeoType=entity.enums.GeoType.MultiRadius;g=jQuery("#RadiusTypeByMultiRadius").val();if(uc.geo.radius.RadiusAddresses.length<1){uc.geo.radius.AddMultiRadiusTargetAddress()}break;case entity.enums.GeoType.MultiClosex:h.GeoType=entity.enums.GeoType.MultiClosex;if(uc.geo.radius.RadiusAddresses.length<1){uc.geo.radius.AddMultiClosetTargetAddress()}break;case entity.enums.GeoType.AcxiomMultiRadius:h.GeoType=entity.enums.GeoType.AcxiomMultiRadius;g=jQuery("#multiRadiusTypeByRadius").val();if(uc.geo.radius.RadiusAddresses.length<1){uc.geo.radius.AddAcxiomRadiusTargetAddress()}break;case entity.enums.GeoType.ZipMap:h.GeoType=entity.enums.GeoType.ZipMap;g=d.RadiusTypeChoice;break}if(d.GeoType!=entity.enums.GeoType.ZipMap){if(uc.geo.radius.RadiusAddresses.length<1){if(d.GeoType==entity.enums.GeoType.Radius||d.GeoType==entity.enums.GeoType.ZipRadius||d.GeoType==entity.enums.GeoType.Closex||d.GeoType==entity.enums.GeoType.MultiRadius||d.GeoType==entity.enums.GeoType.MultiClosex||d.GeoType==entity.enums.GeoType.AcxiomMultiRadius){return false}}if(d.GeoType==entity.enums.GeoType.Polygon&&!uc.geo.radius.polygonCompleted){var c="Please complete a polygon!";uc.geo.SetErrorMessage(true,c);return false}}else{if(uc.geo.radius.MapZips.length<1){var c="Please add a ZIP or carrier routes!";uc.geo.SetErrorMessage(true,c);return false}}d.RadiusTypeChoice=g;d.UmCode=page.placeorder.RadiusUnit;d.Radius=l;d.OrderAddresses=[];for(var f=0;f<uc.geo.radius.RadiusAddresses.length;f++){var k=uc.geo.radius.RadiusAddresses[f];var b=new entity.OrderGeo();var o=null;if(d.GeoType==entity.enums.GeoType.Closex||d.GeoType==entity.enums.GeoType.MultiClosex){o=String.format("{0}:{1}:{2}:{3}",k.Longitude,k.Latitude,k.Quantity,d.UmCode)}else{if(d.GeoType==entity.enums.GeoType.Polygon){o=k.AddrSearchString}else{o=String.format("{0}:{1}:{2}:{3}",k.Longitude,k.Latitude,k.Radius,d.UmCode)}}b.GeoKeyCode=o;k.AddrSearchString=o;b.AddressLine=o;b.GeoKeyDesc=k.AddressName;j.push(b);d.OrderAddresses.push(k)}for(var f=0;f<uc.geo.radius.MapZips.length;f++){var b=new entity.OrderGeo();var o=null;if(d.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT){o=String.format("{0}:{1}",uc.geo.radius.MapZips[f].substring(0,5),uc.geo.radius.MapZips[f].substring(5))}else{o=uc.geo.radius.MapZips[f]}b.GeoKeyCode=o;b.AddressLine=o;b.GeoKeyDesc=uc.geo.radius.MapZips[f];j.push(b)}if(j==null||j.length==0){uc.geo.SetErrorMessage(true,"Please select at least one address.");return false}d.OrderGeos=j;return true},GeoSelectionObject:function(){this.selectionType="";this.selectId="";this.selectionName="";this.polyline=null;this.radiusCenterLat;this.radiusCenterLon;this.radiusSize;this.count;this.points=[];this.K="-1";this.be=false},ParsePoints:function(e){var d=[];if(String.IsNullOrEmpty(e)){return d}var b=e.split("|");if(b.length>0){for(var c=0;c<b.length;c++){if(!String.IsNullOrEmpty(b[c])){var f=b[c].split(":");if(f.length==2){var a=new google.maps.LatLng(f[1],f[0]);d.push(a)}}}}return d},ComposePoints:function(){var a="";if(uc.geo.PolygonList.length==0){return a}var c=uc.geo.PolygonList[uc.geo.PolygonList.length-1].getPath().getArray();if(c[c.length-1]!=c[0]){c.push(c[0])}if(uc.geo.radius.polygonCompleted){a=c[0].lng()+":"+c[0].lat();for(var b=1;b<c.length;b++){a=a+"|"+c[b].lng()+":"+c[b].lat()}}return a},getPolygonBounds:function(b){var c=new google.maps.LatLngBounds();var a;for(a=0;a<b.length;a++){c.extend(b[a])}return c},getPolygonCenter:function(b){var c=new google.maps.LatLngBounds();var a;for(a=0;a<b.length;a++){c.extend(b[a])}return c.getCenter()},DrawPolygon:function(b,i,d){if(i==null||i.length<3){return}var a=Mapifies.MapObjects.Get(b);var j={strokeColor:"#f33f00",strokeWeight:5,strokeOpacity:1,fillColor:"#ff0000",fillOpacity:0.2,map:a,paths:i,editable:d==undefined?true:d};var h=new google.maps.Polygon(j);uc.geo.PolygonList.push(h);var k=a.getZoom();var e=uc.geo.radius.getPolygonCenter(i);var g=uc.geo.radius.getPolygonBounds(i);if(k<uc.geo.radius.polygonZoomLevel){a.setCenter(e);a.fitBounds(g)}if(uc.geo.radius.geoSelections.length==0){var c=new uc.geo.radius.GeoSelectionObject();c.selectionType="POLYGON";c.points=i;uc.geo.radius.geoSelections.push(c)}uc.geo.radius.polygonZoom=k;uc.geo.radius.polygonCompleted=true;uc.geo.radius.polygonStart=false;uc.geo.radius.clearGMarkers();uc.geo.radius.clearListeners();uc.geo.radius.removeOverlay(a,uc.geo.radius.mouseLine);uc.geo.radius.mouseLine=null;var f={center:e,mapTypeId:a.getMapTypeId(),draggable:true,draggableCursor:"hand"};a.setOptions(f)},drawPolyline:function(e,c,d){if(c==null||c.lenght<2){return}var f=Mapifies.MapObjects.Get(e);var b=uc.geo.radius.geoSelections[uc.geo.radius.indexOfLastGeoSelection];var a={clickable:false,strokeColor:d,strokeWeight:3,strokeOpacity:1,map:f,path:c};b.polyline=new google.maps.Polyline(a)},drawMouseLine:function(e,c,d){if(c==null||c.lenght<2){return}var f=Mapifies.MapObjects.Get(e);var b={clickable:false,strokeColor:d,strokeWeight:3,strokeOpacity:0.5,map:f,path:c};var a=new google.maps.Polyline(b);uc.geo.PolylineList.push(a);uc.geo.radius.mouseLine=a},addMarker:function(d,a){if(a==null){return}var e=Mapifies.MapObjects.Get(d);var c={position:a,icon:"themes/default/assets/images/gmap/squaremarker.png",draggable:false,map:e};var b=new google.maps.Marker(c);google.maps.event.addListener(b,"click",uc.geo.radius.addPointClick);google.maps.event.addListener(b,"dragend",uc.geo.radius.dragPoint);uc.geo.radius.gMarkers.push(b)},IsLineCross:function(h,g){var c,a,d,b,f,e;c=h.endPoint.lat()-h.startPoint.lat();a=h.endPoint.lng()-h.startPoint.lng();d=g.endPoint.lat()-g.startPoint.lat();b=g.endPoint.lng()-g.startPoint.lng();if((d*a-b*c)==0){return 0}f=(c*(g.startPoint.lng()-h.startPoint.lng())+a*(h.startPoint.lat()-g.startPoint.lat()))/(d*a-b*c);e=(d*(h.startPoint.lng()-g.startPoint.lng())+b*(g.startPoint.lat()-h.startPoint.lat()))/(b*c-d*a);if(f>=0&&f<=1&&e>=0&&e<=1){return 1}return 0},checkPointAndLines:function(e,c,d){var b=uc.geo.radius.geoSelections[uc.geo.radius.indexOfLastGeoSelection].points;if(c==null||b.length<2){return false}for(var a=0;a<(b.length-1);a++){if(a!=d&&(a!=d-1)&&(a!=d+1)){if(uc.geo.radius.IsLineCross(new uc.geo.radius.Line(c,e),new uc.geo.radius.Line(b[a],b[a+1]))==true){return true}}}return false},Point:function(){this.x=0;this.y=0},Line:function(b,a){this.startPoint=b;this.endPoint=a},Path:function(){this.id=null;this.values=[]},MyCircle:function(){this.Latitude=null;this.Longitude=null;this.Radius=0},geoSelections:[],gMarkers:[],dragEndListener:[],mouseMoveListener:null,clickListener:null,polygonCompleted:false,polygonStart:false,polygonZoomLevel:9,indexOfLastGeoSelection:0,remarkerIcon:null,searchMarker:null,mouseLine:null,polygonZoom:9,startPolygon:function(){var a=jQuery("#geo_radius_map");var f=Mapifies.MapObjects.Get(a);var b=jQuery("#geo_polygon_address").val();var d=f.getZoom();if(d<uc.geo.radius.polygonZoomLevel){alert("Please Zoom in to use the polygon mapping tool.\nTo select larger geographic regions, please use a radius select, scf, ZIP code, or county selection.");return}uc.geo.radius.polygonCompleted=false;mouseLine=null;var e=new uc.geo.radius.GeoSelectionObject();e.selectionType="POLYGON";uc.geo.radius.geoSelections.push(e);uc.geo.radius.indexOfLastGeoSelection=uc.geo.radius.geoSelections.length-1;var c={zoom:d,center:f.getCenter(),mapTypeId:f.getMapTypeId(),draggable:true,draggableCursor:"crosshair"};f.setOptions(c);google.maps.event.addListener(f,"click",uc.geo.radius.addPointClick);google.maps.event.addListener(f,"mousemove",uc.geo.radius.drawLineToMousePoint);uc.geo.radius.polygonStart=true},clearPolygon:function(){var a=jQuery("#geo_radius_map");var d=Mapifies.MapObjects.Get(a);uc.geo.radius.clearListeners();uc.geo.radius.clearGMarkers();if(uc.geo.radius.searchMarker!=null){uc.geo.radius.searchMarker.setMap(d)}if(uc.geo.radius.geoSelections.length>uc.geo.PolygonList.length){uc.geo.radius.removeOverlay(d,uc.geo.radius.geoSelections[uc.geo.PolygonList.length].polyline)}if(uc.geo.radius.mouseLine!=null){uc.geo.radius.removeOverlay(d,uc.geo.radius.mouseLine)}for(var c=0;c<uc.geo.PolygonList.length;c++){uc.geo.PolygonList[c].setMap(null)}uc.geo.PolygonList.length=0;uc.geo.radius.polygonCompleted=false;uc.geo.radius.polygonStart=false;uc.geo.radius.geoSelections=[];uc.geo.radius.indexOfLastGeoSelection=0;mouseLine=null;var b={zoom:d.getZoom(),center:d.getCenter(),mapTypeId:d.getMapTypeId(),draggable:true,draggableCursor:"hand"};d.setOptions(b)},clearListeners:function(){var a=jQuery("#geo_radius_map");var b=Mapifies.MapObjects.Get(a);google.maps.event.clearListeners(b)},clearListener:function(b){var a=jQuery("#geo_radius_map");var c=Mapifies.MapObjects.Get(a);google.maps.event.clearListeners(c,b)},clearGMarkers:function(){for(var a=0;a<uc.geo.radius.gMarkers.length;a++){uc.geo.radius.gMarkers[a].setMap(null)}uc.geo.radius.gMarkers=[]},checkCurrentClickObject:function(c,b){if(c!=null&&c!=undefined){for(var a=0;a<c.points.length;a++){if(b==c.points[a]){uc.geo.Y=b;return true}}}return false},addPointClick:function(b){var e=null;e=uc.geo.radius.geoSelections[uc.geo.radius.indexOfLastGeoSelection];var a=jQuery("#geo_radius_map");var f=Mapifies.MapObjects.Get(a);if(uc.geo.radius.checkCurrentClickObject(e,b.latLng)){if(e.points.length>0){if(e.points.length>1&&e.points.length<3&&e.points[0]==uc.geo.Y){alert("You must add at least 3 points to define a selection area.\nPlease click another point.")}else{if(e.points[0]==uc.geo.Y){e.points.push(uc.geo.Y);uc.geo.radius.DrawPolygon(a,e.points);uc.geo.radius.removeOverlay(f,e.polyline);for(var d=0;d<uc.geo.PolylineList.length;d++){uc.geo.PolylineList[d].setMap(null)}uc.geo.PolylineList.length=0}else{if(e.points[e.points.length-1]==b.latLng){uc.geo.radius.removeOverlay(f,e.polyline);var c=uc.geo.radius.gMarkers[e.points.length-1];uc.geo.radius.removeOverlay(f,c);e.points.pop();uc.geo.radius.gMarkers.pop();if(e.points.length<1){uc.geo.radius.clearPolygon()}else{uc.geo.radius.drawPolyline(a,e.points,"#ff0000")}}else{alert("You must click on the first point to close the polygon.")}}}}}else{if(uc.geo.radius.checkPointAndLines(b.latLng,e.points[e.points.length-1],e.points.length-1)==0){uc.geo.radius.addMarker(a,b.latLng);var e=null;e=uc.geo.radius.geoSelections[uc.geo.radius.indexOfLastGeoSelection];e.points.push(b.latLng);uc.geo.radius.removeOverlay(f,e.polyline);uc.geo.radius.drawPolyline(a,e.points,"#ff0000")}else{alert("Line segments defining the selection area can not cross")}}},drawLineToMousePoint:function(b){if(uc.geo.radius.polygonCompleted||!uc.geo.radius.polygonStart){return}var a=jQuery("#geo_radius_map");var e=Mapifies.MapObjects.Get(a);var c=uc.geo.radius.geoSelections[uc.geo.radius.indexOfLastGeoSelection];uc.geo.radius.removeOverlay(e,uc.geo.radius.mouseLine);if(c!=null&&c.points.length>0){var d=[];d.push(b.latLng);d.push(c.points[c.points.length-1]);uc.geo.radius.drawMouseLine(a,d,"#0000FF")}},removeOverlay:function(b,a){if(a!=null){a.setMap(null)}},dragPoint:function(){var d,c,e,b=1;d=uc.geo.radius.geoSelections[uc.geo.radius.indexOfLastGeoSelection];e=d.points;for(c=0;c<e.length;c++){if(uc.geo.radius.gMarkers[c].getPoint()!=e[c]){if(c>0){if(uc.geo.radius.checkPointAndLines(gMarkers[c].getPoint(),e[c-1],c-1)==1){b=0}}if(c<e.length-1){if(uc.geo.radius.checkPointAndLines(gMarkers[c].getPoint(),e[c+1],c)==1){b=0}}if(b==1){d.points[c]=uc.geo.radius.gMarkers[c].getPoint()}else{uc.geo.radius.gMarkers[c].setPoint(e[c]);alert("Cannot move point, because polygon lines can not cross")}}}var a=jQuery("#geo_radius_map");uc.geo.radius.removeOverlay(d.polyline);uc.geo.radius.drawPolyline(a,e,"#ff0000")},GetMapAddresses:function(){var f=[];for(var d=0;d<uc.geo.radius.RadiusAddresses.length;d++){var b=new uc.geo.radius.MyCircle();b.Latitude=uc.geo.radius.RadiusAddresses[d].Latitude;b.Longitude=uc.geo.radius.RadiusAddresses[d].Longitude;b.Radius=uc.geo.radius.RadiusAddresses[d].Radius;f.push(b)}if(f.length<1){var a="0";switch(page.placeorder.order.GeoType){case entity.enums.GeoType.Radius:a=jQuery("#geo_radius_value").val();break;case entity.enums.GeoType.ZipRadius:a=jQuery("#geo_radius_zip_value").val();break;case entity.enums.GeoType.MultiRadius:a=jQuery("#geo_multiradius_value").val();break;case entity.enums.GeoType.AcxiomMultiRadius:a=jQuery("#multi_radius_value").val();break}var e=jQuery("#geo_radius_addr_lat").val();var c=jQuery("#geo_radius_add_lng").val();if(!String.IsNullOrEmpty(e)&&!String.IsNullOrEmpty(c)){var b=new uc.geo.radius.MyCircle();b.Latitude=e;b.Longitude=c;b.Radius=a;f.push(b)}}return f},GetPointsStr:function(){var a=[];if(page.placeorder.order.GeoType==entity.enums.GeoType.Polygon){var b=uc.geo.radius.ComposePoints();if(!String.IsNullOrEmpty(b)){a.push(b)}}return a},SubmitMyMap:function(){var a=jQuery("#geo_radius_map");var b=Mapifies.MapObjects.Get(a);google.maps.event.addListener(b,"idle",function(){});uc.geo.radius.SubmitMap(b,page.global.MapWidth,page.global.MapHeight,page.placeorder.order.GeoType==entity.enums.GeoType.ZipMap)},SubmitMap:function(u,n,l,k){var t=u.getCenter();var c=t.lat();var r=t.lng();var a=u.getZoom();var o=uc.geo.overlay.getProjection().fromLatLngToContainerPixel(t);var h=new google.maps.Point(o.x-(n/2),o.y+(l/2));var m=new google.maps.Point(o.x+(n/2),o.y-(l/2));var d=uc.geo.overlay.getProjection().fromContainerPixelToLatLng(h);var w=uc.geo.overlay.getProjection().fromContainerPixelToLatLng(m);var b=String.format("{0},{1},{2},{3}",d.lng(),d.lat(),w.lng(),w.lat());var s=[];for(var q=0;q<uc.geo.radius.MapPaths.length;q++){for(var p=0;p<uc.geo.radius.MapPaths[q].values.length;p++){s.push(uc.geo.radius.MapPaths[q].values[p])}}var g="";if(k){var v=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"CR":"ZIP";g=String.format("LAYERS={0}",v)}var e=uc.geo.radius.GetMapAddresses();var f=uc.geo.radius.GetPointsStr();framework.common.Ajax({url:"PlaceOrder.aspx/MapToPdf",data:{center:String.format("{0},{1}",c,r),zoom:a,bbox:b,paths:s,withWms:k,other:g,addresses:e,polygonPoints:f},success:function(i){if(i.ResultFlag==true){jQuery("#downloadMap").attr("href",i.DataSource.DownloadFile);window.open(i.DataSource.DownloadFile)}},error:function(i){},waitingElement:"ct_geo"})}};uc.geo.scf={_IsInit:false,ScfRegExp:null,Init:function(){if(uc.geo.scf._IsInit==false){uc.geo.scf.CreateZipInputs();jQuery("#ct_geo_scf").removeClass("hidden");uc.geo.scf.ScfRegExp=new RegExp(page.placeorder.ScfRegExp,"i");uc.geo.scf._IsInit=true;jQuery("#geo_scf_range_input").slideUp();jQuery("#geo_scf_range_from").setMask(page.placeorder.ScfMask);jQuery("#geo_scf_range_to").setMask(page.placeorder.ScfMask);if(page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.SCF_INPUT&&page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.SCF_RANGE_INPUT){page.placeorder.order.ZipcodeOriginalType=entity.enums.ZipcodeOrignalType.SCF_INPUT}if(page.placeorder.order.ZipcodeOriginalType!=entity.enums.ZipcodeOrignalType.SCF_INPUT){uc.geo.scf.ToggleSCFInput();uc.geo.scf.ToggleSCFRangeInput()}if(entity.enums.ZipcodeOrignalType.SCF_RANGE_INPUT>page.placeorder.MaxScfcodeOriginalType){jQuery("#geo_scf_range_input_panel").addClass("hidden")}}if(!page.global.isMyAcxiomPartnerUSite){uc.geo.scf.LoadFromOrder()}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){uc.geo.scf.LoadFromOrder()}}},CreateZipInputs:function(){$("#ct_gep_scf_inputs").setTemplateElement("ct_gep_scf_template");$("#ct_gep_scf_inputs").processTemplate({linecount:5});$("#ct_gep_scf_inputs input:text").setMask(page.placeorder.ScfMask)},IsValidScf:function(a){return uc.geo.scf.ScfRegExp.test(a)},LoadFromOrder:function(){var d=page.placeorder.order;if(d.GeoType==entity.enums.GeoType.Scf&&d.OrderGeos!=null){var b=d.OrderGeos.length;var c=$("#ct_gep_scf_inputs input:text")||[];for(var a=0;a<c.length;a++){if(a<=b-1){c[a].value=d.OrderGeos[a].GeoKeyCode}else{c[a].value=""}}if(b>0){jQuery("#geo_scf_range_from").val(d.OrderGeos[0].GeoKeyCode);jQuery("#geo_scf_range_to").val(d.OrderGeos[d.OrderGeos.length-1].GeoKeyCode)}}},serverValidating:false,validatedZips:null,ResetZips:function(c){if(c.length>0){if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.SCF_INPUT){var a=$("#ct_gep_scf_inputs input:text").val("")||[];for(var b=0;b<c.length;b++){a[b].value=c[b]}return true}else{jQuery("#geo_scf_range_from").val(c[0]);jQuery("#geo_scf_range_to").val(c[c.length-1])}}},ToggleSCFcodePanel:function(b){var a;if(b!=page.placeorder.order.ZipcodeOriginalType){a=b}else{if(b==entity.enums.ZipcodeOrignalType.SCF_INPUT){a=entity.enums.ZipcodeOrignalType.SCF_RANGE_INPUT}else{a=entity.enums.ZipcodeOrignalType.SCF_INPUT}}if(a>page.placeorder.MaxScfcodeOriginalType){a=entity.enums.ZipcodeOrignalType.SCF_INPUT}uc.geo.scf.ToggleTargetPanel(page.placeorder.order.ZipcodeOriginalType);uc.geo.scf.ToggleTargetPanel(a);page.placeorder.order.ZipcodeOriginalType=a},ToggleSCFRangeInput:function(){jQuery("#geo_scf_range_input_switch").toggleClass("collapsed-panel-restore");jQuery("#geo_scf_range_input").slideToggle()},ToggleSCFInput:function(){jQuery("#geo_scf_enter_switch").toggleClass("collapsed-panel-restore");jQuery("#ct_gep_scf_inputs").slideToggle()},ToggleTargetPanel:function(a){if(a==entity.enums.ZipcodeOrignalType.SCF_INPUT){uc.geo.scf.ToggleSCFInput()}else{uc.geo.scf.ToggleSCFRangeInput()}},ToggleSCFPanel:function(a){var b=parseInt($(a).attr("originalType"));uc.geo.scf.ToggleSCFcodePanel(b)},SetOrderGeos:function(c){geos=[];var a=[];if(page.placeorder.order.ZipcodeOriginalType==entity.enums.ZipcodeOrignalType.SCF_INPUT){var f=$("#ct_gep_scf_inputs input:text")||[];var b=[];f.each(function(k){var l=jQuery.trim(this.value);if(l!=""){if(!uc.geo.scf.IsValidScf(l)){$(this).val("");hasError=true}else{if(jQuery.inArray(l,b)!=-1){$(this).val("");hasError=true}else{b.push(l)}}}});if(b.length<0){uc.geo.SetErrorMessage(true," Please input at least one SCF.");return false}framework.common.Ajax({url:"PlaceOrder.aspx/GetZipsByScf",data:{zips:b},async:false,waitingElement:"ct_main_panel",success:function(i){a=i.DataSource},error:function(i){}})}else{var g=jQuery("#geo_scf_range_from").val().trim();if(g==""||g.length!=3){uc.geo.SetErrorMessage(true,"Please input the from scf code.");return false}var h=jQuery("#geo_scf_range_to").val().trim();if(h==""||h.length!=3){uc.geo.SetErrorMessage(true,"Please input the to scf code.");return false}if(parseInt(g)>parseInt(h)){var j=g;g=h;h=j;jQuery("#geo_scf_range_from").val(g);jQuery("#geo_scf_range_to").val(h)}framework.common.Ajax({url:"PlaceOrder.aspx/GetSCFcodesBySCFRange",data:{fromSCF:g,toSCF:h,maxLength:page.global.MaxNumberOfZipcodeBySCF},async:false,success:function(i){if(i.ResultFlag==true){a=i.DataSource}},error:function(i){},waitingElement:"ct_geo"})}if(a==null||a.length<1){uc.geo.SetErrorMessage(true," Please input at least one SCF.");return false}this.ResetZips(a);for(var e=0;e<a.length;e++){var d=new entity.OrderGeo();d.GeoKeyCode=a[e];d.GeoKeyDesc=a[e];d.GeoType=entity.enums.GeoType.Scf;geos.push(d)}if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true," You must select one or more areas first.");return false}c.OrderGeos=geos;return true}};uc.geo.zipupload={upload:null,zipUploadResult:null,zipUploadCompleted:false,Init:function(){this.BackToInputs();jQuery("#ct_geo_zipUpload").removeClass("hidden");this.upload=new AjaxUpload("#ct_geo_zipUpload_control",{action:"FileHandler.ashx",name:"zipUpload",autoSubmit:false,responseType:"json",onChange:function(a,b){jQuery("#ct_geo_zipUpload_control_file").val($(this._input).val())},onSubmit:function(a,b){jQuery("#ct_geo_zipUpload_control_file").val("");page.placeorder.Block()},onComplete:function(b,a){uc.geo.zipupload.zipUploadResult=a;uc.geo.zipupload.zipUploadCompleted=true;page.placeorder.UnBlock();uc.geo.Click_Next()}})},HasUploadResult:function(){return !($("#ct_geo_zipUpload_result").hasClass("hidden"))},BackToInputs:function(){uc.geo.SetErrorMessage(false,"");$("#ct_geo_zipUpload_control").removeClass("hidden");$("#ct_geo_zipUpload_result").addClass("hidden")},SetOrderGeos:function(a){if(this.HasUploadResult()){geos=[];for(var b=0;b<this.zipUploadResult.DataSource.zips.length;b++){var c=new entity.OrderGeo();c.GeoKeyCode=this.zipUploadResult.DataSource.zips[b].zip;c.GeoKeyDesc=this.zipUploadResult.DataSource.zips[b].zip;c.GeoType=entity.enums.GeoType.ZipUpload;geos.push(c)}if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please provide at least one zip.");return false}a.OrderGeos=geos;return true}else{if(uc.geo.zipupload.zipUploadCompleted==false){if(!this.upload._input||this.upload._input.value===""){uc.geo.SetErrorMessage(true,"You must select a Microsoft Excel 97 or later file");return false}this.upload.enable();this.upload.submit();return false}else{uc.geo.zipupload.zipUploadCompleted=false;if(uc.geo.zipupload.zipUploadResult.DataSource.hasError){uc.geo.SetErrorMessage(true,"You must select a Microsoft Excel 97 or later file");return false}else{if(uc.geo.zipupload.zipUploadResult.DataSource.hasWarning){uc.geo.SetErrorMessage(true,"There were invalid or duplicate entries. They have been removed. ")}$("#ct_geo_zipUpload_result").setTemplateElement("ct_geo_zipUpload_template");$("#ct_geo_zipUpload_result").processTemplate(uc.geo.zipupload.zipUploadResult.DataSource);$("#ct_geo_zipUpload_result").removeClass("hidden");$("#ct_geo_zipUpload_control").addClass("hidden");return false}}}}};uc.geo.msa={_IsInit:false,Init:function(){if(uc.geo.msa._IsInit==false){uc.geo.msa.LoadStates();uc.geo.msa._IsInit=true}},LoadStates:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetStates",data:{},success:function(a){if(a.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_msa_state",DataSource:a.DataSource,ValueField:"StateCode",TextField:"StateName",SelectValue:null});jQuery("#geo_msa_state").append("<option value=''>All</option>");jQuery("#geo_msa_state").trigger("onchange")}},error:function(a){uc.geo.SetErrorMessage(true,"We've a problem on retrieving states list, please try again later.")},waitingElement:"ct_main_panel"})},SearchAreasByState:function(){var a=jQuery("#geo_msa_state").val();var b={listType:page.placeorder.order.ListType,state:a};framework.common.Ajax({url:"PlaceOrder.aspx/SearchAreas",data:b,success:function(c){if(c.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"geo_msa_left",DataSource:c.DataSource,SelectValue:null})}},error:function(c){uc.geo.SetErrorMessage(true,"We've a problem on retrieving MSA list, please try again later.")},waitingElement:"ct_main_panel"})},AddAreasToTarget:function(){var a=$("#geo_msa_left").selectedOptions()||[];for(var b=0;b<a.length;++b){if(!$("#geo_msa_right").containsOption(a[b].value)){$("#geo_msa_right").addOption(a[b].value,a[b].text,false)}}$("#geo_msa_right").sortOptions(true);framework.common.iPad.refreshMask("geo_msa_right")},RemoveAreasFromTarget:function(){$("#geo_msa_right").removeOption(/./,true);framework.common.iPad.refreshMask("geo_msa_right")},RemoveAllAreasFromTarget:function(){$("#geo_msa_right").removeOption(/./);framework.common.iPad.refreshMask("geo_msa_right")},SetOrderGeos:function(a){geos=[];jQuery("#geo_msa_right option").each(function(b){var c=new entity.OrderGeo();c.GeoKeyCode=this.value;c.GeoKeyDesc=this.text;c.GeoType=entity.enums.GeoType.Msa;geos.push(c)});if(geos==null||geos.length==0){uc.geo.SetErrorMessage(true,"Please select at least one MSA.");return false}a.OrderGeos=geos;return true}};
;
ni.RegisterNameSpace("uc.demo");uc.demo={InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.Demo;b.StepTitle="";b.StepDescription="";b.StepButtonsStatus=entity.enums.StepButtons.Back|entity.enums.StepButtons.Next;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Next,ButtonEvent:uc.demo.Click_Next},{ButtonKey:entity.enums.StepButtons.Back,ButtonEvent:uc.demo.Click_Back}];return b},mappingChars:[],GetMappingChars:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetMappingChars",data:{},success:function(b){if(b.ResultFlag==true){var a=b.DataSource;if(a!=null){for(var c=0;c<a.length;c++){var d=a[c];uc.demo.mappingChars.push({Key:d.Key,Value:d.Value})}}}},error:function(a){framework.common.LogClickEvent(String.format("Fail to get mapping characters."))}})},SetMappingChars:function(a){if(a!=null){for(var b=0;b<a.length;b++){var c=a[b];uc.demo.mappingChars.push({Key:c.Key,Value:c.Value})}}},IsInit:false,listTypeMatch:"",Init:function(){var b=page.placeorder.order;b.CurrentStep=entity.enums.OrderStep.Demo;var a=uc.demo.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,a);jQuery("#ct_demo").fadeIn(1000);jQuery("#ct_step_demo").removeClass("hidden");uc.demo.listTypeMatch=String.format("[listtype*=',{0},']",b.ListType);if(page.global.isMyAcxiomSite&&b.ListType==entity.enums.DataSourceType.Consumer){jQuery("#whole_customer_file_suppression").removeClass("hidden");jQuery("#customsupp_pan").removeClass("hidden")}else{if(!page.global.isMyAcxiomSite){jQuery("#whole_customer_file_suppression").removeClass("hidden");jQuery("#customsupp_pan").removeClass("hidden")}}if(b.ListType==entity.enums.DataSourceType.Occupant){jQuery("#ct_demo_stdatasource").addClass("hidden");jQuery("#ct_demo_occupant").removeClass("hidden")}else{if(!uc.demo.IsInit){uc.demo.suppression.AutoLoadSuppression();uc.demo.IsInit=true}jQuery("#ct_demo_stdatasource").removeClass("hidden");jQuery("#ct_demo_occupant").addClass("hidden");if(!framework.common.IsRegisteredSite){if(b.ListType==entity.enums.DataSourceType.Business){jQuery("#demoOptionsHeader").html("Additional Selections")}}jQuery('#demo_options_variables_input input[type="text"]').setMask("99999999");jQuery('#demo_lifestyle_variables_input input[type="text"]').setMask("99999999");$("#ct_demo_ul li").addClass("hidden");if(framework.common.IsRegisteredSite||uc.demo.AllowCustomDomainSuppression()){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='suppressionHeader']").removeClass("hidden")}if(!framework.common.IsRegisteredSite&&(page.global.isMyAcxiomPartnerUSite||page.global.isDatabilitiesUSite)){$("#view_all_audience_propensity").removeClass("hidden")}$("#more_demo_help_phone").text(page.global.PhoneNumber);$("#more_demo_help").click(function(){framework.ui.ShowDialog("more_demo_help_panel",{fixedOnScroll:false,appendForm:true,css:{cursor:"default",top:"55%",left:"30%",border:"0px solid #aaa"}})});$("#ct_demo_tabs").tabs({select:function(d,e){var c=$(e.tab).attr("ord");uc.demo.SelectTab(parseInt(c))}});uc.demo.CheckIfLifeStyleAndQuickpickExist();uc.demo.LoadPostSupPhone();uc.demo.LoadFromOrder();jQuery("#select_all_households").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);jQuery("#i_select_all_households").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);jQuery("#define_target_audience").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);jQuery("#i_define_target_audience").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);jQuery("#define_target_audience_tab").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);jQuery("#i_define_target_audience_tab").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);if(page.placeorder.isMultiCount){$("#ct_demo").addClass("hidden");$("#ct_demo_multi_counts").removeClass("hidden");uc.demo.multicount.Init();$(".order_step_buttons").find("a[buttonname='order_stepbt_back']").addClass("hidden")}else{$("#ct_demo").removeClass("hidden");$("#ct_demo_multi_counts").addClass("hidden");$(".order_step_buttons").find("a[buttonname='order_stepbt_back']").removeClass("hidden")}}if(b.ListType!=entity.enums.DataSourceType.Compass){$("#suppressionPanel").removeClass("hidden")}else{$("#suppressionPanel").addClass("hidden")}},InitSelect:function(b,a,d){var c=$("#"+b);var a=$("#"+a);var e=$("#"+d);a.css("width",e.outerWidth());e.css("width",c.outerWidth());c.scroll(function(){e.css("width",$(this).outerWidth()+$(this).scrollLeft())})},AllowCustomDomainSuppression:function(){var a=false;a=!framework.common.IsRegisteredSite&&page.placeorder.Enable_DomainSuppression&&page.placeorder.Allow_CustomDomainSuppression;return a},SetDemoTabs:function(a){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id!='quickPickupHeader'][id!='suppressionHeader'][id!='lifeStyleHeader'][id!='liAudiencePropensity'][id!='liCharitableGiving'][id!='liMarketClarity'][id!='liMarketStreet'][id!='liFocusMarket']").removeClass("hidden");if(!uc.demo.CharitableGivingExisted&&page.placeorder.demoTabActive=="8"){page.placeorder.demoTabActive=""}if(!uc.demo.AnicoTabsExisted&&page.placeorder.demoTabActive=="9"){page.placeorder.demoTabActive=""}var c=page.placeorder.demoTabActive==""?entity.enums.DemoTab.DemoOptions:page.placeorder.demoTabActive;if(a.ListType==entity.enums.DataSourceType.Business||a.ListType==entity.enums.DataSourceType.InfoUSABusiness||(a.ListType==entity.enums.DataSourceType.Compass&&!page.placeorder.Enable_AN_BusinessQP&&!uc.demo.AnicoTabsExisted)){c=entity.enums.DemoTab.BusinessType}if(a.ListType==entity.enums.DataSourceType.Compass&&page.placeorder.Enable_AN_BusinessQP){$("#ct_demo_tabs ul li[id='businessQpHeader']").addClass("hidden");$("#ct_demo_tabs ul li[id='businessTypeHeader']").addClass("hidden")}if(a.ListType==entity.enums.DataSourceType.Compass&&page.placeorder.Enable_AN_BusinessQP&&!uc.demo.AnicoTabsExisted){c=entity.enums.DemoTab.QuickPicks}var b=$("#ct_demo_ul a");for(var d=0;d<b.length;d++){if(parseInt($(b[d]).attr("ord"))==c){$("#ct_demo_tabs").tabs("option","selected",d);uc.demo.SelectTab(c);break}}$("#ct_demo_ul").removeClass("hidden");if(a.ListType==entity.enums.DataSourceType.Consumer){if($("#liAudiencePropensity").css("display")!="none"){jQuery('a[href="#demo_p_options"]').html("Demographics");jQuery('a[href="#demo_p_lifestyle"]').html("Interests & Purchasing")}}if(!framework.common.IsRegisteredSite&&!page.global.isMyAcxiomPartnerUSite&&!page.global.isDatabilitiesUSite){$("#ct_demo_tabs ul li[id='liAudiencePropensity']").addClass("hidden")}},SetPhoneOptions:function(a){if(a.AvailablePhoneOptions!=null&&a.AvailablePhoneOptions.length>0){uc.demo.ShowPhoneOption("demo_po_nothing",false,"");uc.demo.ShowPhoneOption("demo_po_available",false,"");uc.demo.ShowPhoneOption("demo_po_records",false,"");jQuery.each(a.AvailablePhoneOptions,function(e,c){var d=jQuery("input[type='radio'][name='demo-phoneoption'][value="+c.SettingValue+"]");var b=d.attr("id");uc.demo.ShowPhoneOption(b,true,c.SettingDesc)});if(a.DefaultCheckedPhoneOption!=entity.enums.PhoneOption.None){jQuery("input[type='radio'][name='demo-phoneoption'][value="+a.DefaultCheckedPhoneOption+"]").attr("checked",true)}}},SetPostSupPhone:function(a){if(typeof(a.OrderSelectedDemos)!="undefined"&&a.OrderSelectedDemos!=null){for(var b=0;b<a.OrderSelectedDemos.length;b++){if(a.OrderSelectedDemos[b].ColumnName=="PostSupPhone"){if(a.PhoneOption==entity.enums.PhoneOption.PhoneNumberWithAvailable){$("[name='demo_po_available']").removeClass("hidden");$("input[name='demo-phoneoption-sup'][id='demo_po_available_sup_on'][value="+a.OrderSelectedDemos[b].Values[0].AttributeValue+" ]").prop("checked",true)}if(a.PhoneOption==entity.enums.PhoneOption.PhoneNumberOnly){$("[name='demo_po_records']").removeClass("hidden");$("input[name='demo-phoneoption-sup'][id='demo_po_records_sup_on'][value="+a.OrderSelectedDemos[b].Values[0].AttributeValue+" ]").prop("checked",true);$("input[name='demo-phoneoption-sup'][id='demo_po_records_sup_on'][value="+a.OrderSelectedDemos[b].Values[1].AttributeValue+" ]").prop("checked",true)}}}}},ShowPhoneOption:function(c,b,a){if(b){jQuery("#"+c).removeClass("hidden");jQuery("#"+c+"_label").removeClass("hidden");if(!String.IsNullOrEmpty(a)){jQuery("#"+c+"_label").html(a)}}else{jQuery("#"+c).addClass("hidden");jQuery("#"+c+"_label").addClass("hidden")}},LoadFromOrder:function(){var d=page.placeorder.order;if(!page.global.isMyAcxiomPartnerUSite){if(d.OrderSelectedDemos!=null&&d.OrderSelectedDemos.length>0){uc.demo.SelectsValue.SelectedDemos=[];for(var b=0;b<d.OrderSelectedDemos.length;b++){var c=new entity.SelectedDemoCategory();c.ColumnName=d.OrderSelectedDemos[b].ColumnName;c.AttributeName=d.OrderSelectedDemos[b].AttributeName;c.DemoCategoryType=d.OrderSelectedDemos[b].DemoCategoryType;c.Values=d.OrderSelectedDemos[b].Values;uc.demo.SelectsValue.SelectedDemos.push(c)}}}else{if(page.placeorder.order.OrderId!=undefined&&page.placeorder.order.OrderId>0){if(d.OrderSelectedDemos!=null&&d.OrderSelectedDemos.length>0){uc.demo.SelectsValue.SelectedDemos=[];for(var b=0;b<d.OrderSelectedDemos.length;b++){var c=new entity.SelectedDemoCategory();c.ColumnName=d.OrderSelectedDemos[b].ColumnName;c.AttributeName=d.OrderSelectedDemos[b].AttributeName;c.DemoCategoryType=3;if(d.OrderSelectedDemos[b].ColumnName=="Quick Pick"){c.DemoCategoryType=2}c.Values=d.OrderSelectedDemos[b].Values;uc.demo.SelectsValue.SelectedDemos.push(c)}}}}if(d.ListType==entity.enums.DataSourceType.Occupant){if(d.TargetOption&entity.enums.TargetOption.Homes==entity.enums.TargetOption.Homes){jQuery("#chkIncludeHomes").attr("checked","checked")}else{jQuery("#chkIncludeHomes").removeAttr("checked")}if(d.TargetOption&entity.enums.TargetOption.Homes==entity.enums.TargetOption.Apartments){jQuery("#chkIncludeApartments").attr("checked","checked")}else{jQuery("#chkIncludeApartments").removeAttr("checked")}if(d.TargetOption&entity.enums.TargetOption.Homes==entity.enums.TargetOption.Businesses){jQuery("#chkIncludeBusinesses").attr("checked","checked")}else{jQuery("#chkIncludeBusinesses").removeAttr("checked")}if(d.RouteOption&entity.enums.RouteOption.Carrier==entity.enums.RouteOption.Carrier){jQuery("#chkIncludeCarrierRoutes").attr("checked","checked")}else{jQuery("#chkIncludeCarrierRoutes").removeAttr("checked")}if(d.RouteOption&entity.enums.RouteOption.PoBoxes==entity.enums.RouteOption.PoBoxes){jQuery("#chkIncludePostOfficeBoxes").attr("checked","checked")}else{jQuery("#chkIncludePostOfficeBoxes").removeAttr("checked")}if(d.RouteOption&entity.enums.RouteOption.Rural==entity.enums.RouteOption.Rural){jQuery("#chkIncludeRuralRoutes").attr("checked","checked")}else{jQuery("#chkIncludeRuralRoutes").removeAttr("checked")}if(d.ContactNameOption==1){jQuery("#chkIncludeContactNames").attr("checked","checked")}else{jQuery("#chkIncludeContactNames").removeAttr("checked")}}if(d.ListType==entity.enums.DataSourceType.Consumer){uc.demo.SetPostSupPhone(d)}var a=jQuery("input[type='radio'][name='demo-phoneoption']");if(d.PhoneOption!=entity.enums.PhoneOption.None){a.filter(String.format("[value={0}]",d.PhoneOption)).attr("checked",true)}jQuery("#demo_selectall")[0].checked=(d.DemoType==entity.enums.DemoType.All);uc.demo.AllHouseholds_Click()},IsDemoLoaded:false,IsLifeStyleLoaded:false,IsIndustryTreeLoaded:false,IsQuickPickupLoaded:false,IsPropensityLoaded:false,IsSearchInited:false,IsCharitableGivingLoaded:false,IsMarketClarityLoaded:false,IsMarketStreetLoaded:false,IsFocusMarketLoaded:false,MarketClarityQuickPicks:[],MarketStreetQuickPicks:[],FocusMarketDemoValues:[],IsMarketClarityLoadedAll:false,IsMarketStreetLoadedAll:false,IsFocusMarketLoadedAll:false,SelectTab:function(a){uc.demo.SetErrorMessage(false);$("#ct_demo_panels").addClass("hidden");$("#ct_industry_panels").addClass("hidden");$("#ct_suppression_panels").addClass("hidden");$("#ct_demo_quickpickup_panels").addClass("hidden");jQuery("#ct_my_quickpick").addClass("hidden");$("#ct_demo_charitable_giving").addClass("hidden");$("#ct_demo_marketclarity_panels").addClass("hidden");$("#ct_demo_marketstreet_panels").addClass("hidden");$("#ct_demo_focusmarket_panels").addClass("hidden");if(page.placeorder.order.ListType==entity.enums.DataSourceType.Compass&&page.placeorder.demoTabActive&&page.placeorder.demoTabActive=="9"){$("#ct_demo_selectall").addClass("hidden")}else{$("#ct_demo_selectall").removeClass("hidden")}$("#ct_demo_anico_mc_selectall").addClass("hidden");$("#ct_demo_anico_ms_selectall").addClass("hidden");$("#ct_demo_anico_fm_selectall").addClass("hidden");if(page.placeorder.currentDataSource==entity.enums.DataSourceType.Mobile_Consumer_Advertising){$("#ct_demo_phoneoption").addClass("hidden")}else{$("#ct_demo_phoneoption").removeClass("hidden")}switch(a){case entity.enums.DemoTab.DemoOptions:$("#ct_demo_panels").removeClass("hidden");if(!uc.demo.IsDemoLoaded){uc.demo.LoadDemoCategory();uc.demo.IsDemoLoaded=true}if(framework.common.IsRegisteredSite){jQuery("#ct_my_quickpick").removeClass("hidden")}break;case entity.enums.DemoTab.LifeStyle:$("#ct_demo_panels").removeClass("hidden");if(!uc.demo.IsLifeStyleLoaded){uc.demo.LoadLifeStypeCategory();uc.demo.IsLifeStyleLoaded=true}if(framework.common.IsRegisteredSite){jQuery("#ct_my_quickpick").removeClass("hidden")}break;case entity.enums.DemoTab.Propensities:$("#ct_demo_panels").removeClass("hidden");if(!uc.demo.IsPropensityLoaded){uc.demo.LoadPropensities();uc.demo.IsPropensityLoaded=true}if(framework.common.IsRegisteredSite){jQuery("#ct_my_quickpick").removeClass("hidden")}break;case entity.enums.DemoTab.QuickPicks:$("#ct_demo_quickpickup_panels").removeClass("hidden");if(!uc.demo.IsQuickPickupLoaded){uc.demo.LoadQuickPicks();uc.demo.IsQuickPickupLoaded=true}break;case entity.enums.DemoTab.BusinessQuickPicks:$("#ct_industry_panels").removeClass("hidden");uc.demo.LoadBusinessQuickPicks();if(framework.common.IsRegisteredSite){jQuery("#ct_my_quickpick").removeClass("hidden")}break;case entity.enums.DemoTab.BusinessType:$("#ct_industry_panels").removeClass("hidden");uc.demo.LoadIndustryTree();if(framework.common.IsRegisteredSite){jQuery("#ct_my_quickpick").removeClass("hidden")}break;case entity.enums.DemoTab.Suppression:$("#ct_suppression_panels").removeClass("hidden");$("#ct_demo_selectall").addClass("hidden");uc.demo.suppression.Init();break;case entity.enums.DemoTab.AutoSuggestion:$("#ct_demo_selectall").addClass("hidden");if(!uc.demo.IsSearchInited){uc.demo.autoSuggestionInit();uc.demo.IsSearchInited=true}break;case entity.enums.DemoTab.CharitableGiving:$("#ct_demo_charitable_giving").removeClass("hidden");if(!uc.demo.IsCharitableGivingLoaded){uc.demo.LoadCharitableGivings();uc.demo.IsCharitableGivingLoaded=true}break;case entity.enums.DemoTab.MarketClarity:$("#ct_demo_marketclarity_panels").removeClass("hidden");$("#ct_demo_anico_mc_selectall").removeClass("hidden");$("#ct_demo_anico_ms_selectall").addClass("hidden");$("#ct_demo_anico_fm_selectall").addClass("hidden");$("#ct_demo_selectall").addClass("hidden");if(!uc.demo.IsMarketClarityLoaded){uc.demo.LoadMarketClarityQuickPicks();uc.demo.IsMarketClarityLoaded=true}break;case entity.enums.DemoTab.MarketStreet:$("#ct_demo_marketstreet_panels").removeClass("hidden");$("#ct_demo_anico_ms_selectall").removeClass("hidden");$("#ct_demo_anico_mc_selectall").addClass("hidden");$("#ct_demo_anico_fm_selectall").addClass("hidden");$("#ct_demo_selectall").addClass("hidden");if(!uc.demo.IsMarketStreetLoaded){uc.demo.LoadMarketStreetQuickPicks();uc.demo.IsMarketStreetLoaded=true}break;case entity.enums.DemoTab.FocusMarket:$("#ct_demo_focusmarket_panels").removeClass("hidden");$("#ct_demo_anico_fm_selectall").removeClass("hidden");$("#ct_demo_anico_mc_selectall").addClass("hidden");$("#ct_demo_anico_ms_selectall").addClass("hidden");$("#ct_demo_selectall").addClass("hidden");if(!uc.demo.IsFocusMarketLoaded){uc.demo.LoadFocusMarketCategory();uc.demo.IsFocusMarketLoaded=true}break}},autoSuggestionInit:function(){$("#ct_autosuggestion_panels").removeClass("hidden");$(".as-original").removeClass("hidden");$(".as-values").val("");$("#demo_search_result_select").css("width",$("#demo_search_result_div").outerWidth());var c=page.placeorder.order;var a=c.ListType;var b="";b="&ListType="+a;$("#autosuggestion_input_area").html("");$("#autosuggestion_input_area").html('<input type="text" name="demo_autosuggestion_input" id="demo_autosuggestion_input" style="width:680px;" placeholder="Enter keyword to search" />');$("#demo_autosuggestion_input").autoSuggest("BA/DemoAutoSuggestion.ashx",{beforeRetrieve:uc.demo.mappingSpecialCharacters,isDuplicateSelection:uc.demo.isDuplicateSelection,activeClick:uc.demo.activeClick,clearKey:uc.demo.clearKey,validateMatchByServerSide:true,keyDelay:1000,queryParam:"Keyword",extraParams:b,selectedItemProp:"AttributeValueName",selectedValuesProp:"AttributeValue",searchObjProps:"AttributeValueName",startText:"",formatList:uc.demo.AutoSuggestionFormat,formatSelection:uc.demo.formatSelection,resultsComplete:uc.demo.AddHorizontalScroll,matchingResult:uc.demo.CheckMatchingResult})},AddHorizontalScroll:function(){framework.ui.showWaiting("demo_search_result",false);$("#demo_search_result_select").css("width","");$("#demo_search_result_appender").css("width","");uc.demo.InitSelect("demo_search_result_div","demo_search_result_appender","demo_search_result_select")},isDuplicateSelection:function(c){var d=$(c);var a=false;var b=$(".as-selections > .as-selection-item");b.each(function(e,g){var f=$(g);var h=f.attr("columnname");var i=f.attr("attributevalue");if(h==d.attr("columnname")&&i==d.attr("attributevalue")){a=true}});return a},activeClick:function(b){var a=false;var c=$(b);var d=c.attr("IsGroup")==1;a=!d;return a},clearKey:function(a){return false},mappingSpecialCharacters:function(c){var b=uc.demo.mappingChars;for(var e=0;e<b.length;e++){var a=b[e];var d=a.Key;var f=a.Value;c=c.replace(new RegExp(d,"gi"),f)}framework.ui.showWaiting("demo_search_result",true);return c},formatSelection:function(c,a){var b=$(a);b.attr("columnName",c.ColumnName);b.attr("attributeDesc",c.AttributeName);b.attr("attributeDesc",c.AttributeDesc);b.attr("attributeName",c.AttributeName);b.attr("attributeValue",c.AttributeValue);b.attr("AttributeValueName",c.AttributeValueName);b.attr("demoCategory",c.DemoCategory);b.attr("sortSeq",c.SortSeq)},AutoSuggestionFormat:function(c,a){var b=$(a);b.addClass("result-item");if(c.IsGroup){b.attr("columnName",c.ColumnName);b.attr("attributeDesc",c.AttributeDesc);b.attr("demoCategory",c.DemoCategory);b.attr("isGroup",1);b.addClass("result-item-group");b.css("display","list-item");b.css("background-color","#F3F3F3");b.html(c.AttributeName);b.css("cursor","default");return b}else{b.attr("columnName",c.ColumnName);b.attr("attributeDesc",c.AttributeDesc);b.attr("attributeValue",c.AttributeValue);b.attr("demoCategory",c.DemoCategory);b.attr("sortSeq",c.SortSeq);b.attr("isGroup",0);b.html("&nbsp;&nbsp;"+c.AttributeValueName);return b}},CheckMatchingResult:function(a){if(a>0){uc.demo.SetErrorMessage(false)}else{uc.demo.SetErrorMessage(true,"We could not find a matching result.")}},Click_Next:function(){var b=page.placeorder.order;uc.demo.addAutoSuggestionSelectedItem();b.OrderSelectedDemos=uc.demo.SelectsValue.SelectedDemos;page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);uc.demo.Save_Data();uc.demo.addPostSupPhone(b);var a=uc.demo.DoValidation(b);if(a){page.placeorder.TrackOrderPathGAEvent("Step 2 - Demo","Demo Next Button");uc.demo.ClearMinOrMaxValue();b.NextStep=entity.enums.OrderStep.PollCount;jQuery("#demo_phoneoption_errormsg").html("").addClass("hidden");jQuery("#ct_demo_phoneoption").removeClass("basic_color");uc.demo.SubmitOrder(b)}},addAutoSuggestionSelectedItem:function(){var c=$(".as-selections > .as-selection-item");for(var a=0;a<c.length;a++){var b=$(c[a]);uc.demo.SelectsValue.addDemo(b.attr("columnname"),b.attr("attributeName"),b.attr("attributeValue"),b.attr("AttributeValueName"),entity.enums.SelectedDemoType.Demography,b.attr("sortSeq"))}},addPostSupPhone:function(a){var d=$("#demo_po_records_sup_no");var c=$("input[name='demo-phoneoption-sup']:checked");if(c.length>0){if(a.OrderSelectedDemos!=undefined){for(var b=0;b<a.OrderSelectedDemos.length;b++){if(a.OrderSelectedDemos[b].ColumnName=="PostSupPhone"){a.OrderSelectedDemos[b].Values.splice(0,2)}}}if(a.PhoneOption==entity.enums.PhoneOption.PhoneNumberOnly){uc.demo.AddSupDemoCategory(d)}uc.demo.AddSupDemoCategory(c)}else{if(a.OrderSelectedDemos!=undefined){for(var b=0;b<a.OrderSelectedDemos.length;b++){if(a.OrderSelectedDemos[b].ColumnName=="PostSupPhone"){uc.demo.SelectsValue.SelectedDemos.splice(b,1)}}}}},AddSupDemoCategory:function(b){for(var a=0;a<b.length;a++){uc.demo.SelectsValue.addDemo("PostSupPhone","DNC Phone",b[a].value,b[a].attributes.attributevaluename.value,entity.enums.SelectedDemoType.PostSupPhone,"0")}},Click_Back:function(){page.placeorder.TrackOrderPathGAEvent("Step 2 - Demo","Demo Back Button");page.placeorder.GoBack()},DoValidation:function(a){uc.demo.SetErrorMessage(false);if(a.ListType==entity.enums.DataSourceType.Occupant){if(a.TargetOption==0){uc.demo.SetErrorMessage(true,"Please select at least one targeting option.");return false}if(a.RouteOption==0){uc.demo.SetErrorMessage(true,"Please select at least one route option.");return false}}else{if(page.placeorder.isMultiCount&&a.GeoType==entity.enums.GeoType.MultiCount){if(a.OrderGeos==null||(a.OrderGeos!=null&&a.OrderGeos.length<2)){uc.demo.SetErrorMessage(true,"Please select at least two saved counts.");return false}}if(a.DemoType!=entity.enums.DemoType.All){if(a.OrderSelectedDemos==null||a.OrderSelectedDemos.length==0){uc.demo.SetErrorMessage(true,"Please define your target audience.");return false}if(a.OrderSelectedDemos.length==1&&a.OrderSelectedDemos[0].ColumnName=="PostSupPhone"){uc.demo.SetErrorMessage(true,"Please define your target audience.");return false}}var b=new Date();var d=new Date(b.getFullYear()-1,b.getMonth(),b.getDay());if(a.SuppressionType==entity.enums.SuppressionType.DATE||a.SuppressionType==entity.enums.SuppressionType.DATE_CUSTOMORDERS||a.SuppressionType==entity.enums.SuppressionType.DATE_CUSTOMDATE){if(a.SuppressionStartDate==null||a.SuppressionEndDate==null||a.SuppressionStartDate<d||a.SuppressionStartDate>a.SuppressionEndDate){uc.demo.SetErrorMessage(true,"Please enter a valid suppression date range.");return false}if(a.SuppressionType==entity.enums.SuppressionType.DATE_CUSTOMORDERS){if(!a.AllCustomSuppressionChecked&&(a.CustomSuppressions==null||a.CustomSuppressions.length==0)){uc.demo.SetErrorMessage(true,"Please select at least one order for custom suppression.");return false}}if(a.SuppressionType==entity.enums.SuppressionType.DATE_CUSTOMDATE){if(a.CustomSuppressionStartDate==null||a.CustomSuppressionEndDate==null||a.CustomSuppressionStartDate<d||a.CustomSuppressionStartDate>a.CustomSuppressionEndDate){uc.demo.SetErrorMessage(true,"Please enter a valid custom suppression date range.");return false}}}else{if(a.SuppressionType==entity.enums.SuppressionType.ORDERLIST||a.SuppressionType==entity.enums.SuppressionType.ORDERLIST_CUSTOMORDERS||a.SuppressionType==entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE){if(!a.AllSuppressionChecked&&(a.OrderSuppressions==null||a.OrderSuppressions.length==0)){uc.demo.SetErrorMessage(true,"Please select at least one order for suppression.");return false}if(a.SuppressionType==entity.enums.SuppressionType.ORDERLIST_CUSTOMORDERS){if(!a.AllCustomSuppressionChecked&&(a.CustomSuppressions==null||a.CustomSuppressions.length==0)){uc.demo.SetErrorMessage(true,"Please select at least one order for custom suppression.");return false}}if(a.SuppressionType==entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE){if(a.CustomSuppressionStartDate==null||a.CustomSuppressionEndDate==null||a.CustomSuppressionStartDate<d||a.CustomSuppressionStartDate>a.CustomSuppressionEndDate){uc.demo.SetErrorMessage(true,"Please enter a valid custom suppression date range.");return false}}}else{if(a.SuppressionType==entity.enums.SuppressionType.CUSTOMDATE){if(a.CustomSuppressionStartDate==null||a.CustomSuppressionEndDate==null||a.CustomSuppressionStartDate<d||a.CustomSuppressionStartDate>a.CustomSuppressionEndDate){uc.demo.SetErrorMessage(true,"Please enter a valid custom suppression date range.");return false}}else{if(a.SuppressionType==entity.enums.SuppressionType.CUSTOMORDER){if(!a.AllCustomSuppressionChecked&&(a.CustomSuppressions==null||a.CustomSuppressions.length==0)){uc.demo.SetErrorMessage(true,"Please select at least one order for custom suppression.");return false}}}}}if(jQuery("#demo_suppression_checkbox_prior_order").is(":checked")){var e=jQuery("input[type='radio'][name='suppression-option']:checked");if(!e||e.length==0){uc.demo.SetErrorMessage(true,"Please select at least one order for suppression.");return false}}if(jQuery("#demo_suppression_checkbox_customer").is(":checked")){var c=jQuery("input[type='radio'][name='custom-suppression-option']:checked");if(!c||c.length==0){uc.demo.SetErrorMessage(true,"Please select at least one order for custom suppression.");return false}}if(a.PhoneOption==entity.enums.PhoneOption.None&&a.GeoType!=entity.enums.GeoType.MultiCount){jQuery("#demo_phoneoption_errormsg").html("Please select a phone option to continue.").removeClass("hidden");jQuery("#ct_demo_phoneoption").addClass("basic_color");var f=jQuery("#ct_demo_phoneoption").offset();window.scrollTo(f.left,f.top);return false}}return true},SubmitOrder:function(a){page.placeorder.originalOrder=a;framework.common.Ajax({url:"PlaceOrder.aspx/SubmitOrder",data:{order:a},success:function(b){if(b.ResultFlag==true){page.placeorder.order=b.DataSource;page.placeorder.order.NextStep=entity.enums.OrderStep.PollCount;page.placeorder.GoNext()}else{uc.demo.SetErrorMessage(true,"Sorry the count you have requested failed to process please go back and try again. If you are still experiencing a problem please call the number on the top right corner of the screen.");framework.common.LogClickEvent("Fail to submit order","Fail to submit order","fail to submit order")}},error:function(b){uc.demo.SetErrorMessage(true,"Sorry the count you have requested failed to process please go back and try again. If you are still experiencing a problem please call the number on the top right corner of the screen.");framework.common.LogClickEvent("Fail to submit order",jQuery.toJSON(a),b==null?"fail to submit order":b.responseText)},waitingElement:"ct_demo"})},Save_Data:function(){var b=page.placeorder.order;if(b.ListType==entity.enums.DataSourceType.Occupant){b.TargetOption=0;arr=jQuery("input[type='checkbox'][name='chkTargetingOption']:checked");arr.each(function(){b.TargetOption+=Number(this.value)});b.RouteOption=0;arr=jQuery("input[type='checkbox'][name='chkRouteOption']:checked");arr.each(function(){b.RouteOption+=Number(this.value)});b.ContactNameOption=jQuery("input[type='checkbox'][name='chkIncludeContactNames']")[0].checked?1:0}else{b.DemoType=jQuery("#demo_selectall")[0].checked?entity.enums.DemoType.All:entity.enums.DemoType.Standard;if(jQuery("input[type='radio'][name='demo-phoneoption']:checked").length>0){b.PhoneOption=jQuery("input[type='radio'][name='demo-phoneoption']:checked").val()}if(b.PhoneOption=="1"){b.PhoneOptionDesc="No Phones"}else{if(b.PhoneOption=="2"){b.PhoneOptionDesc="Phones Where Available"}else{if(b.PhoneOption=="3"){b.PhoneOptionDesc="Only Records With Phones"}}}var c;var g=jQuery("#demo_suppression_checkbox_prior_order");if(g.is(":checked")){c=jQuery("input[type='radio'][name='suppression-option']:checked").val()}var d;var a=jQuery("#demo_suppression_checkbox_customer");if(a.is(":checked")){d=jQuery("input[type='radio'][name='custom-suppression-option']:checked").val()}var i;var j=jQuery("#demo_suppression_checkbox_save_count");if(j.is(":checked")){i=jQuery("input[type='radio'][name='save-count-suppression-option']:checked").val()}var f=entity.enums.SuppressionType.NONE;if(c==entity.enums.SuppressionType.DATE){if(d==entity.enums.SuppressionType.CUSTOMORDER){if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){f=entity.enums.SuppressionType.DATE_CORDER_SORDER}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){f=entity.enums.SuppressionType.DATE_CORDER_SDATE}else{f=entity.enums.SuppressionType.DATE_CUSTOMORDERS}}}else{if(d==entity.enums.SuppressionType.CUSTOMDATE){if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){f=entity.enums.SuppressionType.DATE_CDATE_SORDER}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){f=entity.enums.SuppressionType.DATE_CDATE_SDATE}else{f=entity.enums.SuppressionType.DATE_CUSTOMDATE}}}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){f=entity.enums.SuppressionType.DATE_SAVEDCOUNTORDER}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){f=entity.enums.SuppressionType.DATE_SAVEDCOUNTDATA}else{f=entity.enums.SuppressionType.DATE}}}}}else{if(c==entity.enums.SuppressionType.ORDERLIST){if(d==entity.enums.SuppressionType.CUSTOMORDER){if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){f=entity.enums.SuppressionType.OL_CORDER_SORDER}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){f=entity.enums.SuppressionType.OL_CORDER_SDATE}else{f=entity.enums.SuppressionType.ORDERLIST_CUSTOMORDERS}}}else{if(d==entity.enums.SuppressionType.CUSTOMDATE){if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){f=entity.enums.SuppressionType.OL_CDATE_SORDER}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){f=entity.enums.SuppressionType.OL_CDATE_SDATE}else{f=entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE}}}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){f=entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTORDER}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){f=entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTDATA}else{f=entity.enums.SuppressionType.ORDERLIST}}}}}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTDATA){if(d==entity.enums.SuppressionType.CUSTOMORDER){f=entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMORDERS}else{if(d==entity.enums.SuppressionType.CUSTOMDATE){f=entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMDATE}else{f=entity.enums.SuppressionType.SAVEDCOUNTDATA}}}else{if(i==entity.enums.SuppressionType.SAVEDCOUNTORDER){if(d==entity.enums.SuppressionType.CUSTOMORDER){f=entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMORDERS}else{if(d==entity.enums.SuppressionType.CUSTOMDATE){f=entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMDATE}else{f=entity.enums.SuppressionType.SAVEDCOUNTORDER}}}else{if(d==entity.enums.SuppressionType.CUSTOMORDER){f=entity.enums.SuppressionType.CUSTOMORDER}else{if(d==entity.enums.SuppressionType.CUSTOMDATE){f=entity.enums.SuppressionType.CUSTOMDATE}else{f=entity.enums.SuppressionType.NONE}}}}}}b.SuppressionType=f;if(f==entity.enums.SuppressionType.DATE||f==entity.enums.SuppressionType.DATE_CUSTOMORDERS||f==entity.enums.SuppressionType.DATE_CUSTOMDATE||f==entity.enums.SuppressionType.DATE_SAVEDCOUNTDATA||f==entity.enums.SuppressionType.DATE_SAVEDCOUNTORDER||f==entity.enums.SuppressionType.DATE_CDATE_SDATE||f==entity.enums.SuppressionType.DATE_CDATE_SORDER||f==entity.enums.SuppressionType.DATE_CORDER_SDATE||f==entity.enums.SuppressionType.DATE_CORDER_SORDER){try{b.SuppressionStartDate=Date.fromString(jQuery("#demo_suppression_range_start").val());b.SuppressionEndDate=Date.fromString(jQuery("#demo_suppression_range_end").val())}catch(h){b.SuppressionStartDate=null;b.SuppressionEndDate=null}if(f==entity.enums.SuppressionType.DATE_CUSTOMDATE||f==entity.enums.SuppressionType.DATE_CDATE_SDATE||f==entity.enums.SuppressionType.DATE_CDATE_SORDER){try{b.CustomSuppressionStartDate=Date.fromString(jQuery("#custom_suppression_range_start").val());b.CustomSuppressionEndDate=Date.fromString(jQuery("#custom_suppression_range_end").val())}catch(h){b.CustomSuppressionStartDate=null;b.CustomSuppressionEndDate=null}}if(f==entity.enums.SuppressionType.DATE_SAVEDCOUNTDATA||f==entity.enums.SuppressionType.DATE_CDATE_SDATE||f==entity.enums.SuppressionType.DATE_CORDER_SDATE){try{b.SaveCountSuppressionStartDate=Date.fromString(jQuery("#save_count_suppression_range_start").val());b.SaveCountSuppressionEndDate=Date.fromString(jQuery("#save_count_suppression_range_end").val())}catch(h){b.SaveCountSuppressionStartDate=null;b.SaveCountSuppressionEndDate=null}}}if(f==entity.enums.SuppressionType.SAVEDCOUNTDATA||f==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMDATE||f==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMORDERS||f==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTDATA||f==entity.enums.SuppressionType.OL_CDATE_SDATE||f==entity.enums.SuppressionType.OL_CORDER_SDATE){try{b.SaveCountSuppressionStartDate=Date.fromString(jQuery("#save_count_suppression_range_start").val());b.SaveCountSuppressionEndDate=Date.fromString(jQuery("#save_count_suppression_range_end").val())}catch(h){b.SaveCountSuppressionStartDate=null;b.SaveCountSuppressionEndDate=null}if(f==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMDATE||f==entity.enums.SuppressionType.OL_CDATE_SDATE){try{b.CustomSuppressionStartDate=Date.fromString(jQuery("#custom_suppression_range_start").val());b.CustomSuppressionEndDate=Date.fromString(jQuery("#custom_suppression_range_end").val())}catch(h){b.CustomSuppressionStartDate=null;b.CustomSuppressionEndDate=null}}}if(f==entity.enums.SuppressionType.CUSTOMDATE||f==entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE||f==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMDATE||f==entity.enums.SuppressionType.OL_CDATE_SORDER){try{b.CustomSuppressionStartDate=Date.fromString(jQuery("#custom_suppression_range_start").val());b.CustomSuppressionEndDate=Date.fromString(jQuery("#custom_suppression_range_end").val())}catch(h){b.CustomSuppressionStartDate=null;b.CustomSuppressionEndDate=null}}}if(uc.demo.AllowCustomDomainSuppression()){b.SuppressionByDomain=jQuery("#suppression_by_domain")[0].checked?true:false}if(b.GeoType==entity.enums.GeoType.MultiCount&&b.OrderGeos!=null&&b.OrderGeos.length>0){b.DemoType=entity.enums.DemoType.All;b.PhoneOption="1";b.PhoneOptionDesc="No Phones"}},BindCategory:function(b,a){var d=a;var f="<option columntype='{0}' value='{1}' Title=\"{2}\" attributename=\"{2}\">{3} </option>";var e="";for(var c=0;c<d.length;c++){e=e+String.format(f,d[c].DemoInputtype,d[c].ColumnName,d[c].AttributeName,d[c].AttributeName,d[c].ValuesCount)}jQuery("#"+b).html(e);framework.common.iPad.refreshMask(b)},BindQuickPicks:function(b,g){var d=g;var f='<option isQuickPick = {0} Title="{1}" >{2}</option>';var e="";for(var c=0;c<d.length;c++){e=e+String.format(f,true,d[c].CategoryName,d[c].CategoryName)}var a=jQuery("#"+b).html()+e;jQuery("#"+b).html(a)},QuickPickupExisted:true,LifeStyleCategoryExisted:true,LifeStyleAndPickupChecked:false,ExistAudiencePropensity:true,CharitableGivingExisted:false,AnicoTabsExisted:false,CheckIfLifeStyleAndQuickpickExist:function(){var a=page.placeorder.order;if(!uc.demo.LifeStyleAndPickupChecked){framework.common.Ajax({url:"PlaceOrder.aspx/GetDemoOptionsAndQuickPickups",data:{listtype:a.ListType,demotype:2},success:function(b){if(b.ResultFlag==true){if(b.DataSource.LifeStyle.length>0){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='lifeStyleHeader']").removeClass("hidden");uc.demo.LifeStyleCategoryExisted=true}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='lifeStyleHeader']").addClass("hidden");uc.demo.LifeStyleCategoryExisted=false}if(b.DataSource.ExistQuickPicks){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='quickPickupHeader']").removeClass("hidden");uc.demo.QuickPickupExisted=true}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='quickPickupHeader']").addClass("hidden");uc.demo.QuickPickupExisted=false}if(b.DataSource.ExistAudiencePropensity){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liAudiencePropensity']").removeClass("hidden");uc.demo.ExistAudiencePropensity=true}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liAudiencePropensity']").addClass("hidden");uc.demo.ExistAudiencePropensity=false}if(b.DataSource.ExistCharitableGiving){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liCharitableGiving']").removeClass("hidden");uc.demo.CharitableGivingExisted=true}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liCharitableGiving']").addClass("hidden");uc.demo.CharitableGivingExisted=false}if(b.DataSource.ExistAnicoTabs){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketClarity']").removeClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketStreet']").removeClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liFocusMarket']").removeClass("hidden");uc.demo.AnicoTabsExisted=true}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketClarity']").addClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketStreet']").addClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liFocusMarket']").addClass("hidden");uc.demo.AnicoTabsExisted=false}}uc.demo.SetDemoTabs(a);uc.demo.LifeStyleAndPickupChecked=true;uc.demo.SetAllHouseHolds(b.DataSource.AllHouseholdSetting);uc.demo.SetPhoneOptions(b.DataSource.PhoneOptions);uc.demo.SetMappingChars(b.DataSource.PandoraMappingChars)},error:function(b){},waitingElement:"ct_demo"})}else{if(uc.demo.LifeStyleCategoryExisted){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='lifeStyleHeader']").removeClass("hidden")}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='lifeStyleHeader']").addClass("hidden")}if(uc.demo.QuickPickupExisted){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='quickPickupHeader']").removeClass("hidden")}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='quickPickupHeader']").addClass("hidden");uc.demo.QuickPickupExisted=false}if(uc.demo.ExistAudiencePropensity){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liAudiencePropensity']").removeClass("hidden")}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liAudiencePropensity']").addClass("hidden")}if(uc.demo.CharitableGivingExisted){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liCharitableGiving']").removeClass("hidden")}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liCharitableGiving']").addClass("hidden")}if(uc.demo.AnicoTabsExisted){$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketClarity']").removeClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketStreet']").removeClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liFocusMarket']").removeClass("hidden")}else{$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketClarity']").addClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liMarketStreet']").addClass("hidden");$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='liFocusMarket']").addClass("hidden")}uc.demo.SetDemoTabs(a)}},LoadLifeStyleValues:function(){uc.demo.LoadDemoCategoryValues("demo_lifestyle_category","demo_lifestyle_variables","demo_lifestyle_variables_input","demo_lifestyle_input_label")},LoadAllDemoCategory:function(){var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/GetAllDemoAttributesList",data:{listtype:a.ListType},success:function(b){if(b.ResultFlag==true){framework.ui.fillDropDownList({ElementId:"demo_all_category",DataSource:b.DataSource,ValueField:"CategoryId",TextField:"CategoryName",SelectValue:null})}$("#demo_all_category option").eq(0).attr("selected","selected");uc.demo.LoadAllDemoAttributes()},error:function(b){},waitingElement:"ct_demo_panels"})},LoadDemoCategorys:function(c,d,b,g,e,h){var f=page.placeorder.order;var a="ct_demo_panels";if(d==20){a="ct_demo_focusmarket_panels"}framework.common.Ajax({url:"PlaceOrder.aspx/GetDemoAttributesList",data:{listtype:f.ListType,demotype:d},success:function(i){if(i.ResultFlag==true){if(i.DataSource.isQP!=undefined&&i.DataSource.isQP){uc.demo.BindCategory(c,i.DataSource.demoAttrs);uc.demo.LoadDemoCategoryValues(c,b,g,e);if(h!=null){h.call()}uc.demo.BindQuickPicks(c,i.DataSource.demoQPAttrs);uc.demo.LoadDemoQuickPickItems(c,b)}else{uc.demo.BindCategory(c,i.DataSource);uc.demo.LoadDemoCategoryValues(c,b,g,e);if(h!=null){h.call()}}}},error:function(i){},waitingElement:a})},LoadDemoCategoryValues:function(e,b,g,d){var f=page.placeorder.order;var c=jQuery("#"+e).val();uc.demo.SetErrorMessage(false);if(String.IsNullOrEmpty(c)){jQuery("#"+b).html("");jQuery("#"+b).removeClass("hidden");jQuery("#"+g).addClass("hidden");return}var a="ct_demo_panels";if(e=="demo_focusmarket_category"){a="ct_demo_focusmarket_panels"}framework.common.Ajax({url:"PlaceOrder.aspx/GetDemoAttribute",data:{listtype:f.ListType,columnName:c},success:function(h){if(h.ResultFlag==true){switch(h.DataSource.DemoInputtype){case entity.enums.DemoInputType.Listbox:case entity.enums.DemoInputType.RadioSelectBox:jQuery("#"+g).addClass("hidden");jQuery("#"+b).removeClass("hidden");jQuery("#"+b).html("");framework.ui.fillDropDownList({ElementId:b,DataSource:h.DataSource.DemoValues,ValueField:"AttributeValue",TextField:"AttributeValueName",SelectValue:null,Attributes:{SortSeq:"SortSeq"}});break;case entity.enums.DemoInputType.InputDate:case entity.enums.DemoInputType.InputInteger:case entity.enums.DemoInputType.InputMonthyear:case entity.enums.DemoInputType.InputYear:case entity.enums.DemoInputType.InputMonth:case entity.enums.DemoInputType.InputString:jQuery("#"+b).addClass("hidden");jQuery("#"+g).removeClass("hidden");jQuery("#"+d).html(h.DataSource.DemoValues[0].AttributeValueDesc);jQuery("#"+g+' input[type="text"]').val("").attr("min",h.DataSource.MinValue||"").attr("max",h.DataSource.MaxValue||"").attr("demoinputtype",h.DataSource.DemoInputtype);if(h.DataSource.MaxValue!=null){jQuery("#demo_propensity_input_maxValue span").html(h.DataSource.MaxValue)}else{jQuery("#demo_propensity_input_maxValue span").html("X");jQuery("#demo_propensity_likely").removeClass("hidden")}validateRange=true;uc.demo.min=h.DataSource.MinValue;uc.demo.max=h.DataSource.MaxValue;uc.demo.SetInputBoxMask(h.DataSource.DemoInputtype,jQuery("#"+g+' input[type="text"]'));break}}},error:function(h){},waitingElement:a})},LoadPostSupPhone:function(){var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/IsPostSupPhoneByUserAndDatasource",data:{listtype:a.ListType},success:function(b){if(b.ResultFlag==true){jQuery("#demo_is_sup_phone").val(b.DataSource.isPostSupPhone);if(b.DataSource.isPostSupPhone){jQuery("[name='demo-phoneoption']").click(function(){var c=jQuery("[name='demo-phoneoption']:checked");jQuery(".demo_po_sup_checkbox").prop("checked",false);jQuery(".demo_checked").addClass("hidden");jQuery("[name='"+c.attr("id")+"']").removeClass("hidden")})}}}})},LoadDemoQuickPickItems:function(c,a){var d=page.placeorder.order;var b=jQuery("#"+c).val();uc.demo.SetErrorMessage(false);if(String.IsNullOrEmpty(b)){jQuery("#"+a).html("");jQuery("#"+a).removeClass("hidden");return}framework.common.Ajax({url:"PlaceOrder.aspx/GetQuickPickDemoAttribute",data:{listtype:d.ListType},success:function(e){if(e.ResultFlag==true){jQuery("#"+a).removeClass("hidden");jQuery("#"+a).html("");framework.ui.fillDropDownList({ElementId:a,DataSource:e.DataSource,ValueField:"QpId",TextField:"QpName",SelectValue:null})}},error:function(e){},waitingElement:"ct_demo_panels"})},LoadPropensityValues:function(){uc.demo.LoadDemoCategoryValues("demo_propensity","demo_propensity_variables","demo_propensity_variables_input","demo_propensity_input_label")},LoadAttributesValues:function(){if($("#demo_attributes option:selected").attr("isQuickPick")){uc.demo.LoadDemoQuickPickItems("demo_attributes","demo_attributes_variables")}else{uc.demo.LoadDemoCategoryValues("demo_attributes","demo_attributes_variables","demo_attributes_variables_input","demo_attributes_input_label")}},LoadLifeStyleAttributesValues:function(){uc.demo.LoadDemoCategoryValues("demo_attributes_ls","demo_attributes_variables_ls","demo_attributes_variables_input_ls","demo_attributes_input_label_ls")},LoadDemoValues:function(){uc.demo.LoadDemoCategoryValues("demo_options_category","demo_options_variables","demo_options_variables_input","demo_options_input_label")},LoadFocusMarketValues:function(){uc.demo.LoadDemoCategoryValues("demo_focusmarket_category","demo_focusmarket_variables","demo_focusmarket_variables_input","demo_focusmarket_input_label")},LoadPropensities:function(){$("#demo_propensity").css("width","");$("#demo_propensity_appender").css("width","");var a=$("#demo_propensity_category").val();uc.demo.LoadDemoCategorys("demo_propensity",a,"demo_propensity_variables","demo_propensity_variables_input","demo_propensity_input_label",function(){uc.demo.InitSelect("demo_propensity_div","demo_propensity_appender","demo_propensity")})},LoadDemoCategory:function(){$("#demo_options_category").css("width","");$("#demo_p_options_appender").css("width","");uc.demo.LoadDemoCategorys("demo_options_category",1,"demo_options_variables","demo_options_variables_input","demo_options_input_label",function(){uc.demo.InitSelect("demo_p_options_div","demo_p_options_appender","demo_options_category")})},LoadFocusMarketCategory:function(){$("#demo_focusmarket_category").css("width","");$("#demo_focusmarket_appender").css("width","");uc.demo.LoadDemoCategorys("demo_focusmarket_category",20,"demo_focusmarket_variables","demo_focusmarket_variables_input","demo_focusmarket_input_label",function(){uc.demo.InitSelect("demo_p_focusmarket_quickpickup_div","demo_focusmarket_appender","demo_focusmarket_category")})},LoadAllDemoAttributes:function(){$("#demo_all_category").css("width","");uc.demo.LoadDemoCategorys("demo_attributes",1,"demo_attributes_variables","demo_attributes_variables_input","demo_attributes_input_label",function(){uc.demo.InitSelect("demo_attributes_div","demo_p_options_appender","demo_attributes")})},LoadAllLifeStyleAttributes:function(){$("#demo_all_category_ls").css("width","");var a=$("#demo_all_category_ls").val();uc.demo.LoadDemoCategorys("demo_attributes_ls",a,"demo_attributes_variables_ls","demo_attributes_variables_input_ls","demo_attributes_input_label_ls",function(){uc.demo.InitSelect("demo_attributes_div_ls","demo_p_options_appender","demo_attributes_ls")})},LoadLifeStypeCategory:function(){$("#demo_lifestyle_category").css("width","");$("#demo_lifestyle_category_appender").css("width","");uc.demo.LoadDemoCategorys("demo_lifestyle_category",2,"demo_lifestyle_variables","demo_lifestyle_variables_input","demo_lifestyle_input_label",function(){uc.demo.InitSelect("demo_lifestyle_category_div","demo_lifestyle_category_appender","demo_lifestyle_category")})},LoadBusinessQuickPicks:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetBusinessQuickpicks",data:{listType:page.placeorder.order.ListType},success:function(a){if(a.ResultFlag==true){if(a.DataSource!=null&&a.DataSource.length>0){template="{#foreach $T as record} <span class='item'><span>{$T.record.Name}</span>&nbsp; <a href='javascript:void(0);' onclick='javascript:uc.demo.IndustryQuickPickup_AddClick(this); return false;' class='add' id='{$T.record.Id}' code='{$T.record.Code}' desc='{$T.record.Name}'>add</a></span>  {#/for}";var b=$("#demo_industry_qp_source");b.setTemplate(template);b.processTemplate(a.DataSource)}}},error:function(a){},waitingElement:"ct_industry_panels"})},SearchSICByKeyword:function(){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=jQuery("#tbKeyword").val();jQuery("#demo_industry_trees").addClass("hidden");jQuery("#demo_industry_search_result").addClass("hidden");uc.demo.SetErrorMessage(false,"");if(a==""){jQuery("#demo_industry_trees").removeClass("hidden");uc.demo.LoadIndustryTree();return}jQuery("#demo_industry_search_result").removeClass("hidden");framework.common.Ajax({url:"PlaceOrder.aspx/SearchSICByKeyword",data:{keyword:a,listType:page.placeorder.order.ListType},success:function(b){uc.demo.BindSICSearchResult(b)},error:function(b){},waitingElement:"demo_industry_tree_source"})},GetCurrentTab:function(){var a=$("#ct_demo_tabs").tabs("option","selected")},AddSearchDemoTarget:function(a,b,d,e,c){uc.demo.AddSearchDemoValue(a,b,d,e,c);uc.demo.BindSearchSelectedValues();uc.demo.BindSelectsValues()},RemoveSearchDemoOptions:function(){jQuery("#demo_search_selected option:selected").each(function(c,e){var a=$(this).attr("iscategory")=="1"?true:false;var d=$(this).attr("columnname");var b=$(this).attr("value");var f=$(this).attr("democategory");uc.demo.SelectsValue.removeDemo(a,d,b,f);uc.demo.SearchSelectsValue.removeDemo(a,d,b,f)});uc.demo.BindSearchSelectedValues();uc.demo.BindSelectsValues()},RemoveAllSearchDemoOptions:function(){jQuery("#demo_search_selected option").each(function(a,c){var b=$(this).attr("columnname");for(var a=0;a<uc.demo.SelectsValue.SelectedDemos.length;a++){if(b==uc.demo.SelectsValue.SelectedDemos[a].ColumnName){uc.demo.SelectsValue.SelectedDemos.splice(a,1)}}});uc.demo.SearchSelectsValue.SearchSelectedDemos=[];uc.demo.BindSearchSelectedValues();uc.demo.BindSelectsValues()},AddSearchDemoOptions:function(){jQuery("#demo_search_result option:selected").each(function(d,f){var c=$(this).attr("isgroup")=="1"?true:false;if(c){return}var a=jQuery(this).attr("columnname");var g=jQuery(this).attr("attributevalue");var h=jQuery(this).text().trim();var b=jQuery(this).attr("attributedesc");var e=jQuery(this).attr("sortseq");uc.demo.AddSearchDemoTarget(a,b,g,h,e)})},AddDemoToTarget:function(){var c=$("#ct_demo_tabs").tabs("option","selected");var a=$("#ct_demo_ul a");for(var b=0;b<a.length;b++){if(b==c){c=parseInt($(a[b]).attr("ord"));break}}if(c==entity.enums.DemoTab.DemoOptions){uc.demo.AddDemoValue("demo_options_category","demo_options_variables","demo_options_input_lower","demo_options_input_upper")}else{if(c==entity.enums.DemoTab.LifeStyle){uc.demo.AddDemoValue("demo_lifestyle_category","demo_lifestyle_variables","demo_lifestyle_input_lower","demo_lifestyle_input_upper")}else{if(c==entity.enums.DemoTab.Propensities){uc.demo.AddDemoValue("demo_propensity","demo_propensity_variables","demo_propensity_input_lower","demo_propensity_input_upper")}}}uc.demo.BindSelectsValues()},AddFocusMarketToTarget:function(){var a=jQuery("#demo_focusmarket_category").val();var b=jQuery("#demo_focusmarket_category option:selected");if(String.IsNullOrEmpty(a)){return}var d=b.attr("attributename");var c=Number(b.attr("columntype"));if(c==entity.enums.DemoInputType.Listbox){jQuery("#demo_focusmarket_variables option:selected").each(function(e,f){uc.demo.SelectsValue.addDemo(a,d,this.value,this.text,entity.enums.SelectedDemoType.FocusMarket,$(this).attr("sortseq"))})}uc.demo.BindSelectsValues()},FocusMarket_AddAllClick:function(){if(!uc.demo.IsFocusMarketLoadedAll){if(uc.demo.FocusMarketDemoValues.length>0){a()}else{framework.common.Ajax({url:"PlaceOrder.aspx/GetFocusMarketDemoAttribute",data:{},success:function(b){if(b.ResultFlag==true&&b.DataSource){uc.demo.FocusMarketDemoValues=b.DataSource;a()}},error:function(b){},waitingElement:"ct_demo_focusmarket_panels"})}}else{uc.demo.RemoveAllFocusMarketFromTarget()}function a(){uc.demo.IsFocusMarketLoadedAll=true;$("#ct_demo_anico_fm_selectall a").text("Remove All Focus Market Quick Pick");$("#ct_demo_anico_fm_selectall a").attr("title","Remove All Focus Market Quick Pick");for(var f=0;f<uc.demo.FocusMarketDemoValues.length;f++){var e=uc.demo.FocusMarketDemoValues[f].AttributeName;var c=uc.demo.FocusMarketDemoValues[f].ColumnName;for(var d=0;d<uc.demo.FocusMarketDemoValues[f].DemoValues.length;d++){var b=uc.demo.FocusMarketDemoValues[f].DemoValues[d].SortSeq;var g=uc.demo.FocusMarketDemoValues[f].DemoValues[d].AttributeValue;var h=uc.demo.FocusMarketDemoValues[f].DemoValues[d].AttributeValueName;uc.demo.SelectsValue.addDemo(c,e,g,h,entity.enums.SelectedDemoType.FocusMarket,b)}}uc.demo.BindSelectsValues()}},AddDemoValue:function(g,a,d,h){var b=jQuery("#"+g).val();var c=jQuery("#"+g+" option:selected");if(String.IsNullOrEmpty(b)){return}var f=c.attr("attributename");var e=Number(c.attr("columntype"));if(e==entity.enums.DemoInputType.Listbox){jQuery("#"+a+" option:selected").each(function(j,k){uc.demo.SelectsValue.addDemo(b,f,this.value,this.text,entity.enums.SelectedDemoType.Demography,$(this).attr("sortseq"))})}else{if(e==entity.enums.DemoInputType.RadioSelectBox){uc.demo.SetRadioSelectBox(a,b,f,entity.enums.SelectedDemoType.LifeStyle)}else{uc.demo.CheckAndGetInputValue(jQuery("#"+d),jQuery("#"+h),b,f,entity.enums.SelectedDemoType.Demography)}}},AddSearchDemoValue:function(a,b,d,e,c){uc.demo.SelectsValue.addDemo(a,b,d,e,entity.enums.SelectedDemoType.Demography,c);uc.demo.SearchSelectsValue.addDemo(a,b,d,e,entity.enums.SelectedDemoType.Demography,c)},SetRadioSelectBox:function(h,b,d,g){uc.demo.SetErrorMessage(false);var a=jQuery("#"+h+" option:selected");if(a.length>1){uc.demo.SetErrorMessage(true,"you can only choose one item.");return}var e=false;var f=new entity.SelectedDemoCategory();for(var c=0;c<uc.demo.SelectsValue.SelectedDemos.length;c++){if(uc.demo.SelectsValue.SelectedDemos[c].ColumnName==b&&uc.demo.SelectsValue.SelectedDemos[c].DemoCategoryType==g){f=uc.demo.SelectsValue.SelectedDemos[c];e=true;break}}if(e){if(f.Values.length>0){uc.demo.SetErrorMessage(true,"you can only choose one item,please delete the selected item to first.");return}}uc.demo.SelectsValue.addDemo(b,d,a[0].value,a[0].text,g,0)},SetInputBoxMask:function(a,b){switch(a){case entity.enums.DemoInputType.InputDate:b.setMask("99999999");break;case entity.enums.DemoInputType.InputInteger:b.setMask("99999999");break;case entity.enums.DemoInputType.InputMonthyear:b.setMask("999999");break;case entity.enums.DemoInputType.InputYear:b.setMask("9999");break;case entity.enums.DemoInputType.InputMonth:b.setMask("99");break;default:b.setMask("99999999");break}},GetInputedValue:function(d){var a={text:"",value:"",attributeValue:"",attributeName:"",message:"",isValid:true};var g=d.val();var e=Number(d.attr("demoinputtype"));switch(e){case entity.enums.DemoInputType.InputDate:if(g.length!=8){a.isValid=false;return a}var c=Number(g.substring(0,4));var f=Number(g.substring(4,6));var b=Number(g.substring(6,8));if(c<1000||c>9999||f<1||f>12||b<1||b>31){a.isValid=false;return a}a.text=g;a.value=new Date(c,f,b);a.attributeValue=a.text;a.attributeName=a.text;return a;case entity.enums.DemoInputType.InputInteger:a.text=g;a.value=Number(g);a.attributeValue=Number(g);a.attributeName=Number(g);return a;case entity.enums.DemoInputType.InputMonthyear:if(g.length!=6){a.isValid=false;return a}var f=Number(g.substring(0,2));var c=Number(g.substring(2,6));if(c<1000||c>9999||f<0||f>12){a.isValid=false;return a}a.text=g;a.value=Number(c+""+(f>=10?f:("0"+f)));a.attributeValue=a.value;a.attributeName=a.text;return a;case entity.enums.DemoInputType.InputYear:if(g.length!=4){a.isValid=false;return a}var c=Number(g);if(c<1000||c>9999){a.isValid=false;return a}a.text=g;a.value=Number(c);a.attributeValue=a.value;a.attributeName=a.text;return a;case entity.enums.DemoInputType.InputMonth:if(g.length!=2){a.isValid=false;return a}var f=Number(g);if(f<1||f>12){a.isValid=false;return a}a.text=g;a.value=Number(f);a.attributeValue=a.value;a.attributeName=a.text;return a;default:a.text=g;a.value=g;a.attributeValue=a.value;a.attributeName=a.text;break}},CheckAndGetInputValue:function(b,g,c,f,m){uc.demo.SetErrorMessage(false);var e=b.val();var k=g.val();var d=null;if(b.attr("min")!=""){d=Number(b.attr("min"))}var i=null;if(g.attr("max")!=""){i=Number(g.attr("max"))}var l=true;if(e==""){uc.demo.SetErrorMessage(true,"You must enter a lower value.");return}if(k==""){uc.demo.SetErrorMessage(true,"You must enter an upper value.");return}var j=uc.demo.GetInputedValue(b);if(!j.isValid){uc.demo.SetErrorMessage(true,"You must enter a valid lower value.");return}var h=uc.demo.GetInputedValue(g);if(!h.isValid){uc.demo.SetErrorMessage(true,"You must enter a valid upper value.");return}var e=j.value;var k=h.value;if(l){var a="";if(i!=null&&d!=null){if(i<e||d>e){uc.demo.SetErrorMessage(true,"Lower value must be between "+d+" and "+i);return}if(i<k||d>k){uc.demo.SetErrorMessage(true,"Upper value must be between "+d+" and "+i);return}}else{if(d!=null){if(d>e){uc.demo.SetErrorMessage(true,"Lower value must be greater than "+d);return}if(d>k){uc.demo.SetErrorMessage(true,"Upper value must be greater than "+d);return}}else{if(i!=null){if(i<e){uc.demo.SetErrorMessage(true,"Lower value must be less than "+i);return}if(i<k){uc.demo.SetErrorMessage(true,"Upper value must be less than "+i);return}}}}}if(e>k){uc.demo.SetErrorMessage(true,"Upper value must be greater than Lower value ");return}if(l){uc.demo.SelectsValue.addDemo(c,f,j.attributeValue+"~"+h.attributeValue,j.attributeName+" to "+h.attributeName,m)}},RemoveFromTarget:function(){jQuery("#demo_selections option:selected").each(function(c,e){var a=$(this).attr("iscategory")=="1"?true:false;var d=$(this).attr("columnname");var b=$(this).attr("value");var f=$(this).attr("democategory");uc.demo.SelectsValue.removeDemo(a,d,b,f)});uc.demo.BindSelectsValues()},RemoveFocusMarketFromTarget:function(){jQuery("#demo_focusmarket_selections option:selected").each(function(c,e){var a=$(this).attr("iscategory")=="1"?true:false;var d=$(this).attr("columnname");var b=$(this).attr("value");var f=$(this).attr("democategory");uc.demo.SelectsValue.removeDemo(a,d,b,f)});uc.demo.BindSelectsValues()},RemoveAllFromTarget:function(){uc.demo.SelectsValue.SelectedDemos=[];uc.demo.BindSelectsValues()},RemoveAllFocusMarketFromTarget:function(){uc.demo.IsFocusMarketLoadedAll=false;$("#ct_demo_anico_fm_selectall a").text("Add All Focus Market Quick Pick");$("#ct_demo_anico_fm_selectall a").attr("title","Add All Focus Market Quick Pick");jQuery("#demo_focusmarket_selections option").each(function(c,e){var a=$(this).attr("iscategory")=="1"?true:false;var d=$(this).attr("columnname");var b=$(this).attr("value");var f=$(this).attr("democategory");uc.demo.SelectsValue.removeDemo(a,d,b,f)});uc.demo.BindSelectsValues()},SetAllHouseHolds:function(a){if(a!=null){page.placeorder.AllHouseholdDesc=a;jQuery("#demo_selectall_label").html(page.placeorder.AllHouseholdDesc.SettingDesc);jQuery("#demo_selectall").attr("desc",page.placeorder.AllHouseholdDesc.SettingValue)}},SetAllHouseHoldsAndPhoneOption:function(a){if(page.placeorder.AllHouseholdDesc==null){framework.common.Ajax({url:"PlaceOrder.aspx/GetSelectAllTargetDesc",data:{listType:a},success:function(b){if(b.ResultFlag==true){page.placeorder.AllHouseholdDesc=b.DataSource;jQuery("#demo_selectall_label").html(page.placeorder.AllHouseholdDesc.SettingDesc);jQuery("#demo_selectall").attr("desc",page.placeorder.AllHouseholdDesc.SettingValue)}},error:function(b){framework.common.LogClickEvent(String.format("Fail to get all households option for list type {0}",a),"",b==null?"Fail to get all households option":b.responseText)}})}else{jQuery("#demo_selectall_label").html(page.placeorder.AllHouseholdDesc.SettingDesc);jQuery("#demo_selectall").attr("desc",page.placeorder.AllHouseholdDesc.SettingValue)}},AllHouseholds_Click:function(){var a=jQuery("#demo_selectall")[0].checked?entity.enums.DemoType.All:entity.enums.DemoType.Standard;page.placeorder.order.DemoType=a;uc.demo.BindSelectsValues();if(a==entity.enums.DemoType.All){jQuery("#ct_demo_panels [group='standarddemo']").attr("disabled",true);jQuery("#ct_demo_panels a[group='standarddemo']").addClass("hidden");jQuery("#tbKeyword").attr("disabled",true)}else{jQuery("#ct_demo_panels [group='standarddemo']").removeAttr("disabled");jQuery("#ct_demo_panels a[group='standarddemo']").removeClass("hidden");jQuery("#tbKeyword").removeAttr("disabled")}},BindSelectsValues:function(){var c=page.placeorder.order;if(c.DemoType==entity.enums.DemoType.All){jQuery("#demo_selectall")[0].checked=true;var b=jQuery("#demo_selectall").attr("desc");var a=String.format("<option>{0}</option>",b);jQuery("#demo_selections").html(a);jQuery("#demo_industry_tree_target").html(a);jQuery("#demo_industry_tree_omit").html("");jQuery("#demo_industry_qp_selected").html("");jQuery("#demo_qp_selected").html("");jQuery("#demo_cg_selected").html("");uc.demo.BindMarketClarity();uc.demo.BindMarketStreet();uc.demo.BindFocusMarketOption()}else{jQuery("#demo_selectall")[0].checked=false;uc.demo.BindDemoOption();uc.demo.BindIndustry(entity.enums.SelectedDemoType.Industry);uc.demo.BindIndustry(entity.enums.SelectedDemoType.IndustryOmit);uc.demo.BindIndustryQuickPickup();uc.demo.BindQuickPickup();uc.demo.BindCharitableGiving();uc.demo.BindMarketClarity();uc.demo.BindMarketStreet();uc.demo.BindFocusMarketOption()}},SanNumberPhone:function(){$.fn.colorbox({href:String.format("{0}/help/SanNumberPhone.htm",framework.common.SiteRootPath),iframe:true,width:600,height:300,opacity:0.5,scrolling:false});return false},BindSearchSelectedValues:function(){framework.common.sortJson(uc.demo.SearchSelectsValue.SearchSelectedDemos,"AttributeName","asc");var c=uc.demo.SearchSelectsValue.SearchSelectedDemos;var e="<option value='{0}' columnname='{1}' democategory='{2}' iscategory='{3}' style='font-weight:{5}'>{4}</option>";var d="";for(var b=0;b<c.length;b++){if(c[b].DemoCategoryType==entity.enums.SelectedDemoType.Demography||c[b].DemoCategoryType==entity.enums.SelectedDemoType.LifeStyle){d=d+String.format(e,c[b].ColumnName,c[b].ColumnName,c[b].DemoCategoryType,"1",c[b].AttributeName,"bold");framework.common.sortJson(c[b].Values,"AttributeValue","asc");for(var a=0;a<c[b].Values.length;a++){d=d+String.format(e,c[b].Values[a].AttributeValue,c[b].ColumnName,c[b].DemoCategoryType,"0","&nbsp;&nbsp;"+c[b].Values[a].AttributeValueName,"normal")}}}jQuery("#demo_search_select_box").html(d);framework.common.iPad.refreshMask("demo_search_select_box")},BindDemoOption:function(){framework.common.sortJson(uc.demo.SelectsValue.SelectedDemos,"AttributeName","asc");var c=uc.demo.SelectsValue.SelectedDemos;var e="<option value='{0}' columnname='{1}' democategory='{2}' iscategory='{3}' style='font-weight:{5}'>{4}</option>";var d="";for(var b=0;b<c.length;b++){if(c[b].DemoCategoryType==entity.enums.SelectedDemoType.Demography||c[b].DemoCategoryType==entity.enums.SelectedDemoType.LifeStyle){d=d+String.format(e,c[b].ColumnName,c[b].ColumnName,c[b].DemoCategoryType,"1",c[b].AttributeName,"bold");framework.common.sortJson(c[b].Values,"AttributeValue","asc");for(var a=0;a<c[b].Values.length;a++){d=d+String.format(e,c[b].Values[a].AttributeValue,c[b].ColumnName,c[b].DemoCategoryType,"0","&nbsp;&nbsp;"+c[b].Values[a].AttributeValueName,"normal")}}}jQuery("#demo_selections").html(d);framework.common.iPad.refreshMask("demo_selections")},BindFocusMarketOption:function(){framework.common.sortJson(uc.demo.SelectsValue.SelectedDemos,"AttributeName","asc");var c=uc.demo.SelectsValue.SelectedDemos;var e="<option value='{0}' columnname='{1}' democategory='{2}' iscategory='{3}' style='font-weight:{5}'>{4}</option>";var d="";for(var b=0;b<c.length;b++){if(c[b].DemoCategoryType==entity.enums.SelectedDemoType.FocusMarket){d=d+String.format(e,c[b].ColumnName,c[b].ColumnName,c[b].DemoCategoryType,"1",c[b].AttributeName,"bold");framework.common.sortJson(c[b].Values,"SortSeq","asc");for(var a=0;a<c[b].Values.length;a++){d=d+String.format(e,c[b].Values[a].AttributeValue,c[b].ColumnName,c[b].DemoCategoryType,"0","&nbsp;&nbsp;"+c[b].Values[a].AttributeValueName,"normal")}}}jQuery("#demo_focusmarket_selections").html(d);framework.common.iPad.refreshMask("demo_focusmarket_selections")},BindIndustry:function(g){var c=[];var d="#demo_industry_tree_target";if(g==entity.enums.SelectedDemoType.Industry){c=uc.demo.SelectsValue.GetAddedIndustries();d="#demo_industry_tree_target"}else{if(g==entity.enums.SelectedDemoType.IndustryOmit){c=uc.demo.SelectsValue.GetOmitIndustires();d="#demo_industry_tree_omit"}}var f="<span class='item'><span>{0}:{1}</span>&nbsp;<a value='{0}' columnname='{2}' democategory='{3}' href='javascript:void(0);' onclick=\"javascript:uc.demo.Industry_RemoveClick(this)\">Remove</a></span>";var e="";for(var b=0;b<c.length;b++){e+=String.format("<span class='header'>{0}</span>",c[b].AttributeName);framework.common.sortJson(c[b].Values,"AttributeValue","asc");for(var a=0;a<c[b].Values.length;a++){e+=String.format(f,c[b].Values[a].AttributeValue,c[b].Values[a].AttributeValueName,c[b].ColumnName,c[b].DemoCategoryType)}}jQuery(d).html(e)},BindIndustryQuickPickup:function(){var c=uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.IndustryQuickPickup);var d="#demo_industry_qp_selected";var f="<span class='item'><span>{0}</span>&nbsp;<a code='{1}' href='javascript:void(0);' onclick=\"javascript:uc.demo.IndustryQuickPickup_RemoveClick(this); return false;\">Remove</a></span>";var e="";for(var b=0;b<c.length;b++){framework.common.sortJson(c[b].Values,"AttributeValueName","asc");for(var a=0;a<c[b].Values.length;a++){e+=String.format(f,c[b].Values[a].AttributeValueName,c[b].Values[a].AttributeValue)}}jQuery(d).html(e)},BindQuickPickup:function(){var a=uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.SiteQuickPickup);var e=uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.QuickPickup);var f=a.concat(e);var h="#demo_qp_selected";var k="<span class='item'><span>{0}</span>&nbsp;<a id='{1}' href='javascript:void(0);' onclick=\"javascript:uc.demo.QuickPickup_RemoveClick(this); return false;\">Remove</a></span>";var g="<span class='item'><span>{0}</span>&nbsp;<a id='{1}' href='javascript:void(0);' onclick=\"javascript:uc.demo.SiteQuickPickup_RemoveClick(this); return false;\">Remove</a></span>";var b="";for(var d=0;d<f.length;d++){framework.common.sortJson(f[d].Values,"AttributeValueName","asc");for(var c=0;c<f[d].Values.length;c++){b+=String.format(f[d].DemoCategoryType==entity.enums.SelectedDemoType.SiteQuickPickup?g:k,f[d].Values[c].AttributeValueName,f[d].Values[c].AttributeValue)}}jQuery(h).html(b)},BindCharitableGiving:function(){var d=uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.CharitableGiving);var c="#demo_cg_selected";var f="<span class='item'><span>{0}</span>&nbsp;<a id='{1}' href='javascript:void(0);' onclick=\"javascript:uc.demo.CharitableGiving_RemoveClick(this); return false;\">Remove</a></span>";var e="";for(var b=0;b<d.length;b++){framework.common.sortJson(d[b].Values,"AttributeValueName","asc");for(var a=0;a<d[b].Values.length;a++){e+=String.format(f,d[b].Values[a].AttributeValueName,d[b].Values[a].AttributeValue)}}jQuery(c).html(e)},BindMarketClarity:function(){var d=uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.MarketClarity);var c="#demo_marketclarity_qp_selected";var f="<span class='item'><span>{0}</span>&nbsp;<a id='{1}' href='javascript:void(0);' onclick=\"javascript:uc.demo.MarketClarity_RemoveClick(this); return false;\">Remove</a></span>";var e="";for(var b=0;b<d.length;b++){framework.common.sortJson(d[b].Values,"AttributeValueName","asc");for(var a=0;a<d[b].Values.length;a++){e+=String.format(f,d[b].Values[a].AttributeValueName,d[b].Values[a].AttributeValue)}}jQuery(c).html(e)},BindMarketStreet:function(){var d=uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.MarketStreet);var c="#demo_marketstreet_qp_selected";var f="<span class='item'><span>{0}</span>&nbsp;<a id='{1}' href='javascript:void(0);' onclick=\"javascript:uc.demo.MarketStreet_RemoveClick(this); return false;\">Remove</a></span>";var e="";for(var b=0;b<d.length;b++){framework.common.sortJson(d[b].Values,"AttributeValueName","asc");for(var a=0;a<d[b].Values.length;a++){e+=String.format(f,d[b].Values[a].AttributeValueName,d[b].Values[a].AttributeValue)}}jQuery(c).html(e)},BindSICSearchResult:function(j){var d=j.DataSource;var a="<strong>{0}</strong>";var h="<span class='renderLink'>{0}:{3} <a href='javascript:void(0)' onclick='javascript:uc.demo.IndustryTree_AddClick(this);' class='add' code='{0}' desc='{1}' category='{2}'>add</a> <a href='javascript:void(0)' onclick='javascript:uc.demo.IndustryTree_OmitClick(this);' class='add'  code='{0}' desc='{1}'  category='{2}'>omit</a></span>";var c="";for(var e=0;e<d.length;e++){if(d[e].IndustryCode==""){c+="<span class='resultGroup'>";c+=String.format(a,d[e].IndustryDesc);c+="</span>"}else{var f=jQuery("#tbKeyword").val();var b=new RegExp("("+f+")","gi");var g=d[e].IndustryDesc.replace(b,"<span class='keyword'>$1</span>");c+=String.format(h,d[e].IndustryCode,d[e].IndustryDesc,d[e].TopLevelIndustryCode,g)}}jQuery("#demo_industry_search_result").html(c)},SelectsValue:{SelectedDemos:[],SelectedIndustries:[],addDemo:function(h,c,f,a,k,d){var b=new entity.SelectedDemoCategory();var g=false;for(var e=0;e<uc.demo.SelectsValue.SelectedDemos.length;e++){if(uc.demo.SelectsValue.SelectedDemos[e].ColumnName==h&&uc.demo.SelectsValue.SelectedDemos[e].DemoCategoryType==k){b=uc.demo.SelectsValue.SelectedDemos[e];g=true;break}}b.ColumnName=h;b.AttributeName=c;b.DemoCategoryType=k;var j=d||0;b.addValue(f,a,j);if(!g){uc.demo.SelectsValue.SelectedDemos.push(b);framework.common.sortJson(uc.demo.SelectsValue.SelectedDemos,"AttributeName","asc")}},removeDemo:function(a,c,b,d){uc.demo.SelectsValue.SelectedDemos=$.grep(uc.demo.SelectsValue.SelectedDemos,function(e){if(e.ColumnName==c&&e.DemoCategoryType==d){if(a){return false}else{e.removeValue(b);if(e.Values.length==0){return false}}}return true})},GetSelectedDemoByType:function(c){var a=[];for(var b=0;b<uc.demo.SelectsValue.SelectedDemos.length;b++){if(uc.demo.SelectsValue.SelectedDemos[b].DemoCategoryType==c){a.push(uc.demo.SelectsValue.SelectedDemos[b])}}return a},GetAddedIndustries:function(){return uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.Industry)},GetOmitIndustires:function(){return uc.demo.SelectsValue.GetSelectedDemoByType(entity.enums.SelectedDemoType.IndustryOmit)},RemoveByCategoryType:function(a){uc.demo.SelectsValue.SelectedDemos=$.grep(uc.demo.SelectsValue.SelectedDemos,function(b){return b.DemoCategoryType!=a})}},SearchSelectsValue:{SearchSelectedDemos:[],addDemo:function(h,c,f,a,k,d){var b=new entity.SelectedDemoCategory();var g=false;for(var e=0;e<uc.demo.SearchSelectsValue.SearchSelectedDemos.length;e++){if(uc.demo.SearchSelectsValue.SearchSelectedDemos[e].ColumnName==h&&uc.demo.SearchSelectsValue.SearchSelectedDemos[e].DemoCategoryType==k){b=uc.demo.SearchSelectsValue.SearchSelectedDemos[e];g=true;break}}b.ColumnName=h;b.AttributeName=c;b.DemoCategoryType=k;var j=d||0;b.addValue(f,a,j);if(!g){uc.demo.SearchSelectsValue.SearchSelectedDemos.push(b);framework.common.sortJson(uc.demo.SearchSelectsValue.SearchSelectedDemos,"AttributeName","asc")}},removeDemo:function(a,c,b,d){uc.demo.SearchSelectsValue.SearchSelectedDemos=$.grep(uc.demo.SearchSelectsValue.SearchSelectedDemos,function(e){if(e.ColumnName==c&&e.DemoCategoryType==d){if(a){return false}else{e.removeValue(b);if(e.Values.length==0){return false}}}return true})}},LoadIndustryTree:function(){$("#demo_industry_trees").tree({data:{type:"json",async:true,opts:{async:true,method:"POST",dataType:"json",url:"PlaceOrder.aspx/GetChildrenBySICCode"}},callback:{onload:function(a){a.settings.data.opts.static_value=false},beforedata:function(b,a){if(b==false){return jQuery.toJSON({id:"",listType:page.placeorder.order.ListType})}else{return jQuery.toJSON({id:$(b).attr("IndustryCode")||0,listType:page.placeorder.order.ListType})}},ondata:function(b,a){return b.d.DataSource}}})},IndustryTree_AddClick:function(b){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=$(b).attr("code");if(a.length<6&&page.placeorder.order.ListType==entity.enums.DataSourceType.InfoUSABusiness){framework.common.Ajax({url:"PlaceOrder.aspx/SearchSICByKeyword",data:{keyword:a,listType:page.placeorder.order.ListType},success:function(e){var g=e.DataSource;for(var f=1;f<g.length;f++){uc.demo.SelectsValue.addDemo(g[f].TopLevelIndustryCode,entity.lookup.TopIndustryLevels.getByCode(g[f].TopLevelIndustryCode).DisplayName,g[f].IndustryCode,g[f].IndustryDesc,entity.enums.SelectedDemoType.Industry)}uc.demo.BindSelectsValues()},error:function(e){},waitingElement:"demo_industry_tree_source"})}else{var d=$(b).attr("desc");var c=$(b).attr("category");uc.demo.SelectsValue.addDemo(c,entity.lookup.TopIndustryLevels.getByCode(c).DisplayName,a,d,entity.enums.SelectedDemoType.Industry);uc.demo.BindSelectsValues()}},IndustryTree_OmitClick:function(b){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=$(b).attr("code");if(a.length<6&&page.placeorder.order.ListType==entity.enums.DataSourceType.InfoUSABusiness){framework.common.Ajax({url:"PlaceOrder.aspx/SearchSICByKeyword",data:{keyword:a,listType:page.placeorder.order.ListType},success:function(f){var h=f.DataSource;for(var g=1;g<h.length;g++){uc.demo.SelectsValue.addDemo(h[g].TopLevelIndustryCode,entity.lookup.TopIndustryLevels.getByCode(h[g].TopLevelIndustryCode).DisplayName+" (Omit)",h[g].IndustryCode,h[g].IndustryDesc,entity.enums.SelectedDemoType.IndustryOmit)}uc.demo.BindSelectsValues()},error:function(f){},waitingElement:"demo_industry_tree_source"})}else{var e=$(b).attr("desc");var c=$(b).attr("category");var d=entity.lookup.TopIndustryLevels.getByCode(c).DisplayName+" (Omit)";uc.demo.SelectsValue.addDemo(c,d,a,e,entity.enums.SelectedDemoType.IndustryOmit);uc.demo.BindSelectsValues()}},Industry_RemoveClick:function(d){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=false;var c=$(d).attr("columnname");var b=$(d).attr("value");var e=$(d).attr("democategory");uc.demo.SelectsValue.removeDemo(a,c,b,e);uc.demo.BindSelectsValues()},ClearSelectedIndustries_Click:function(){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}uc.demo.SelectsValue.RemoveByCategoryType(entity.enums.SelectedDemoType.Industry);uc.demo.BindSelectsValues()},ClearOmitIndustries_Click:function(){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}uc.demo.SelectsValue.RemoveByCategoryType(entity.enums.SelectedDemoType.IndustryOmit);uc.demo.BindSelectsValues()},IndustryQuickPickup_AddClick:function(a){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var b=$(a).attr("code");var c=$(a).attr("desc");uc.demo.SelectsValue.addDemo(page.placeorder.BusinessShortcutsName,page.placeorder.BusinessShortcutsName,b,c,entity.enums.SelectedDemoType.IndustryQuickPickup);uc.demo.BindSelectsValues()},IndustryQuickPickup_RemoveClick:function(c){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=false;var b=$(c).attr("code");uc.demo.SelectsValue.removeDemo(a,page.placeorder.BusinessShortcutsName,b,entity.enums.SelectedDemoType.IndustryQuickPickup);uc.demo.BindSelectsValues()},AddIndustryByCode:function(b){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=jQuery("#tbKeyword").val();if(a==""){return}uc.demo.SetErrorMessage(false,"");framework.common.Ajax({url:"PlaceOrder.aspx/GetSICByCode",data:{siccode:a,listType:page.placeorder.order.ListType},success:function(c){var d=c.DataSource;if(d==null){uc.demo.SetErrorMessage(true,"You may only add or omit in this field with a valid numeric SIC Code.");return}var f;var e="";if(b){f=entity.enums.SelectedDemoType.IndustryOmit;e=" (Omit)"}else{f=entity.enums.SelectedDemoType.Industry}uc.demo.SelectsValue.addDemo(d.TopLevelIndustryCode,entity.lookup.TopIndustryLevels.getByCode(d.TopLevelIndustryCode).DisplayName+e,d.IndustryCode,d.IndustryDesc,f);uc.demo.BindSelectsValues()},error:function(c){},waitingElement:"ct_demo_panels"})},SetErrorMessage:function(b,c){var a=page.placeorder.order.ListType==entity.enums.DataSourceType.Occupant?"#demo_occupant_message_error":"#demo_message_error";if(page.placeorder.isMultiCount){a="#multi_save_count_message_error"}if(b){jQuery(a).removeClass("hidden").html(c)}else{jQuery(a).addClass("hidden").html("")}},ClearMinOrMaxValue:function(){jQuery('#demo_lifestyle_variables_input input[type="text"]').val("").removeAttr("min").removeAttr("max");jQuery('#demo_options_variables_input input[type="text"]').val("").removeAttr("min").removeAttr("max")},LoadQuickPicks:function(){var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/GetQuickPickups",data:{listType:a.ListType},success:function(b){if(b.ResultFlag==true){if(b.DataSource!=null&&b.DataSource.length>0){var c=$("#demo_qp_source");c.setTemplateElement("qp_source_template");c.processTemplate(b.DataSource)}else{$("#demo_qp_source").html("")}}},error:function(b){},waitingElement:"ct_demo_quickpickup_panels"})},LoadCharitableGivings:function(){var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/GetCharitableGivings",data:{listType:a.ListType},success:function(b){if(b.ResultFlag==true){if(b.DataSource!=null&&b.DataSource.length>0){var c=$("#demo_cg_source");c.setTemplateElement("demo_cg_source_tmpl");c.processTemplate(b.DataSource)}else{$("#demo_cg_source").html("")}}},error:function(b){},waitingElement:"ct_demo_charitable_giving"})},LoadMarketClarityQuickPicks:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetMarketClarityQuickPickups",data:{listType:page.placeorder.order.ListType},success:function(a){if(a.ResultFlag==true){if(a.DataSource!=null&&a.DataSource.length>0){uc.demo.MarketClarityQuickPicks=a.DataSource;var b=$("#demo_marketclarity_qp_source");b.setTemplateElement("demo_marketclarity_source_tmpl");b.processTemplate(a.DataSource)}else{$("#demo_marketclarity_qp_source").html("")}}},error:function(a){},waitingElement:"ct_demo_marketclarity_panels"})},LoadMarketStreetQuickPicks:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetMarketStreetQuickPickups",data:{listType:page.placeorder.order.ListType},success:function(a){if(a.ResultFlag==true){if(a.DataSource!=null&&a.DataSource.length>0){uc.demo.MarketStreetQuickPicks=a.DataSource;var b=$("#demo_marketstreet_qp_source");b.setTemplateElement("demo_marketstreet_source_tmpl");b.processTemplate(a.DataSource)}else{$("#demo_marketstreet_qp_source").html("")}}},error:function(a){},waitingElement:"ct_demo_marketstreet_panels"})},QuickPickup_AddClick:function(d){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var c=$("#demo_qp_selected").children(".item").length;if(page.placeorder.order.ListType==10&&c>0){uc.demo.SetErrorMessage(true,"you can only choose one item.");return false}var f=$(d).attr("id");var a=$(d).attr("qpType");var b=jQuery(d).attr("qpName");var e=$(d).attr("desc");if(a=="1"){uc.demo.SelectsValue.addDemo("Site Quick Pick","Site Quick Pick",f,b,entity.enums.SelectedDemoType.SiteQuickPickup,0)}else{uc.demo.SelectsValue.addDemo("Quick Pick","Quick Pick",f,b,entity.enums.SelectedDemoType.QuickPickup,0)}uc.demo.BindSelectsValues()},CharitableGiving_AddClick:function(d){if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var c=$("#demo_cg_selected").children(".item").length;if(page.placeorder.order.ListType==10&&c>0){uc.demo.SetErrorMessage(true,"you can only choose one item.");return false}var f=$(d).attr("id");var a=$(d).attr("qpType");var b=jQuery(d).attr("qpName");var e=$(d).attr("desc");uc.demo.SelectsValue.addDemo("Charitable Giving","Charitable Giving",f,b,entity.enums.SelectedDemoType.CharitableGiving,0);uc.demo.BindSelectsValues()},MarketClarity_AddClick:function(d){var c=$("#demo_marketclarity_qp_selected").children(".item").length;if(page.placeorder.order.ListType==10&&c>0){uc.demo.SetErrorMessage(true,"you can only choose one item.");return false}var f=$(d).attr("id");var a=$(d).attr("qpType");var b=jQuery(d).attr("qpName");var e=$(d).attr("desc");uc.demo.SelectsValue.addDemo("Market Clarity Quick Pick","Market Clarity Quick Pick",f,b,entity.enums.SelectedDemoType.MarketClarity,0);uc.demo.BindSelectsValues()},MarketClarity_AddAllClick:function(){if(!uc.demo.IsMarketClarityLoadedAll){uc.demo.IsMarketClarityLoadedAll=true;$("#ct_demo_anico_mc_selectall a").text("Remove All Market Clarity Quick Pick");$("#ct_demo_anico_mc_selectall a").attr("title","Remove All Market Clarity Quick Pick");for(var b=0;b<uc.demo.MarketClarityQuickPicks.length;b++){var c=uc.demo.MarketClarityQuickPicks[b].QpId.toString();var a=uc.demo.MarketClarityQuickPicks[b].QpName;uc.demo.SelectsValue.addDemo("Market Clarity Quick Pick","Market Clarity Quick Pick",c,a,entity.enums.SelectedDemoType.MarketClarity,0)}uc.demo.BindSelectsValues()}else{uc.demo.MarketClarity_RemoveAllClick()}},MarketStreet_AddClick:function(d){var c=$("#demo_marketclarity_qp_selected").children(".item").length;if(page.placeorder.order.ListType==10&&c>0){uc.demo.SetErrorMessage(true,"you can only choose one item.");return false}var f=$(d).attr("id");var a=$(d).attr("qpType");var b=jQuery(d).attr("qpName");var e=$(d).attr("desc");uc.demo.SelectsValue.addDemo("Market Street Quick Pick","Market Street Quick Pick",f,b,entity.enums.SelectedDemoType.MarketStreet,0);uc.demo.BindSelectsValues()},MarketStreet_AddAllClick:function(){if(!uc.demo.IsMarketStreetLoadedAll){uc.demo.IsMarketStreetLoadedAll=true;$("#ct_demo_anico_ms_selectall a").text("Remove All Market Street Quick Pick");$("#ct_demo_anico_ms_selectall a").attr("title","Remove All Market Street Quick Pick");for(var b=0;b<uc.demo.MarketStreetQuickPicks.length;b++){var c=uc.demo.MarketStreetQuickPicks[b].QpId.toString();var a=uc.demo.MarketStreetQuickPicks[b].QpName;uc.demo.SelectsValue.addDemo("Market Street Quick Pick","Market Street Quick Pick",c,a,entity.enums.SelectedDemoType.MarketStreet,0)}uc.demo.BindSelectsValues()}else{uc.demo.MarketStreet_RemoveAllClick()}},QuickPickup_RemoveClick:function(c){$("#demo_message_error").addClass("hidden");if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=false;var b=$(c).attr("id");uc.demo.SelectsValue.removeDemo(a,"Quick Pick",b,entity.enums.SelectedDemoType.QuickPickup);uc.demo.BindSelectsValues()},CharitableGiving_RemoveClick:function(c){$("#demo_message_error").addClass("hidden");if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=false;var b=$(c).attr("id");uc.demo.SelectsValue.removeDemo(a,"Charitable Giving",b,entity.enums.SelectedDemoType.CharitableGiving);uc.demo.BindSelectsValues()},MarketClarity_RemoveClick:function(c){$("#demo_message_error").addClass("hidden");var a=false;var b=$(c).attr("id");uc.demo.SelectsValue.removeDemo(a,"Market Clarity Quick Pick",b,entity.enums.SelectedDemoType.MarketClarity);uc.demo.BindSelectsValues()},MarketClarity_RemoveAllClick:function(){$("#demo_message_error").addClass("hidden");uc.demo.IsMarketClarityLoadedAll=false;$("#ct_demo_anico_mc_selectall a").text("Add All Market Clarity Quick Pick");$("#ct_demo_anico_mc_selectall a").attr("title","Add All Market Clarity Quick Pick");$("#demo_marketclarity_qp_selected a").each(function(b){var a=false;var c=$(this).attr("id");uc.demo.SelectsValue.removeDemo(a,"Market Clarity Quick Pick",c,entity.enums.SelectedDemoType.MarketClarity)});uc.demo.BindSelectsValues()},MarketStreet_RemoveClick:function(c){$("#demo_message_error").addClass("hidden");var a=false;var b=$(c).attr("id");uc.demo.SelectsValue.removeDemo(a,"Market Street Quick Pick",b,entity.enums.SelectedDemoType.MarketStreet);uc.demo.BindSelectsValues()},MarketStreet_RemoveAllClick:function(a){$("#demo_message_error").addClass("hidden");uc.demo.IsMarketStreetLoadedAll=false;$("#ct_demo_anico_ms_selectall a").text("Add All Market Street Quick Pick");$("#ct_demo_anico_ms_selectall a").attr("title","Add All Market Street Quick Pick");$("#demo_marketstreet_qp_selected a").each(function(c){var b=false;var d=$(this).attr("id");uc.demo.SelectsValue.removeDemo(b,"Market Street Quick Pick",d,entity.enums.SelectedDemoType.MarketStreet)});uc.demo.BindSelectsValues()},SiteQuickPickup_RemoveClick:function(c){$("#demo_message_error").addClass("hidden");if(page.placeorder.order.DemoType==entity.enums.DemoType.All){return}var a=false;var b=$(c).attr("id");uc.demo.SelectsValue.removeDemo(a,"Site Quick Pick",b,entity.enums.SelectedDemoType.SiteQuickPickup);uc.demo.BindSelectsValues()},ShowSaveAsMyQuickpick:function(){uc.demo.ShowMyQuickpickError(false,"");uc.demo.MyQuickpickSelectsValue.SelectedDemos=uc.demo.CloneSelectedDemos();uc.demo.BindMyAvailableOptions();uc.demo.BindMyTargetOptions();framework.ui.ShowDialog("saveAsMyQuickpick",{fixedOnScroll:true,appendForm:true,css:{cursor:"default",top:"15%",left:"30%",border:"0px solid #aaa"}})},AddQuickPickValue:function(a,b){jQuery("#"+b+" option:selected").each(function(c,d){uc.demo.SelectsValue.addDemo("Quick Pick","Quick Pick",this.value,this.text,entity.enums.SelectedDemoType.QuickPickup,0)})},currentFile:"",ShowUploadFile:function(){framework.ui.ShowDialog("UploadFile")},ShowUploadFileHelp:function(){framework.ui.ShowDialog("UploadFileHelp")},BindUploadFile:function(){$("#ErrorMessage").html("");$("#ErrorMessage").hide();$("#UploadFail").html("");$("#UploadFail").hide();$("#btn").hide();$("#cutomsupp_msg").html("");$("#cutomsupp_msg").hide();$("#cutomsupp_msg").addClass("hidden");uc.demo.currentFile="";var b=$("#btnSelect"),a;var c=new AjaxUpload(b,{action:"Common/ExcelUploader.ashx",autoSubmit:false,name:"myfile",responseType:"json",onChange:function(d,e){$("#ErrorMessage").html("");$("#UploadFail").html("");if(!(e&&/^(xls|xlsx)$/.test(e))){$("#UploadFail").html("We just accept Microsoft Excel (97 or newer).");$("#UploadFail").show();return false}$("#filename").attr("value",d)},onSubmit:function(d,e){$("#ErrorMessage").html("");$("#UploadFail").html("");$("#btn").hide();if($("#filename").attr("value")==""){$("#UploadFail").html("You must select a Microsoft Excel file(97 or newer).");$("#UploadFail").show();return false}else{if($("#userFileName").attr("value")==""){$("#UploadFail").html("You must input your file name.");$("#UploadFail").show();return false}else{if(!(e&&/^(xls|xlsx)$/.test(e))){$("#UploadFail").html("We just accept Microsoft Excel (97 or newer).");$("#UploadFail").show();return false}}}framework.ui.showWaiting("UploadFile",true);this.disable()},onComplete:function(e,d){$("#ErrorMessage").html("");$("#UploadFail").html("");window.clearInterval(a);this.enable();if(d.ResultFlag){uc.demo.currentFile=d.DataSource;uc.demo.currentFile.UserFileName=$("#userFileName").attr("value");uc.demo.GetRecord(d.DataSource)}else{$("#UploadFail").html(d.ResultMessage);$("#UploadFail").show()}framework.ui.showWaiting("UploadFile",false)}});return c},GetRecord:function(a){$("#ErrorMessage").html("");$("#ErrorMessage").hide();$("#UploadFail").html("");$("#UploadFail").hide();$("#btn").hide();$("#cutomsupp_msg").html("");$("#cutomsupp_msg").hide();var b=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/GetRecord",data:{filePath:a.TargetFile,type:1},success:function(c){if(c.ResultFlag){if(c.ResultMessage!=null){$("#UploadFail").html(c.ResultMessage);$("#UploadFail").show()}else{if(c.DataSource!=null){$("#SelectFile").hide();$("#filetable").setTemplateElement("listfilestable");$("#filetable").processTemplate(c.DataSource);$("#TipForSuccessfully").setTemplateElement("TipOfSuccessfully");$("#TipForSuccessfully").processTemplate(c.DataSource);$("#RecordDetails").show();$("#btn").show()}}}else{$("#UploadFail").html("").html(c.ResultMessage);$("#UploadFail").show()}},error:function(c){$("#UploadFail").html("Error occurred when getting file info, please try it later.");$("#UploadFail").show()}})},BackToUploadFile:function(){framework.ui.showWaiting("RecordDetails",true);$("#filename").attr("value","");$("#userFileName").attr("value","");$("#RecordDetails").hide();$("#btn").hide();framework.ui.showWaiting("RecordDetails",false);$("#SelectFile").show()},NextToUploadFile:function(){var a=page.placeorder.order;if(uc.demo.currentFile&&uc.demo.currentFile!=""){$("#cutomsupp_msg").html("");$("#cutomsupp_msg").hide();framework.common.Ajax({url:"PlaceOrder.aspx/ProcessCustomSuppressionFile",data:{listType:a.ListType,file:uc.demo.currentFile},success:function(b){$("#cutomsupp_msg").html("").html("We're loading your file for suppression. When it is ready, typically within 30 minutes, you will be alerted via email. You will then see this file in the 'Suppress Uploaded File' option when building your list.").removeClass("hidden");$("#cutomsupp_msg").show();framework.ui.CloseDialog()},error:function(b){}})}},ResetUploadFile:function(){$("#cutomsupp_msg").html("");$("#userFileName").attr("value","");$("#cutomsupp_msg").hide();$("#filename").attr("value","");$("#RecordDetails").hide();$("#btn").hide();$("#SelectFile").show()},BindMyAvailableOptions:function(a){var a=uc.demo.SelectsValue.SelectedDemos;this.BindOptions("myAvailableOptions",a)},BindMyTargetOptions:function(){var a=uc.demo.MyQuickpickSelectsValue.SelectedDemos;this.BindOptions("myTargetOptions",a)},BindOptions:function(a,e){var h="<option value='{0}' columnname='{1}' democategory='{2}' iscategory='{3}' attrname='{6}' sortseq='{7}' style='font-weight:{5}'>{4}</option>";var g="";for(var d=0;d<e.length;d++){if(e[d].DemoCategoryType!=entity.enums.SelectedDemoType.QuickPickup&&e[d].DemoCategoryType!=entity.enums.SelectedDemoType.SiteQuickPickup){g=g+String.format(h,e[d].ColumnName,e[d].ColumnName,e[d].DemoCategoryType,"1",e[d].AttributeName,"bold",e[d].AttributeName,d);var c=(e[d].DemoCategoryType==entity.enums.SelectedDemoType.Industry||e[d].DemoCategoryType==entity.enums.SelectedDemoType.IndustryOmit);for(var b=0;b<e[d].Values.length;b++){var f=c?(e[d].Values[b].AttributeValue+":"+e[d].Values[b].AttributeValueName):e[d].Values[b].AttributeValueName;g=g+String.format(h,e[d].Values[b].AttributeValue,e[d].ColumnName,e[d].DemoCategoryType,"0","&nbsp;&nbsp;"+f,"normal",e[d].Values[b].AttributeValueName,e[d].Values[b].SortSeq)}}}jQuery("#"+a).html(g);framework.common.iPad.refreshMask(a)},AddAvailableOptionsToTarget:function(){jQuery("#myAvailableOptions option:selected").each(function(d,g){var a=$(this).attr("iscategory")=="1"?true:false;var f=$(this).attr("columnname");var c=$(this).attr("value");var h=$(this).attr("democategory");var b=$(this).attr("attrname");var e=$(this).attr("sortseq");uc.demo.MyQuickpickSelectsValue.addDemo(a,f,c,b,h,e)});uc.demo.BindMyTargetOptions()},RemoveTargetOptions:function(){jQuery("#myTargetOptions option:selected").each(function(c,e){var a=$(this).attr("iscategory")=="1"?true:false;var d=$(this).attr("columnname");var b=$(this).attr("value");var f=$(this).attr("democategory");uc.demo.MyQuickpickSelectsValue.removeDemo(a,d,b,f)});uc.demo.BindMyTargetOptions()},RemoveAllTargetOptions:function(){uc.demo.MyQuickpickSelectsValue.SelectedDemos=[];uc.demo.BindMyTargetOptions()},CloneSelectedDemos:function(){var g=[];var f=null;var a=null;if(uc.demo.SelectsValue.SelectedDemos!=null){for(var c=0;c<uc.demo.SelectsValue.SelectedDemos.length;c++){var e=new entity.SelectedDemoCategory();f=uc.demo.SelectsValue.SelectedDemos[c];e.ColumnName=f.ColumnName;e.AttributeName=f.AttributeName;e.DemoCategoryType=f.DemoCategoryType;for(var b=0;b<f.Values.length;b++){var d=new entity.SelectedDemoCategoryValue();a=f.Values[b];d.ColumnName=a.ColumnName;d.AttributeValue=a.AttributeValue;d.AttributeValueName=a.AttributeValueName;d.SortSeq=a.SortSeq;e.Values.push(d)}g.push(e)}}return g},SaveAsMyQuickpick:function(){uc.demo.ShowMyQuickpickError(false,"");var a=jQuery("#myQuickpickName").val();if(String.IsNullOrEmpty(a)){uc.demo.ShowMyQuickpickError(true,"Please enter your quickpick name.");return false}if(uc.demo.MyQuickpickSelectsValue.SelectedDemos.length<1){uc.demo.ShowMyQuickpickError(true,"Please add quickpick criteria.");return false}var c=jQuery("#myQuickpickDesc").val();var b=page.placeorder.order.ListType;framework.common.Ajax({url:"PlaceOrder.aspx/SaveMyQuickpick",data:{quickPickName:a,quickPickDesc:c,listType:page.placeorder.order.ListType,targetOptions:uc.demo.MyQuickpickSelectsValue.SelectedDemos},success:function(d){var e="";if(d.ResultFlag){var f=page.placeorder.order;$("#ct_demo_tabs ul li"+uc.demo.listTypeMatch+"[id='quickPickupHeader']").removeClass("hidden");e=String.format("Your quickpick {0} has been saved and is available moving forward behind the QuickPicks tab.",a);uc.demo.LoadQuickPicks()}else{e=String.format("Your quickpick {0} fail to be saved, error detail is {1}",a,d.ResultMessage)}uc.demo.ShowMyQuickpickError(true,e)},error:function(d){uc.demo.ShowMyQuickpickError(true,"Fail to save your quickpick.")},waitingElement:"saveAsMyQuickpick"})},ShowMyQuickpickError:function(a,b){if(!a){jQuery("#myQuickpickError").addClass("hidden")}else{jQuery("#myQuickpickError").html(b);jQuery("#myQuickpickError").removeClass("hidden")}},MyQuickpickSelectsValue:{SelectedDemos:[],addDemo:function(j,h,g,a,l,d){var c=null;for(var e=0;e<uc.demo.SelectsValue.SelectedDemos.length;e++){if(uc.demo.SelectsValue.SelectedDemos[e].ColumnName==h&&uc.demo.SelectsValue.SelectedDemos[e].DemoCategoryType==l){c=uc.demo.SelectsValue.SelectedDemos[e];break}}if(c==null){return}var b=new entity.SelectedDemoCategory();var f=false;for(var e=0;e<uc.demo.MyQuickpickSelectsValue.SelectedDemos.length;e++){if(uc.demo.MyQuickpickSelectsValue.SelectedDemos[e].ColumnName==h&&uc.demo.MyQuickpickSelectsValue.SelectedDemos[e].DemoCategoryType==l){b=uc.demo.MyQuickpickSelectsValue.SelectedDemos[e];f=true;break}}b.ColumnName=c.ColumnName;b.AttributeName=c.AttributeName;b.DemoCategoryType=c.DemoCategoryType;if(j){uc.demo.MyQuickpickSelectsValue.cloneCategoryValues(c,b)}else{var k=d||0;b.addValue(g,a,k)}if(!f){uc.demo.MyQuickpickSelectsValue.SelectedDemos.push(b);framework.common.sortJson(uc.demo.MyQuickpickSelectsValue.SelectedDemos,"AttributeName","asc")}},cloneCategoryValues:function(b,d){for(var a=0;a<b.Values.length;a++){var c=new entity.SelectedDemoCategoryValue();availableDemoValue=b.Values[a];c.ColumnName=availableDemoValue.ColumnName;c.AttributeValue=availableDemoValue.AttributeValue;c.AttributeValueName=availableDemoValue.AttributeValueName;c.SortSeq=availableDemoValue.SortSeq;d.Values.push(c)}},removeDemo:function(a,c,b,d){uc.demo.MyQuickpickSelectsValue.SelectedDemos=$.grep(uc.demo.MyQuickpickSelectsValue.SelectedDemos,function(e){if(e.ColumnName==c&&e.DemoCategoryType==d){if(a){return false}else{e.removeValue(b);if(e.Values.length==0){return false}}}return true})},GetSelectedDemoByType:function(c){var a=[];for(var b=0;b<uc.demo.MyQuickpickSelectsValue.SelectedDemos.length;b++){if(uc.demo.MyQuickpickSelectsValue.SelectedDemos[b].DemoCategoryType==c){a.push(uc.demo.MyQuickpickSelectsValue.SelectedDemos[b])}}return a},RemoveByCategoryType:function(a){uc.demo.MyQuickpickSelectsValue.SelectedDemos=$.grep(uc.demo.MyQuickpickSelectsValue.SelectedDemos,function(b){return b.DemoCategoryType!=a})}},ShowMyQuickpick:function(b,c){uc.demo.SetErrorMessage(false);if(c){$("#qp_detail_info_title").text("Charitable Giving Information")}else{$("#qp_detail_info_title").text("My Quickpick Information")}var d=$(b).attr("qp");var a=$(b).attr("qpType");framework.common.Ajax({url:"PlaceOrder.aspx/GetQuickPickup",data:{id:d,qpType:a},success:function(e){if(e.ResultFlag){$("#myQuickPickupInfo").setTemplateElement("myQuickPickupDetailsTemplate");$("#myQuickPickupInfo").processTemplate(e.DataSource);if(c){$("#qp_detail_info_name").text("Name:");$("#qp_detail_info_desc").text("Desc:")}else{$("#qp_detail_info_name").text("Quickpick Name:");$("#qp_detail_info_desc").text("Quickpick Desc:")}framework.ui.ShowDialog("myQuickPickupDetails",{fixedOnScroll:true,appendForm:true,css:{cursor:"default",top:"15%",left:"30%",border:"0px solid #aaa"}})}else{uc.demo.SetErrorMessage(true,e.ResultMessage)}},error:function(e){uc.demo.SetErrorMessage(true,"Fail to check the quick pickup details.")},waitingElement:"ct_demo_quickpickup_panels"})},RemoveMyQuickpick:function(a){uc.demo.SetErrorMessage(false);if(!confirm("Are you sure to delete this quick pick?")){return false}var b=$(a).attr("qp");framework.common.Ajax({url:"PlaceOrder.aspx/RemoveQuickPick",data:{id:b},success:function(c){if(c.ResultFlag){uc.demo.LoadQuickPicks()}else{uc.demo.SetErrorMessage(true,"Fail to delete the quick pickup.")}},error:function(c){uc.demo.SetErrorMessage(true,"Fail to delete the quick pickup.")},waitingElement:"ct_demo_quickpickup_panels"})},LoadAllAudiencePropensity:function(){var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/LoadAllAudiencePropensity",data:{listtype:a.ListType},success:function(b){if(b.ResultFlag){$("#allAudiencePropensityInfo").setTemplateElement("allAudiencePropensityTemplate");$("#allAudiencePropensityInfo").processTemplate(b.DataSource)}else{uc.demo.SetErrorMessage(true,"Fail to load the audience propensity.")}},error:function(b){uc.demo.SetErrorMessage(true,"Fail to load the audience propensity.")},waitingElement:"allAudiencePropensity"});jQuery("#view_all_audience_propensity a").colorbox({inline:true,href:"#allAudiencePropensity",width:600,height:620,opacity:0.5,scrolling:true})}};uc.demo.suppression={pagingOptions:null,getPriorOrderSuppressionIntial:false,custom_pagingOptions:null,customSuppressionIntial:false,saveCount_pagingOptions:null,saveCountSuppressionIntial:false,Init:function(){if(page.placeorder.order.SuppressionByDomain){$("#suppression_by_domain").attr("checked",true)}else{$("#suppression_by_domain").removeAttr("checked")}if(uc.demo.AllowCustomDomainSuppression()){$("#demo_regular_suppression").addClass("hidden");$("#demo_domain_suppression").removeClass("hidden");$("#days_domain_suppression").text(page.placeorder.Days_DomainSuppression);return}else{$("#demo_regular_suppression").removeClass("hidden");$("#demo_domain_suppression").addClass("hidden")}var c=new Date();var e=c.getFullYear();var g=c.getMonth()+1;var d=c.getDate();var b=String.format("{0}/{1}/{2}",g,d+1,e-1);var f=String.format("{0}/{1}/{2}",g,d+1,e);$("#demo_suppression_range_start").datepicker({minDate:b,maxDate:f});$("#demo_suppression_range_end").datepicker({minDate:b,maxDate:f});$("#custom_suppression_range_start").datepicker({minDate:b,maxDate:f});$("#custom_suppression_range_end").datepicker({minDate:b,maxDate:f});$("#save_count_suppression_range_start").datepicker({minDate:b,maxDate:f});$("#save_count_suppression_range_end").datepicker({minDate:b,maxDate:f});$("#demo_suppression_range_start").css("float","left");$("#demo_suppression_range_end").css("float","left");$("#custom_suppression_range_start").css("float","left");$("#custom_suppression_range_end").css("float","left");$("#save_count_suppression_range_start").css("float","left");$("#save_count_suppression_range_end").css("float","left");$("#ui-datepicker-div").css("font-size","11px");uc.demo.suppression.pagingOptions=new entity.PagingOptions();uc.demo.suppression.pagingOptions.PageSize=12;uc.demo.suppression.pagingOptions.SortBy="OrderDate";uc.demo.suppression.custom_pagingOptions=new entity.PagingOptions();uc.demo.suppression.custom_pagingOptions.PageSize=12;uc.demo.suppression.custom_pagingOptions.SortBy="OrderDate";uc.demo.suppression.saveCount_pagingOptions=new entity.PagingOptions();uc.demo.suppression.saveCount_pagingOptions.PageSize=12;uc.demo.suppression.saveCount_pagingOptions.SortBy="OrderDate";var h=page.placeorder.order;var a=h.SuppressionType;if(a==entity.enums.SuppressionType.DATE||a==entity.enums.SuppressionType.ORDERLIST){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+a+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.CUSTOMORDER||a==entity.enums.SuppressionType.CUSTOMDATE){jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+a+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.SAVEDCOUNTORDER||a==entity.enums.SuppressionType.SAVEDCOUNTDATA){jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+a+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_CUSTOMORDERS){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_CUSTOMDATE){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.ORDERLIST_CUSTOMORDERS){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_SAVEDCOUNTORDER){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_SAVEDCOUNTDATA){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTORDER){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTDATA){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMORDERS){jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMDATE){jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMORDERS){jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMDATE){jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_CDATE_SDATE){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_CDATE_SORDER){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_CORDER_SDATE){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.DATE_CORDER_SORDER){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.DATE+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.OL_CDATE_SDATE){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMDATE+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.OL_CDATE_SORDER){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.OL_CORDER_SDATE){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTDATA+"']").attr("checked","checked")}else{if(a==entity.enums.SuppressionType.OL_CORDER_SORDER){jQuery("#demo_suppression_checkbox_prior_order").attr("checked","checked");uc.demo.suppression.PriorOrderSuppressionOption_Click();jQuery(":radio[name='suppression-option']").filter("[value='"+entity.enums.SuppressionType.ORDERLIST+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_save_count").attr("checked","checked");uc.demo.suppression.SavedListCountSuppressionOption_Click();jQuery(":radio[name='save-count-suppression-option']").filter("[value='"+entity.enums.SuppressionType.SAVEDCOUNTORDER+"']").attr("checked","checked");jQuery("#demo_suppression_checkbox_customer").attr("checked","checked");uc.demo.suppression.CustomerFileSuppressionOption_Click();jQuery(":radio[name='custom-suppression-option']").filter("[value='"+entity.enums.SuppressionType.CUSTOMORDER+"']").attr("checked","checked")}}}}}}}}}}}}}}}}}}}}}}}if(a==entity.enums.SuppressionType.DATE||a==entity.enums.SuppressionType.DATE_CUSTOMORDERS||a==entity.enums.SuppressionType.DATE_SAVEDCOUNTORDER||a==entity.enums.SuppressionType.DATE_CORDER_SORDER){if(h.SuppressionStartDate&&h.SuppressionEndDate){$("#demo_suppression_range_start").val(Ext.util.Format.date(h.SuppressionStartDate));$("#demo_suppression_range_end").val(Ext.util.Format.date(h.SuppressionEndDate));h.OrderSuppressions=[]}}if(a==entity.enums.SuppressionType.CUSTOMDATE||a==entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE||a==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMDATE||a==entity.enums.SuppressionType.OL_CDATE_SORDER){if(h.CustomSuppressionStartDate&&h.CustomSuppressionEndDate){$("#custom_suppression_range_start").val(Ext.util.Format.date(h.CustomSuppressionStartDate));$("#custom_suppression_range_end").val(Ext.util.Format.date(h.CustomSuppressionEndDate));h.CustomSuppressions=[]}}if(a==entity.enums.SuppressionType.SAVEDCOUNTDATA||a==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTDATA||a==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMORDERS||a==entity.enums.SuppressionType.OL_CORDER_SDATE){if(h.SaveCountSuppressionStartDate&&h.SaveCountSuppressionEndDate){$("#save_count_suppression_range_start").val(Ext.util.Format.date(h.SaveCountSuppressionStartDate));$("#save_count_suppression_range_end").val(Ext.util.Format.date(h.SaveCountSuppressionEndDate));h.SaveCountSuppressions=[]}}if(h.AllSuppressionChecked&&(a==entity.enums.SuppressionType.ORDERLIST||a==entity.enums.SuppressionType.ORDERLIST_CUSTOMDATE||a==entity.enums.SuppressionType.ORDERLIST_CUSTOMORDERS||a==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTORDER||a==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTDATA||a==entity.enums.SuppressionType.OL_CDATE_SDATE||a==entity.enums.SuppressionType.OL_CDATE_SORDER||a==entity.enums.SuppressionType.OL_CORDER_SDATE||a==entity.enums.SuppressionType.OL_CORDER_SORDER)){$("#suppression_addallbox").attr("checked","checked")}if(h.AllCustomSuppressionChecked&&(a==entity.enums.SuppressionType.CUSTOMORDER||a==entity.enums.SuppressionType.DATE_CUSTOMORDERS||a==entity.enums.SuppressionType.ORDERLIST_CUSTOMORDERS||a==entity.enums.SuppressionType.SAVEDCOUNTDATA_CUSTOMORDERS||a==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMORDERS||a==entity.enums.SuppressionType.DATE_CORDER_SDATE||a==entity.enums.SuppressionType.DATE_CORDER_SORDER||a==entity.enums.SuppressionType.OL_CORDER_SDATE||a==entity.enums.SuppressionType.OL_CORDER_SORDER)){$("#custom_addallbox").attr("checked","checked")}if(h.AllSaveCountSuppressionChecked&&(a==entity.enums.SuppressionType.SAVEDCOUNTORDER||a==entity.enums.SuppressionType.DATE_SAVEDCOUNTORDER||a==entity.enums.SuppressionType.ORDERLIST_SAVEDCOUNTORDER||a==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMORDERS||a==entity.enums.SuppressionType.SAVEDCOUNTORDER_CUSTOMDATE||a==entity.enums.SuppressionType.DATE_CDATE_SORDER||a==entity.enums.SuppressionType.DATE_CORDER_SORDER||a==entity.enums.SuppressionType.OL_CDATE_SORDER||a==entity.enums.SuppressionType.OL_CORDER_SORDER)){$("#save_count_suppression_addallbox").attr("checked","checked")}uc.demo.suppression.SuppressionOption_Click();uc.demo.suppression.GetSuppressionList();uc.demo.suppression.BindSelectedSuppressions();uc.demo.suppression.CustomSuppressionOption_Click();uc.demo.suppression.GetCustomSuppressions();uc.demo.suppression.BindSelectedCustomSuppressions();uc.demo.suppression.SaveCountSuppressionOption_Click();uc.demo.suppression.GetSaveCountSuppressionList();uc.demo.suppression.BindSelectedSaveCountSuppressions()},AutoLoadSuppression:function(){var a=page.placeorder.order.AccountId;framework.common.Ajax({url:"/PlaceOrder.aspx/GetSuppressionsByDatasource",data:{accountId:a,listType:page.placeorder.order.ListType},success:function(b){if(b.DataSource.isenable==false){$("#customsupp_pan").remove()}if(b.ResultFlag==true){page.placeorder.order.OrderSuppressions=b.DataSource.suppression;page.placeorder.order.SuppressionType=entity.enums.SuppressionType.ORDERLIST;uc.demo.suppression.BindSelectedSuppressions()}},error:function(b){uc.demo.SetErrorMessage(b)},waitingElement:"Landing_OrderHistory"})},GetCustomSuppressions:function(a){if(!uc.demo.suppression.customSuppressionIntial){if(a==null||a==window.undefined){a=uc.demo.suppression.custom_pagingOptions}framework.common.Ajax({url:"/PlaceOrder.aspx/GetCustomSuppressions",data:{listtype:page.placeorder.order.ListType,pagingOptions:a},success:function(b){if(b.ResultFlag==true){if(b.DataSource.Items!=null&&b.DataSource.Items.length>0){$("#myCustomOrders").setTemplateElement("customSuppressionTemplate");$("#myCustomOrders").processTemplate(b.DataSource.Items);uc.demo.suppression.custom_InitPagingBar(b.DataSource.TotalRecordCount)}else{jQuery("#custom_suppression_radio_list_panel").addClass("hidden")}uc.demo.suppression.customSuppressionIntial=true}else{uc.demo.SetErrorMessage(true,b.ResultMessage)}},error:function(b){uc.demo.SetErrorMessage(b)},waitingElement:"ct_suppression_panels"})}},SerachSuppressionList:function(){uc.demo.suppression.getPriorOrderSuppressionIntial=false;uc.demo.suppression.GetSuppressionList()},SerachCustomSuppressionList:function(){uc.demo.suppression.customSuppressionIntial=false;uc.demo.suppression.GetCustomSuppressions()},SerachSaveCountSuppressionList:function(){uc.demo.suppression.saveCountSuppressionIntial=false;uc.demo.suppression.GetSaveCountSuppressionList()},GetSuppressionList:function(c){if(!uc.demo.suppression.getPriorOrderSuppressionIntial){var d=page.placeorder.order.AccountId;if(d==null){d=0}var b=jQuery("#demo_suppression_search_ordername").val();var a=jQuery("#demo_suppression_search_ordernumber").val();if(c==null||c==window.undefined){c=uc.demo.suppression.pagingOptions}framework.common.Ajax({url:"/PlaceOrder.aspx/GetSuppressionList",data:{accountId:d,pagingOptions:c,listtype:page.placeorder.order.ListType,orderName:b,orderNumber:a},success:function(e){if(e.ResultFlag==true){$("#demo_suppression_order_list").setTemplateElement("demo_suppression_order_list_template");$("#demo_suppression_order_list").processTemplate(e.DataSource.Items);uc.demo.suppression.InitPagingBar(e.DataSource.TotalRecordCount);uc.demo.suppression.getPriorOrderSuppressionIntial=true}else{uc.demo.SetErrorMessage(true,e.ResultMessage)}},error:function(e){uc.demo.SetErrorMessage(e)},waitingElement:"ct_suppression_panels"})}},SearchOrder:function(b){var a=uc.demo.suppression.pagingOptions;var c=$(b).attr("sortexpression");if(a.SortBy==c){a.SortDescending=!a.SortDescending}else{a.SortDescending=true}a.SortBy=$(b).attr("sortexpression");uc.demo.suppression.getPriorOrderSuppressionIntial=false;uc.demo.suppression.GetSuppressionList(a)},pageselectCallback:function(a,c){var b=uc.demo.suppression.pagingOptions;b.PageNumber=a+1;uc.demo.suppression.getPriorOrderSuppressionIntial=false;uc.demo.suppression.GetSuppressionList(b)},_IsInitPagingBar:false,InitPagingBar:function(a){if(!uc.demo.suppression._IsInitPagingBar||uc.demo.suppression.pagingOptions.TotalRecordCount!=a){uc.demo.suppression._IsInitPagingBar=true;uc.demo.suppression.pagingOptions.TotalRecordCount=a;jQuery("#demo_suppression_pagination").pagination(a,{first_text:"First",prev_text:"Prev",next_text:"Next",last_text:"Last",ellipse_text:" ",num_edge_entries:2,num_display_entries:6,items_per_page:uc.demo.suppression.pagingOptions.PageSize,callback:uc.demo.suppression.pageselectCallback})}},custom_pageselectCallback:function(a,c){var b=uc.demo.suppression.pagingOptions;b.PageNumber=a+1;uc.demo.suppression.customSuppressionIntial=false;uc.demo.suppression.GetCustomSuppressions(b)},custom_IsInitPagingBar:false,custom_InitPagingBar:function(a){if(!uc.demo.suppression.custom_IsInitPagingBar||uc.demo.suppression.custom_pagingOptions.TotalRecordCount!=a){uc.demo.suppression.custom_IsInitPagingBar=true;uc.demo.suppression.custom_pagingOptions.TotalRecordCount=a;jQuery("#custom_suppression_pagination").pagination(a,{first_text:"First",prev_text:"Prev",next_text:"Next",last_text:"Last",ellipse_text:" ",num_edge_entries:2,num_display_entries:6,items_per_page:uc.demo.suppression.custom_pagingOptions.PageSize,callback:uc.demo.suppression.custom_pageselectCallback})}},GetSaveCountSuppressionList:function(b){if(!uc.demo.suppression.saveCountSuppressionIntial){var d=page.placeorder.order.AccountId;if(d==null){d=0}var c=jQuery("#save_count_suppression_search_name").val();var a=jQuery("#save_count_suppression_search_number").val();if(b==null||b==window.undefined){b=uc.demo.suppression.saveCount_pagingOptions}framework.common.Ajax({url:"PlaceOrder.aspx/GetSaveCountSuppressionList",data:{pagingOptions:b,accountId:d,listType:page.placeorder.order.ListType,countName:c,countNumber:a},success:function(e){if(e.ResultFlag){if(e.DataSource.Items!=null&&e.DataSource.Items.length>0){uc.demo.SetErrorMessage(false);$("#demo_suppression_save_count").setTemplateElement("saveCountSuppressionTemplate");$("#demo_suppression_save_count").processTemplate(e.DataSource.Items);uc.demo.suppression.saveCount_InitPagingBar(e.DataSource.TotalRecordCount);uc.demo.suppression.saveCountSuppressionIntial=true}else{$("#demo_suppression_save_count").html("");if((!String.IsNullOrEmpty(c))||(!String.IsNullOrEmpty(a))){uc.demo.SetErrorMessage(true,"There is no save count lists for suppression.")}}}else{uc.demo.SetErrorMessage(true,e.ResultMessage)}},error:function(e){uc.demo.SetErrorMessage(e)},waitingElement:"ct_suppression_panels"})}},SerachSaveCount:function(b){var a=uc.demo.suppression.saveCount_pagingOptions;var c=$(b).attr("sortexpression");if(a.SortBy==c){a.SortDescending=!a.SortDescending}else{a.SortDescending=true}a.SortBy=$(b).attr("sortexpression");uc.demo.suppression.saveCountSuppressionIntial=false;uc.demo.suppression.GetSaveCountSuppressionList(a)},saveCount_IsInitPagingBar:false,saveCount_InitPagingBar:function(a){if(!uc.demo.suppression.saveCount_IsInitPagingBar||uc.demo.suppression.saveCount_pagingOptions.TotalRecordCount!=a){uc.demo.suppression.saveCount_IsInitPagingBar=true;uc.demo.suppression.saveCount_pagingOptions.TotalRecordCount=a;jQuery("#save_count_suppression_pagination").pagination(a,{first_text:"First",prev_text:"Prev",next_text:"Next",last_text:"Last",ellipse_text:" ",num_edge_entries:2,num_display_entries:6,items_per_page:uc.demo.suppression.saveCount_pagingOptions.PageSize,callback:uc.demo.suppression.saveCount_pageselectCallback})}},saveCount_pageselectCallback:function(a,c){var b=uc.demo.suppression.saveCount_pagingOptions;b.PageNumber=a+1;uc.demo.suppression.saveCountSuppressionIntial=false;uc.demo.suppression.GetSaveCountSuppressionList(b)},SuppressionOption_Click:function(){var a=jQuery("input[type='radio'][name='suppression-option']:checked").val();jQuery("#demo_suppression_radio_range_panel").addClass("hidden");jQuery("#demo_suppression_radio_list_panel").addClass("hidden");jQuery("#suppression_addall").addClass("hidden");if(a==entity.enums.SuppressionType.DATE){jQuery("#demo_suppression_radio_range_panel").removeClass("hidden");jQuery("#suppression_addall").addClass("hidden")}else{if(a==entity.enums.SuppressionType.ORDERLIST){jQuery("#demo_suppression_radio_list_panel").removeClass("hidden");jQuery("#suppression_addall").removeClass("hidden")}}},CustomSuppressionOption_Click:function(){var a=jQuery("input[type='radio'][name='custom-suppression-option']:checked").val();jQuery("#custom_suppression_radio_list_panel").addClass("hidden");jQuery("#custom_suppression_radio_range_panel").addClass("hidden");jQuery("#custom_addall").addClass("hidden");if(a==entity.enums.SuppressionType.CUSTOMORDER){jQuery("#custom_suppression_radio_list_panel").removeClass("hidden");jQuery("#custom_addall").removeClass("hidden")}else{if(a==entity.enums.SuppressionType.CUSTOMDATE){jQuery("#custom_suppression_radio_range_panel").removeClass("hidden");jQuery("#custom_addall").addClass("hidden")}}},SaveCountSuppressionOption_Click:function(){var a=jQuery("input[type='radio'][name='save-count-suppression-option']:checked").val();jQuery("#save_count_suppression_radio_range_panel").addClass("hidden");jQuery("#save_count_suppression_radio_list_panel").addClass("hidden");jQuery("#save_count_suppression_addall").addClass("hidden");if(a==entity.enums.SuppressionType.SAVEDCOUNTORDER){jQuery("#save_count_suppression_radio_list_panel").removeClass("hidden");jQuery("#save_count_suppression_addall").removeClass("hidden")}else{if(a==entity.enums.SuppressionType.SAVEDCOUNTDATA){jQuery("#save_count_suppression_radio_range_panel").removeClass("hidden")}}},AddSuppression_Click:function(d){var h=page.placeorder.order;var c=$(d);var e=c.attr("ordercode");var g=c.attr("orderdesc");var f=c.attr("orderid");if(h.OrderSuppressions==null){h.OrderSuppressions=[]}for(var b=0;b<h.OrderSuppressions.length;b++){if(h.OrderSuppressions[b].SuppressedOrderId==f){return}}var a=new entity.OrderSuppression();a.SuppressedOrderId=f;a.SuppressionName=g;a.SuppressionValue=e;a.SuppressedOrderCode=e;a.OriginalOrderId=f;a.SuppressedOrderDesc=g;h.OrderSuppressions.push(a);uc.demo.suppression.BindSelectedSuppressions()},AddAllSuppressionOrder:function(){var a=page.placeorder.order;a.AllSuppressionChecked=$("#suppression_addallbox").is(":checked");if(!a.AllSuppressionChecked){a.OrderSuppressions=null}},AddAllCustomSuppressionOrder:function(){var a=page.placeorder.order;a.AllCustomSuppressionChecked=$("#custom_addallbox").is(":checked");if(!a.AllCustomSuppressionChecked){a.CustomSuppressions=null}},AddAllSuppressionSaveCount:function(){var a=page.placeorder.order;a.AllSaveCountSuppressionChecked=$("#save_count_suppression_addallbox").is(":checked");if(!a.AllSaveCountSuppressionChecked){a.SaveCountSuppressions=null}},RemoveSuppression_Click:function(b){var d=page.placeorder.order;var a=$(b);var c=a.attr("orderid");d.OrderSuppressions=$.grep(d.OrderSuppressions,function(e){return e.SuppressedOrderId!=c});uc.demo.suppression.BindSelectedSuppressions()},BindSelectedSuppressions:function(){var a=page.placeorder.order;if(a.OrderSuppressions==null){a.OrderSuppressions=[]}if(!a.AllSuppressionChecked){$("#demo_suppression_selected_order_list").setTemplateElement("demo_suppression_selected_order_list_template");$("#demo_suppression_selected_order_list").processTemplate(a.OrderSuppressions)}},AddCustomSuppression:function(d){var b=page.placeorder.order;var j=$(d);var a=j.attr("suppressionname");var h=j.attr("suppressionvalue");var c=j.attr("orderdate");var f=j.attr("suppressiondesc");if(b.CustomSuppressions==null){b.CustomSuppressions=[]}for(var e=0;e<b.CustomSuppressions.length;e++){if(b.CustomSuppressions[e].SuppressionValue==h){return}}var g=new entity.OrderCustomSuppression();g.SuppressionName=a;g.SuppressionValue=h;g.OrderDate=c;g.FileName=f;b.CustomSuppressions.push(g);uc.demo.suppression.BindSelectedCustomSuppressions()},RemoveCustomSuppression:function(b){var d=page.placeorder.order;var a=$(b);var c=a.attr("suppressionvalue");d.CustomSuppressions=$.grep(d.CustomSuppressions,function(e){return e.SuppressionValue!=c});uc.demo.suppression.BindSelectedCustomSuppressions()},BindSelectedCustomSuppressions:function(){var a=page.placeorder.order;if(a.CustomSuppressions==null){a.CustomSuppressions=[]}if(!a.AllCustomSuppressionChecked){$("#mySelectedCustomOrders").setTemplateElement("customSuppressionSelectedTemplate");$("#mySelectedCustomOrders").processTemplate(a.CustomSuppressions)}},AddSaveCountSuppression_Click:function(e){var b=page.placeorder.order;var j=$(e);var h=j.attr("ordercode");var d=j.attr("orderdesc");var a=j.attr("orderid");var c=j.attr("countid");if(b.SaveCountSuppressions==null){b.SaveCountSuppressions=[]}for(var f=0;f<b.SaveCountSuppressions.length;f++){if(b.SaveCountSuppressions[f].SuppressedCountId==a){return}}var g=new entity.SaveCountSuppression();g.SuppressedCountId=a;g.SuppressionName=d;g.SuppressionValue=c;g.SuppressedCountCode=h;g.OriginalCountId=a;g.SuppressedCountDesc=d;b.SaveCountSuppressions.push(g);uc.demo.suppression.BindSelectedSaveCountSuppressions()},RemoveSaveCountSuppression:function(b){var d=page.placeorder.order;var a=$(b);var c=a.attr("orderid");d.SaveCountSuppressions=$.grep(d.SaveCountSuppressions,function(e){return e.SuppressedCountId!=c});uc.demo.suppression.BindSelectedSaveCountSuppressions()},BindSelectedSaveCountSuppressions:function(){var a=page.placeorder.order;if(a.SaveCountSuppressions==null){a.SaveCountSuppressions=[]}if(!a.AllSaveCountSuppressionChecked){$("#demo_suppression_select_save_count").setTemplateElement("saveCountSuppressionSelectedTemplate");$("#demo_suppression_select_save_count").processTemplate(a.SaveCountSuppressions)}},PriorOrderSuppressionOption_Click:function(){jQuery("#suppression_addall").addClass("hidden");jQuery("input[type='radio'][name='suppression-option']").removeAttr("checked");var b=page.placeorder.order;var a=jQuery("#demo_suppression_checkbox_prior_order");if(a.is(":checked")){jQuery("#div_prior_order_suppression").removeClass("hidden")}else{jQuery("#div_prior_order_suppression").addClass("hidden");jQuery("#demo_suppression_radio_range_panel").addClass("hidden");jQuery("#demo_suppression_radio_list_panel").addClass("hidden");b.OrderSuppressions=null;b.SuppressionType=entity.enums.SuppressionType.NONE}},CustomerFileSuppressionOption_Click:function(){jQuery("#custom_addall").addClass("hidden");jQuery("input[type='radio'][name='custom-suppression-option']").removeAttr("checked");var b=page.placeorder.order;var a=jQuery("#demo_suppression_checkbox_customer");if(a.is(":checked")){jQuery("#customer_file_suppression").removeClass("hidden")}else{jQuery("#customer_file_suppression").addClass("hidden");jQuery("#custom_suppression_radio_list_panel").addClass("hidden");jQuery("#custom_suppression_radio_range_panel").addClass("hidden");b.CustomSuppressions=null;b.SuppressionType=entity.enums.SuppressionType.NONE}},SavedListCountSuppressionOption_Click:function(){jQuery("#save_count_suppression_addall").addClass("hidden");jQuery("input[type='radio'][name='save-count-suppression-option']").removeAttr("checked");var b=page.placeorder.order;var a=jQuery("#demo_suppression_checkbox_save_count");if(a.is(":checked")){jQuery("#save_count_suppression").removeClass("hidden")}else{jQuery("#save_count_suppression").addClass("hidden");jQuery("#save_count_suppression_radio_range_panel").addClass("hidden");jQuery("#save_count_suppression_radio_list_panel").addClass("hidden");b.SaveCountSuppressions=null;b.SuppressionType=entity.enums.SuppressionType.NONE}}};uc.demo.multicount={MultiSaveCount_pagingOptions:null,MultiSaveCountInit:false,MultiSaveCount_IsInitPagingBar:false,Init:function(){uc.demo.multicount.MultiSaveCount_pagingOptions=new entity.PagingOptions();uc.demo.multicount.MultiSaveCount_pagingOptions.PageSize=12;uc.demo.multicount.MultiSaveCount_pagingOptions.SortBy="OrderDate";uc.demo.multicount.LoadSaveCountList();uc.demo.multicount.BindSelectedMultiSaveCount()},LoadSaveCountList:function(b){if(!uc.demo.multicount.MultiSaveCountInit){var d=page.placeorder.order.AccountId;if(d==null){d=0}var c=jQuery("#multi_save_count_search_name").val();var a=jQuery("#multi_save_count_search_number").val();if(b==null||b==window.undefined){b=uc.demo.multicount.MultiSaveCount_pagingOptions}framework.common.Ajax({url:"PlaceOrder.aspx/GetSaveCountSuppressionList",data:{pagingOptions:b,accountId:d,listType:page.placeorder.order.ListType,countName:c,countNumber:a},success:function(e){if(e.ResultFlag){if(e.DataSource.Items!=null&&e.DataSource.Items.length>0){uc.demo.SetErrorMessage(false);$("#multi_save_count").setTemplateElement("MultiSaveCountTemplate");$("#multi_save_count").processTemplate(e.DataSource.Items);uc.demo.multicount.MultiSaveCount_InitPagingBar(e.DataSource.TotalRecordCount);uc.demo.multicount.MultiSaveCountInit=true}else{$("#multi_save_count").html("");if((!String.IsNullOrEmpty(c))||(!String.IsNullOrEmpty(a))){uc.demo.SetErrorMessage(true,"There is no save count lists.")}}}else{uc.demo.SetErrorMessage(true,e.ResultMessage)}},error:function(e){uc.demo.SetErrorMessage(e)},waitingElement:"demo_multi_saved_count_list"})}},MultiSaveCount_InitPagingBar:function(a){if(!uc.demo.multicount.MultiSaveCount_IsInitPagingBar||uc.demo.multicount.MultiSaveCount_pagingOptions.TotalRecordCount!=a){uc.demo.multicount.MultiSaveCount_IsInitPagingBar=true;uc.demo.multicount.MultiSaveCount_pagingOptions.TotalRecordCount=a;jQuery("#multi_save_count_pagination").pagination(a,{first_text:"First",prev_text:"Prev",next_text:"Next",last_text:"Last",ellipse_text:" ",num_edge_entries:2,num_display_entries:6,items_per_page:uc.demo.multicount.MultiSaveCount_pagingOptions.PageSize,callback:uc.demo.multicount.MultiSaveCount_pageselectCallback})}},MultiSaveCount_pageselectCallback:function(a,c){var b=uc.demo.multicount.MultiSaveCount_pagingOptions;b.PageNumber=a+1;uc.demo.multicount.MultiSaveCountInit=false;uc.demo.multicount.LoadSaveCountList(b)},AddMultiSaveCount_Click:function(f){var b=page.placeorder.order;var j=$(f);var h=j.attr("ordercode");var d=j.attr("orderdesc");var a=j.attr("orderid");var c=j.attr("countid");if(!String.IsNullOrEmpty(d)){d=h+" ("+d+")"}if(b.OrderGeos==null){b.OrderGeos=[]}for(var g=0;g<b.OrderGeos.length;g++){if(b.OrderGeos[g].GeoKeyCode==c){return}}var e=new entity.OrderGeo();e.GeoKeyCode=c;e.GeoKeyDesc=d;e.GeoType=entity.enums.GeoType.MultiCount;b.OrderGeos.push(e);uc.demo.multicount.BindSelectedMultiSaveCount()},RemoveMultiSaveCount:function(c){var d=page.placeorder.order;var b=$(c);var a=b.attr("countid");d.OrderGeos=$.grep(d.OrderGeos,function(e){return e.GeoKeyCode!=a});uc.demo.multicount.BindSelectedMultiSaveCount()},BindSelectedMultiSaveCount:function(){var a=page.placeorder.order;if(a.OrderGeos==null){a.OrderGeos=[]}$("#multi_save_count_selected").setTemplateElement("MultiSaveCountSelectedTemplate");$("#multi_save_count_selected").processTemplate(a.OrderGeos)},SerachMultiSaveCountList:function(){uc.demo.multicount.MultiSaveCountInit=false;uc.demo.multicount.LoadSaveCountList()},SerachSaveCount:function(b){var a=uc.demo.multicount.MultiSaveCount_pagingOptions;var c=$(b).attr("sortexpression");if(a.SortBy==c){a.SortDescending=!a.SortDescending}else{a.SortDescending=true}a.SortBy=$(b).attr("sortexpression");uc.demo.multicount.MultiSaveCountInit=false;uc.demo.multicount.LoadSaveCountList(a)},GetCountNumber:function(a){return a.toString().substring(0,a.toString().indexOf(" ("))},GetCountName:function(a){return a.toString().substring(a.toString().indexOf(" (")+2,a.toString().length-1)}};
;
ni.RegisterNameSpace("uc");uc.pollcount={progress:0,InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.PollCount;b.StepTitle="";b.StepDescription="";b.StepButtonsStatus=0;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Back,ButtonEvent:uc.pollcount.Click_Back}];return b},Init:function(){page.placeorder.order.CurrentStep=entity.enums.OrderStep.PollCount;var a=uc.pollcount.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,a);uc.pollcount.progress=0;uc.pollcount.SetErrorMessage(false);uc.pollcount.SubmitOrder()},intervalId:null,SubmitOrder:function(){uc.pollcount.SetErrorMessage(false);framework.common.Ajax({url:"PlaceOrder.aspx/PollCount",data:{orderId:13402},success:function(a){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}if(a.ResultFlag==true){page.placeorder.order=a.DataSource.Order;page.placeorder.order.CurrentStep=entity.enums.OrderStep.PollCount;setTimeout(function(){uc.pollcount.CheckPollingStatus(a.DataSource.RequestId)},1000)}},error:function(a){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}uc.pollcount.SetErrorMessage(true,String.format('We seem to be having an issue retrieving this count. Please press the "Back" button and try again or call one of our Data Specialists at {0}.',page.global.PhoneNumber));uc.pollcount.SetButtonStatus();var b=page.placeorder.order;framework.common.LogClickEvent("Fail to get count",null,a==null?"Fail to get count":a.responseText)}})},CheckPollingStatus:function(a){uc.pollcount.progress=uc.pollcount.progress+1;var b="PlaceOrder.aspx/CheckPollingStatus?retry="+uc.pollcount.progress;framework.common.Ajax({url:b,data:{requestId:a},timeout:600000,success:function(c){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}if(c.ResultFlag==true){if(c.DataSource.PercentComplete<100){setTimeout(function(){uc.pollcount.CheckPollingStatus(a)},1000)}else{page.placeorder.order.NextStep=entity.enums.OrderStep.ListQuote;page.placeorder.GoNext()}}else{uc.pollcount.SetErrorMessage(true,String.format('We seem to be having an issue retrieving this count.  Please press the "Back" button and try again or call one of our Data Specialists at {0}.',page.global.PhoneNumber));uc.pollcount.SetButtonStatus()}},error:function(c){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}uc.pollcount.SetErrorMessage(true,String.format('We seem to be having an issue retrieving this count.  Please press the "Back" button and try again or call one of our Data Specialists at {0}.',page.global.PhoneNumber));uc.pollcount.SetButtonStatus();framework.common.LogClickEvent("Fail to check polling status",null,c==null?"Fail to check polling status":c.responseText)}})},SetButtonStatus:function(){var a=uc.pollcount.InitStepSetting();a.StepButtonsStatus=entity.enums.StepButtons.Back;a.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Back,ButtonEvent:uc.pollcount.Click_Back}];framework.listener.FireListener(framework.listener.LISTENER_SET_BUTTONS,a)},Click_Back:function(){page.placeorder.GoBack()},SetErrorMessage:function(a,b){if(a){jQuery("#pollcount_message_error").removeClass("hidden").html(b)}else{jQuery("#pollcount_message_error").addClass("hidden").html("")}}};uc.pollcount.demobreakdown={georow:0,SubmitOrder:function(){uc.pollcount.SetErrorMessage(false);framework.common.Ajax({url:"PlaceOrder.aspx/PollCountDemoBreakdown",data:{georow:uc.pollcount.demobreakdown.georow},success:function(a){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}if(a.ResultFlag==true){setTimeout(function(){uc.pollcount.demobreakdown.CheckPollingStatus(a.DataSource.RequestId)},1000)}},error:function(a){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}uc.pollcount.SetErrorMessage(true,String.format('We seem to be having an issue retrieving this count. Please press the "Back" button and try again or call one of our Data Specialists at {0}.',page.global.PhoneNumber));uc.pollcount.SetButtonStatus()}})},CheckPollingStatus:function(a){framework.common.Ajax({url:"PlaceOrder.aspx/CheckPollingStatusDemoBreakdown",data:{requestId:a},success:function(b){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}if(b.ResultFlag==true){if(b.DataSource.PercentComplete<100){setTimeout(function(){uc.pollcount.demobreakdown.CheckPollingStatus(a)},1000)}else{uc.pollcount.demobreakdown.georow=uc.pollcount.demobreakdown.georow+1;if(uc.pollcount.demobreakdown.georow<page.placeorder.order.OrderGeos.length){uc.pollcount.demobreakdown.SubmitOrder()}else{page.placeorder.order.NextStep=entity.enums.OrderStep.ListQuote;page.placeorder.GoNext()}}}},error:function(b){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.PollCount){return}uc.pollcount.SetErrorMessage(true,String.format('We seem to be having an issue retrieving this count.  Please press the "Back" button and try again or call one of our Data Specialists at {0}.',page.global.PhoneNumber));uc.pollcount.SetButtonStatus()}})}};
;
ni.RegisterNameSpace("uc");uc.result={UserPriceList:null,GlobalPriceList:null,Promotion:null,HasExisted2DReport:false,InterestingAvailble:null,MetaDataPriceList:null,RewardsFromDollar:0,RewardsToPoint:0,HasRewardsPoint:false,IsInputPrice:false,MinimumOrderAmount:0,RewardsPoint:0,BonusPoint:0,StartTime:null,PassPay_For_DebitCard:false,IsInit4InfoPackage:false,MobileMinQty:9000,FacebkMinQty:10000,InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.ListQuote;b.StepTitle="";b.StepDescription="";$("#payment_bill_FirstName").hide();$("#payment_bill_LastName").hide();if(page.placeorder.IsInputPrice==true){$("#payment_bill_FirstName").show();$("#payment_bill_LastName").show()}b.StepButtonsStatus=entity.enums.StepButtons.Back|entity.enums.StepButtons.SaveCount;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Back,ButtonEvent:uc.result.Click_Back},{ButtonKey:entity.enums.StepButtons.SaveCount,ButtonEvent:uc.result.Click_SaveCount}];if(page.placeorder.isOrderQuoteEnabled){b.StepButtonsStatus=b.StepButtonsStatus|entity.enums.StepButtons.OrderQuote;b.StepButtonsEvent.push({ButtonKey:entity.enums.StepButtons.OrderQuote,ButtonEvent:uc.result.DoOrderQuote})}if(page.placeorder.IsPlaceOrderEnabled){b.StepButtonsStatus=b.StepButtonsStatus|entity.enums.StepButtons.PlaceOrder;b.StepButtonsEvent.push({ButtonKey:entity.enums.StepButtons.PlaceOrder,ButtonEvent:uc.payment.ProcessOrder})}return b},Init:function(){page.placeorder.order.CurrentStep=entity.enums.OrderStep.ListQuote;var d=uc.result.InitStepSetting();uc.payment.SetErrorMessage(false,"");framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,d);jQuery("#demoBreakdown").addClass("hidden");$("input[type=radio][id ^= results_listusage_multitime_]").removeAttr("disabled");var e="<img alt='' src='Themes/default/assets/images/spinner2.gif' />";jQuery("#ct_results_geos").html(e);jQuery("#ct_results_audience").html("");jQuery("#ct_results_occupant").html("");jQuery("#result_info_order_price_value").numeric();$("#link_need_other_result").colorbox({iframe:true,width:840,height:600,opacity:0.5});$("#link_save_count_top").colorbox({iframe:true,width:840,height:600,opacity:0.5});$("#link_save_count_bottom").colorbox({iframe:true,width:840,height:600,opacity:0.5});jQuery("#payment_ValidateSummay").addClass("hidden");jQuery("#ct_result_list_format").addClass("hidden");jQuery("[name='mobile_btn']").removeClass("hidden");jQuery("#order_step_header_mobile input[type='checkbox']").removeAttr("checked");uc.result.IsDisplay4InfoPlaceOrderBtn(false);if(page.placeorder.currentDataSource==entity.enums.DataSourceType.Consumer){$("#advise_list_with_email").addClass("advise_list_with_email_area")}else{$("#advise_list_with_email").removeClass("advise_list_with_email_area")}uc.result.GetOrder();var c=(new Date()).getFullYear()+1;jQuery("#payment_bill_year").val(c);if(document.getElementById("adjustdiv1")!=null&document.getElementById("adjustdt1")!=null){if(jQuery.browser.msie){if(document.getElementById("adjustdiv1").scrollWidth!=document.getElementById("adjustdiv1").clientWidth){document.getElementById("adjustdt1").width=document.getElementById("adjustdiv1").clientWidth}}else{document.getElementById("adjustdt1").width=document.getElementById("adjustdiv1").scrollWidth}}jQuery("#result_help_mailinglabels").attr("secondaryKey",entity.lookup.DataSource.getByCode(page.placeorder.order.ListType).DisplayName);jQuery("[grp='nothx']").bind("click",function(){$.colorbox.close()});$(".ylist3 > li > a").click(function(f){f.preventDefault();$(this).siblings(".bd").slideToggle("fast")});$("#ct_results_campaigns_warn").html("").addClass("hidden");jQuery("#order_step_header_mobile input[type='checkbox']").bind("change",function(){var f=jQuery(this);if(f.is(":checked")){jQuery("#order_step_header_mobile div[master='"+f.val()+"']").removeClass("hidden")}else{jQuery("#order_step_header_mobile div[master='"+f.val()+"']").addClass("hidden");if(f.val()==1){uc.result.ClearMobileAdInformation()}else{if(f.val()==2){uc.result.ClearFacebookAdInformation()}}}});var b="#order_step_header_mobile input[type='radio'][name='mobileitems']";jQuery(b).live("change",function(){uc.result.Click_Change_Mobile_Go(jQuery(b+":checked").val())});var a="#mobile_only_order_content input[type='radio'][name='mobileitems']";jQuery(a).live("change",function(){uc.result.Click_Change_Mobile_Go(jQuery(a+":checked").val())});jQuery("#ct_results_fbapply").bind("click",function(){var f=jQuery("#ct_results_fbacct").val();if(!f){$.colorbox({html:"<span >please enter your facebook account</span>",width:200,height:150,opacity:0.5,scrolling:false})}else{var h=page.placeorder.order;h.OrderThirdPartyAccount=[];var g=new Object();g.OrderId=0;g.AccountType=0;g.AccountId=f;g.CampaignCode=0;g.Status=40;g.Id=0;h.OrderThirdPartyAccount.push(g);$.colorbox({html:"<span>Thank you. When you complete this list order we will also send this list to Facebook.</span><p>Approximately 30 minutes after this order is placed, you will be able to build a campaign within your Facebook Ad Account to reach this same audience.</p>",width:300,height:200,opacity:0.5,scrolling:false})}});if(document.getElementById("adjustdiv1")!=null){document.getElementById("adjustdiv1").style="height:190px;overflow:scroll"}uc.result.GetPaymentCardType();if(page.placeorder.isNeedNotifyMe){$("#div_is_need_notify_me").removeClass("hidden")}else{$("#div_is_need_notify_me").addClass("hidden")}if(page.global.isMyAcxiomSite){$("#asterisk_before").addClass("hidden");$("#asterisk_after").removeClass("hidden")}else{$("#asterisk_before").removeClass("hidden");$("#asterisk_after").addClass("hidden")}},GetPaymentCardType:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetCardTypeBySite",data:{},success:function(a){if(a.DataSource!=""){$("#sp_payment_cardType").html(a.DataSource)}},error:function(a){alert("Get card type error.")}})},MobilePackages:{Packages:[],getPackageById:function(b){for(var a=0;a<uc.result.MobilePackages.Packages.length;a++){if(uc.result.MobilePackages.Packages[a].Id==b){return uc.result.MobilePackages.Packages[a]}}}},GetOrder:function(){jQuery("#ct_right_detail_panel").addClass("hidden");jQuery("#result_error").addClass("hidden");if(page.placeorder.currentDataSource==entity.enums.DataSourceType.Mobile_Consumer_Advertising){$("#ct_result_list_usage").addClass("hidden")}uc.result.StartTime=new Date();uc.result.IsInit4InfoPackage=false;framework.common.Ajax({url:"PlaceOrder.aspx/GetOrderAndPriceList",data:{listtype:10},success:function(a){if(a.ResultFlag==true){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.ListQuote){return}framework.common.Log(uc.result.StartTime,"Call GetOrderAndPriceList");uc.result.StartTime=new Date();page.placeorder.order=a.DataSource.Order;page.placeorder.order.CurrentStep=entity.enums.OrderStep.ListQuote;page.placeorder.order.MobilePackages=a.DataSource.MobilePackages;uc.payment.FillPaymentMethod(page.placeorder.order.PaymentMethod);uc.payment.IsContactAddressComplete=a.DataSource.IsContactAddressComplete;uc.result.UserPriceList=a.DataSource.UserPriceList;uc.result.GlobalPriceList=a.DataSource.GlobalPriceList;uc.result.Promotion=a.DataSource.Promotion;uc.result.MetaDataPriceList=a.DataSource.BizMetadataPricing;uc.result.RewardsFromDollar=a.DataSource.RewardsFromDollar;uc.result.RewardsToPoint=a.DataSource.RewardsToPoint;uc.result.HasRewardsPoint=a.DataSource.HasRewardsPoint;uc.result.isNeedReplaceMobileAndFacebook=a.DataSource.isNeedReplaceMobileAndFacebook;OrderHelper.CaculatePrice(page.placeorder.order,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.IsInputPrice=a.DataSource.IsInputPrice;page.placeorder.IsInputPrice=a.DataSource.IsInputPrice;uc.result.MinimumOrderAmount=uc.result.UserPriceList==null?50:uc.result.UserPriceList.MinElementsCharge;if(page.placeorder.order.ListType==50){uc.result.Render_Geos_Html_Occupant(page.placeorder.order)}else{uc.result.Render_Geos_Html(page.placeorder.order)}if(page.placeorder.order.GeoType==entity.enums.GeoType.Radius||page.placeorder.order.GeoType==entity.enums.GeoType.Closex||page.placeorder.order.GeoType==entity.enums.GeoType.Polygon||page.placeorder.order.GeoType==entity.enums.GeoType.AcxiomMultiRadius||page.placeorder.order.GeoType==entity.enums.GeoType.AcxiomZipRadius||page.placeorder.order.GeoType==entity.enums.GeoType.ZipMap){if(page.placeorder.order.ListType==50){$("#leftContainer").css("max-height",1050)}else{$("#leftContainer").css("height",null);$("#leftContainer").css("max-height",1550)}}else{$("#leftContainer").css("max-height",1250)}uc.result.RenderListUsageHtml();uc.result.RenderOrderPriceInfo();if(page.placeorder.order.TotalAvailableQty>=page.placeorder.minQuantityOfOrder){$("#ct_right_detail_panel").removeClass("hidden")}if((page.placeorder.order.OrderSuppressions!=undefined&&page.placeorder.order.OrderSuppressions.length>0)||(page.placeorder.order.CustomSuppressions!=undefined&&page.placeorder.order.CustomSuppressions.length>0)||(page.placeorder.order.SaveCountSuppressions!=undefined&&page.placeorder.order.SaveCountSuppressions.length>0)){$("#suppressionOrders").removeClass("hidden");if(page.placeorder.order.SaveCountSuppressions!=undefined&&page.placeorder.order.SaveCountSuppressions.length>0){$("#ShowSuppressionOrders").html("View Suppressed Counts&nbsp;&#187;");$("#suppressionContainerTitle").text("Suppression Counts")}}var d=uc.result.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,d);framework.common.Log(uc.result.StartTime,"Render result with order and price");uc.result.SetDemoBreakdown(a.DataSource.Breakdown,page.placeorder.order);if(page.placeorder.order.ListType==entity.enums.DataSourceType.InfoUSAConsumer||page.placeorder.order.ListType==entity.enums.DataSourceType.InfoUSABusiness||page.placeorder.order.ListType==entity.enums.DataSourceType.InfoUSA_Consumer||page.placeorder.order.ListType==entity.enums.DataSourceType.InfoUSA_Business){if(page.placeorder.isCountReportEnbaled){jQuery("#infoUSACountReport").removeClass("hidden")}}var c=["#demoBreakdown","#twoDimensionalReport"];var b=["#infoUSACountReport","#suppressionOrders"];jQuery(c).each(function(e,f){if(!jQuery(f).hasClass("hidden")){jQuery("#special_links1").removeClass("hidden")}else{jQuery(f).parent("td.results_target_audience").addClass("hidden")}});jQuery(b).each(function(e,f){if(!jQuery(f).hasClass("hidden")){jQuery("#special_links2").removeClass("hidden")}else{jQuery(f).parent("td.results_target_audience").addClass("hidden")}});uc.result.IsReachMobileCampaignQuantities();uc.result.Render4InfoPackagePopUp();uc.payment.GetOrder();if(page.placeorder.isMultiCount){jQuery(".order_step_buttons").find("a[buttonname='order_stepbt_savecount']").addClass("hidden")}else{jQuery(".order_step_buttons").find("a[buttonname='order_stepbt_savecount']").removeClass("hidden")}}},error:function(a){if(page.placeorder.order.CurrentStep!=entity.enums.OrderStep.ListQuote){return}uc.result.Show_Error("Unfortunately, the system is unable to process your request. Our technical support specialists have been notified. Thank you for your patience while we work to resolve the error.")}})},IsDisplay4InfoPlaceOrderBtn:function(a){if(page.placeorder.IsPlaceOrderEnabled==false){return}if(a){jQuery("#placeOrderButton4Info").removeClass("hidden");jQuery(".order_step_buttons").find("a[buttonname='order_stepbt_placeorder']").addClass("hidden")}else{jQuery("#placeOrderButton4Info").addClass("hidden");jQuery(".order_step_buttons").find("a[buttonname='order_stepbt_placeorder']").removeClass("hidden")}},IsReachMobileCampaignQuantities:function(){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){if(page.placeorder.order.TotalAvailableQty<uc.result.MobileMinQty){$("#result_error").removeClass("hidden");$("#result_error").html("Mobile campaigns require a minimum of 9,000 records. Please consider either expanding the geographic area or refining the parameters of your target audience by clicking the appropriate Edit Selections link. Thank you.")}else{$("#result_error").removeClass("hidden");$("#result_error").html("")}}else{return}},GetOrderGeos:function(){framework.common.Ajax({url:"PlaceOrder.aspx/GetOrderGeos",data:{async:false},success:function(a){if(a.ResultFlag==true){page.placeorder.order.OrderGeos=a.DataSource;uc.result.RendeGeoDetails(page.placeorder.order)}},error:function(a){uc.result.Show_Error("Unfortunately, the system is unable to process your request. Our technical support specialists have been notified. Thank you for your patience while we work to resolve the error.")}})},RenderOrderPriceInfo:function(){var a=page.placeorder.order;if(a.MailLabelsCount==0){$("#results_nolabel")[0].checked=true;$("#ct_results_sendlabels_count").attr("disabled",true);$("#results_needlabels_ocr_line").addClass("hidden")}else{$("#ct_results_sendlabels_count").val(a.MailLabelsCount);$("#results_sendlabels")[0].checked=true;$("#ct_results_sendlabels_count").removeAttr("disabled");$("#results_needlabels_ocr_line").removeClass("hidden")}$("#results_listusage_multitime_"+a.ListUsage)[0].checked=true;if(uc.result.HasRewardsPoint&&uc.result.RewardsFromDollar!=0&&uc.result.RewardsToPoint!=0){uc.result.RewardsPoint=a.TotalEstmCost/uc.result.RewardsFromDollar*uc.result.RewardsToPoint;if(a.PromotionPointType!=undefined&&a.PromotionPointValue>0){if(a.PromotionPointType==entity.enums.PromotionType.XNUMBER_OF_POINT){a.PromotionPoint=uc.result.RewardsPoint*a.PromotionPointValue-uc.result.RewardsPoint;uc.result.RewardsPoint=uc.result.RewardsPoint*a.PromotionPointValue}else{if(a.PromotionPointType==entity.enums.PromotionType.NUMBER_OF_POINT){a.PromotionPoint=a.PromotionPointValue;uc.result.RewardsPoint=uc.result.RewardsPoint+a.PromotionPointValue}}}if(a.PromotionAmount>0){uc.result.BonusPoint=(a.TotalEstmCost+a.PromotionAmount)/uc.result.RewardsFromDollar*uc.result.RewardsToPoint}else{uc.result.BonusPoint=0}}uc.result.RenderListUsageHtmlPrice(a);uc.result.RenderOrderPriceDiffInfo(a);$("#ct_results_geos input[type='text'][rowtype='total']").val(a.TotalDesiredQty);uc.payment.RenderOrderDetails();uc.result.SetInteresting();uc.result.CheckPayment_IfNeeded();framework.listener.FireListener(framework.listener.LISTENER_UPDATE_RESULTS_ORDER)},RenderListUsageHtml:function(){var a=uc.result.UserPriceList.ListMultiplePrice;$("#ct_list_usage_container").setTemplateElement("ct_list_usage_template");$("#ct_list_usage_container").processTemplate(a)},RenderListUsageHtmlPrice:function(a){var f=uc.result.UserPriceList.ListMultiplePrice;var b=jQuery.toJSON(a);var g=jQuery.evalJSON(b);a.ListUsage=entity.enums.ListUsageType.OneTimes;OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);for(var c=0;c<f.length;c++){var e=0;var d=0;g.ListUsage=f[c].MultipleId;OrderHelper.CaculatePrice(g,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);e=(g.ListUsage>1?1:-1)*(g.TotalEstmCost-a.TotalEstmCost);$("#results_listusage_pricediff_"+f[c].MultipleId).removeClass("hidden").html("(+"+framework.common.formatMoney(e)+")")}a.ListUsage=Number(jQuery("input[name='results_listusages']:checked").attr("data-mul"));OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList)},ClearMobileAdInformation:function(){uc.result.SetMobileAdInformation(true);uc.result.RenderSelectedMobilePackage()},ClearFacebookAdInformation:function(){jQuery("#ct_results_fbacct").val("");page.placeorder.order.OrderThirdPartyAccount=[]},SetMobileAdInformation:function(a){if(a){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){page.placeorder.order.MobilePackageId=2;uc.result.SetMobileAdInformation(false)}else{page.placeorder.order.MobilePackageId=0;if(OrderHelper.CheckPromotCode(page.placeorder.order)&&(uc.result.Promotion.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_LIST_BOTH||uc.result.Promotion.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_LIST_BOTH)){OrderHelper.CaculatePromotion(page.placeorder.order,uc.result.UserPriceList,uc.result.Promotion)}page.placeorder.order.MobilePackageCharge=0;page.placeorder.order.MobilePackageName="";page.placeorder.order.Duration=0;page.placeorder.order.MobilePackageViewCount=0;page.placeorder.order.Chose4Info=false}}else{if(page.placeorder.order.MobilePackageId>0){var b=uc.result.MobilePackages.getPackageById(page.placeorder.order.MobilePackageId);page.placeorder.order.MobilePackageId=b.Id;if(OrderHelper.CheckPromotCode(page.placeorder.order)&&(uc.result.Promotion.PromotionType==entity.enums.PromotionType.DOLLAR_MOBILE_LIST_BOTH||uc.result.Promotion.PromotionType==entity.enums.PromotionType.PERCENT_OFF_MOBILE_LIST_BOTH)){OrderHelper.CaculatePromotion(page.placeorder.order,uc.result.UserPriceList,uc.result.Promotion)}else{OrderHelper.CaculateMobilePackageCharge(page.placeorder.order,uc.result.Promotion)}page.placeorder.order.Duration=b.Duration;page.placeorder.order.MobilePackageName=b.Name;page.placeorder.order.MobilePackageViewCount=b.ViewCount;page.placeorder.order.Chose4Info=true}}},PaymentCheckDigitalFileQty:function(){var d=page.placeorder.order;if(d.ListType!=entity.enums.DataSourceType.Consumer&&d.ListType!=entity.enums.DataSourceType.Mobile_Consumer_Advertising){return true}var c=0;if(d.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){c=d.TotalAvailableQty;if(c<uc.result.MobileMinQty){uc.result.Show_Error("The mobile ad campaign is not available, please relax the conditions.");return false}}else{c=Math.min(d.TotalDesiredQty*3,d.TotalAvailableQty);var b=$("#order_step_header_mobile input#mobileads").is(":checked");var a=$("#order_step_header_mobile input#facebookleads").is(":checked");if(b){if(c<uc.result.MobileMinQty){uc.result.Show_Error("The mobile ad campaign is not available, please relax the conditions.");return false}else{if(!d.Chose4Info||!d.MobilePackageId){uc.result.Show_Error("A mobile campaign should be chosen.");return false}}}if(a){if(c<=uc.result.FacebkMinQty){uc.result.Show_Error("The facebook campaign is not available, please relax the conditions.");return false}else{if(!d.OrderThirdPartyAccount||d.OrderThirdPartyAccount.length==0){uc.result.Show_Error("please enter your Facebook advertiser ID.");return false}}}}return true},ChangeNumberRender4InfoPackage:function(){uc.result.SetInteresting();if(!page.placeorder.order.MobilePackages){page.placeorder.order.Chose4Info=false;uc.result.ShowWarning_MobileAndFacebkWidget(100);return}var a=0;if(page.placeorder.order.ListType==entity.enums.DataSourceType.Consumer){a=Math.min(page.placeorder.order.TotalDesiredQty*3,page.placeorder.order.TotalAvailableQty)}else{if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){a=page.placeorder.order.TotalAvailableQty}else{return}}OrderHelper.CaculatePackage(page.placeorder.order,a);uc.result.ShowWarning_MobileAndFacebkWidget(a);uc.result.RenderSelectedMobilePackage()},DisplayMobileOperate:function(a){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){$("#mobile_info_operate_message").html("Please note this order will appear as 4INFO on your statement.")}else{$("#mobile_info_operate_message").html("Please note the List (Acxiom) and Mobile Ad Campaign (4INFO) will appear as separate charges on your credit card statement.")}if(a){$("div[id^='mobile_info_operate']").removeClass("hidden");$("#payment_interesting").addClass("hidden")}else{$("div[id^='mobile_info_operate']").addClass("hidden");uc.result.SetInteresting()}},SetInteresting:function(){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Consumer&&Math.min(page.placeorder.order.TotalAvailableQty,page.placeorder.order.TotalDesiredQty)>=10000){jQuery("#payment_interesting").removeClass("hidden")}else{jQuery("#payment_interesting").addClass("hidden")}},Click_Change_Mobile_Go:function(a){page.placeorder.order.MobilePackageId=parseInt(a);uc.result.RenderSelectedMobilePackage()},DisplayOrderMobileInfo:function(b){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){jQuery("#mobile_only_order_content").setTemplateElement("ct_result_campaigns_template",null,{filter_data:false});jQuery("#mobile_only_order_content").processTemplate(b);var a=page.placeorder.order;jQuery("input[type='radio'][name='mobileitems']").eq(a.MobilePackageId-1).attr("checked","checked")}},RenderSelectedMobilePackage:function(){if(page.placeorder.order.MobilePackageId>0){uc.payment.ChangePaymentMethod(true);uc.result.DisplayMobileOperate(true);uc.result.SetMobileAdInformation(false)}else{uc.payment.ChangePaymentMethod(false);uc.result.DisplayMobileOperate(false);uc.result.SetMobileAdInformation(true)}uc.payment.RenderOrderDetails(page.placeorder.order);uc.payment.RenderPaymentDetail();framework.listener.FireListener(framework.listener.LISTENER_UPDATE_RESULTS_ORDER)},InitMobileAndFacebkWidget2:function(){var a=page.placeorder.order;jQuery("#order_step_header_mobile").addClass("hidden");jQuery("#ct_results_mobile_content").html("");jQuery("#order_step_header_mobile_2").addClass("hidden");if(!uc.result.isNeedReplaceMobileAndFacebook){if(a.MobilePackages&&a.MobilePackages.length>0){jQuery("#ct_results_mobile_content").setTemplateElement("ct_result_campaigns_template",null,{filter_data:false});jQuery("#ct_results_mobile_content").processTemplate(a.MobilePackages)}if(a.ListType==entity.enums.DataSourceType.Consumer&&!page.placeorder.isMultiCount){if(page.placeorder.ConsumerListType==1){jQuery("#ct_results_campaigna input[id=mobileads]").attr("checked","checked");jQuery("#ct_results_campaigna input[id=mobileads]").trigger("change")}else{if(page.placeorder.ConsumerListType==2){jQuery("#ct_results_campaignb input[id=facebookleads]").attr("checked","checked");jQuery("#ct_results_campaignb input[id=facebookleads]").trigger("change")}else{if(page.placeorder.ConsumerListType==3){jQuery("#ct_results_campaigna input[id=mobileads]").attr("checked","checked");jQuery("#ct_results_campaignb input[id=facebookleads]").attr("checked","checked");jQuery("#ct_results_campaigna input[id=mobileads]").trigger("change");jQuery("#ct_results_campaignb input[id=facebookleads]").trigger("change")}}}jQuery("#order_step_header_mobile").removeClass("hidden")}}else{if(a.ListType==entity.enums.DataSourceType.Consumer&&Math.min(page.placeorder.order.TotalAvailableQty,page.placeorder.order.TotalDesiredQty)>=3000&&!page.placeorder.isMultiCount){jQuery("#order_step_header_mobile_2").removeClass("hidden")}}},ShowWarning_MobileAndFacebkWidget:function(c){if(page.placeorder.order.ListType!=entity.enums.DataSourceType.Consumer||page.placeorder.isMultiCount){return}$("#result_mobile_upsell_error").html("").addClass("hidden");$("#order_step_header_mobile input[type='checkbox'][name='ct_results_campaigns_option']").removeAttr("disabled");$("#ct_results_campaignb [id='ct_results_fbacct']").removeAttr("disabled");var d=page.placeorder.order;var e="";if(c<uc.result.MobileMinQty){uc.result.SetMobileAdInformation(true);if(page.placeorder.ConsumerListType==0){$("#order_step_header_mobile").addClass("hidden")}else{e="A minimum of 9,000 records is required for Facebook and Mobile campaigns.";$("#order_step_header_mobile input[type='checkbox'][name='ct_results_campaigns_option']").removeAttr("checked").trigger("change").attr("disabled",true)}}else{if(c>=uc.result.MobileMinQty&&c<=uc.result.FacebkMinQty){e="A minimum of 10,000 records is required for Facebook campaigns.";$("#ct_results_campaignb input[type='checkbox'][id='facebookleads']").removeAttr("checked").trigger("change").attr("disabled",true);$("#ct_results_campaignb [id='ct_results_fbacct']").removeAttr("checked").attr("disabled",true)}else{if(c>=uc.result.FacebkMinQty&&!uc.result.isNeedReplaceMobileAndFacebook){$("#order_step_header_mobile").removeClass("hidden");var a="#order_step_header_mobile input[type='radio'][name='mobileitems']";var b=jQuery(a+":checked").val();if(d.MobilePackages&&d.MobilePackages.length>0){jQuery("#ct_results_mobile_content").setTemplateElement("ct_result_campaigns_template",null,{filter_data:false});jQuery("#ct_results_mobile_content").processTemplate(d.MobilePackages);$("#order_step_header_mobile input[type='radio'][name='mobileitems'][value='"+b+"']").attr("checked",true)}page.placeorder.order.MobilePackageId=parseInt(b);uc.result.SetMobileAdInformation(false)}}}if(c>=uc.result.MobileMinQty&&uc.result.isNeedReplaceMobileAndFacebook){$("#order_step_header_mobile_2").removeClass("hidden")}else{$("#order_step_header_mobile_2").addClass("hidden")}if(e.length>0){$("#result_mobile_upsell_error").html(e).removeClass("hidden")}},Render4InfoPackagePopUp:function(){uc.result.SetInteresting();uc.result.InitMobileAndFacebkWidget2();if(!page.placeorder.order.MobilePackages){page.placeorder.order.Chose4Info=false;uc.result.ShowWarning_MobileAndFacebkWidget(100);return}uc.result.MobilePackages.Packages=page.placeorder.order.MobilePackages;var a=0;if(page.placeorder.order.ListType==entity.enums.DataSourceType.Consumer){a=Math.min(page.placeorder.order.TotalDesiredQty*3,page.placeorder.order.TotalAvailableQty)}else{if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){a=page.placeorder.order.TotalAvailableQty;uc.result.IsDisplay4InfoPlaceOrderBtn(true)}else{return}}OrderHelper.CaculatePackage(page.placeorder.order,a);uc.result.ShowWarning_MobileAndFacebkWidget(a);if(a<uc.result.MobileMinQty){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Consumer){uc.result.IsDisplay4InfoPlaceOrderBtn(false)}else{if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){jQuery("#result_mobile_only_standalone").removeClass("hidden")}}uc.result.ClearMobileAdInformation();uc.result.ClearFacebookAdInformation();uc.payment.ChangePaymentMethod(false);uc.payment.GetOrder();return}else{if(a>=uc.result.MobileMinQty){uc.result.IsDisplay4InfoPlaceOrderBtn(true);if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){jQuery("#result_mobile_only_standalone").removeClass("hidden");if(page.placeorder.order.MobilePackageId==undefined||page.placeorder.order.MobilePackageId==0){page.placeorder.order.MobilePackageId=2}}uc.result.RenderSelectedMobilePackage()}}},RenderOrderPriceDiffInfo:function(a){var d=0;var c=0;var b=jQuery.toJSON(a);var e=jQuery.evalJSON(b);if(a.MailLabelsCount==0){e.MailLabelsCount=1}else{e.MailLabelsCount=0}OrderHelper.CaculatePrice(e,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);c=(e.MailLabelsCount>0?1:-1)*(e.TotalEstmCost-a.TotalEstmCost);$("#results_labels_pricediff").removeClass("hidden").html("("+framework.common.formatMoney(c)+")")},ListUsageSelection:function(){var a=page.placeorder.order;var c=(jQuery("input[name='results_needlabels']:checked").val()=="1");var b=$("#ct_results_sendlabels_count");$("#ct_result_list_format_tip").html("");if(c){a.MailLabelsCount=b.val();b.removeAttr("disabled");if(a.MailLabelsCount>=2){$("#results_listusage_multitime_"+a.ListUsage)[0].checked=true;$("#results_listusage_multitime_"+a.ListUsage).attr("disabled",true);$("#ct_result_list_usage").addClass("graytext");$("#ct_result_list_format_tip").html("Selecting labels requires that the multiple use option be selected.")}else{$("#ct_result_list_usage").removeClass("graytext")}}else{a.MailLabelsCount=0;b.val("1");b.attr("disabled",true)}a.ListUsage=Number(jQuery("input[name='results_listusages']:checked").attr("data-mul"));uc.result.UserPriceList.MultiplePrice=Number(jQuery("input[name='results_listusages']:checked").val());uc.result.GlobalPriceList.MultiplePrice=Number(jQuery("input[name='results_listusages']:checked").val());OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.RenderOrderPriceInfo()},Promotion_Change_KeyDown:function(b){var a=(b.keyCode?b.keyCode:b.which);if(a!=13){return false}if(b.preventDefault!=null){b.preventDefault()}if(b.stopPropagation!=null){b.stopPropagation()}b.cancelBubble=true;uc.result.Promotion_Change();return false},Promotion_Change:function(c){if(c==null){var a=page.placeorder.order;var b=jQuery("#results_info_promocode").val();a.PromoCode=b;if(String.IsNullOrEmpty(b)){a.PromoCode=null;uc.result.Promotion=null;OrderHelper.CaculatePromotion(a,uc.result.UserPriceList,null);uc.result.RenderOrderPriceInfo();return}else{framework.common.Ajax({url:"PlaceOrder.aspx/GetPromotion",data:{promotionCode:b,listtype:a.ListType},success:function(d){if(d.ResultFlag==true&&d.DataSource!=null){uc.result.Promotion=d.DataSource;a.PromoCode=b;OrderHelper.CaculatePromotion(a,uc.result.UserPriceList,uc.result.Promotion);uc.result.RenderOrderPriceInfo()}else{a.PromoCode=null;OrderHelper.CaculatePromotion(a,uc.result.UserPriceList,null);uc.result.RenderOrderPriceInfo()}},error:function(d){}})}}else{var a=page.placeorder.order;uc.result.Promotion=c;a.PromoCode=c.PromotionCode;OrderHelper.CaculatePromotion(a,uc.result.UserPriceList,uc.result.Promotion);uc.result.RenderOrderPriceInfo()}},CheckPayment_IfNeeded:function(){var a=page.placeorder.order;uc.result.PassPay_For_DebitCard=false;if(a.PaymentMethod==entity.enums.PaymentMethod.CreditCard){if(uc.result.Promotion&&uc.result.Promotion.PromotionType==entity.enums.PromotionType.DEBIT_CARD){if(a.TotalEstmCost>0){jQuery("#payment_bill_creditcard").removeClass("hidden")}else{jQuery("#payment_bill_creditcard").addClass("hidden");uc.result.PassPay_For_DebitCard=true}}else{jQuery("#payment_bill_creditcard").removeClass("hidden")}}},GeoQty_Change:function(d){var a=page.placeorder.order;var c=$(d);var b=c.attr("rowindex");var e=Number(c.val());var g=Number(c.attr("max"));if(e>g){e=g;c.val(e)}if((a.TotalDesiredQty-a.OrderGeos[b].DesiredQty+e)<page.placeorder.minQuantityOfOrder){uc.result.Show_Error(String.format(" The quantity that you entered is less than the minimum quantity of {0}.",page.placeorder.minQuantityOfOrder));c.parent().parent().find("input[type='checkbox']").attr("checked","checked");c.val(a.OrderGeos[b].DesiredQty);return}else{uc.result.Clear_Error()}var f=$(d).parent().parent().find("input[type='checkbox']");f[0].checked=e>0;a.OrderGeos[b].DesiredQty=e;OrderHelper.SetGeoDetailsDesiredByDetail(a.OrderGeos[b],e);OrderHelper.RecaculateTotalQty(a);OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.RenderOrderPriceInfo();uc.result.ChangeNumberRender4InfoPackage()},GeoQty_CheckBox:function(b){var a=$(b).parent().parent().find("input[type='text'][rowtype='geo']");if($(b)[0].checked==true){a.val(a.attr("max"))}else{a.val(0)}uc.result.GeoQty_Change(a[0])},GeoTotalQtyRaduis_Change:function(h){var d=page.placeorder.order;var b=$(h);if(isNaN(b.val())){b.val(d.TotalDesiredQty);uc.result.Show_Error(" The quantity that you entered is invalid.");return}var m=Number(b.val());var k=Number(b.attr("max"));if(m>k){m=k;b.val(m)}if(m<100){b.val(d.TotalDesiredQty);uc.result.Show_Error(" The quantity that you entered is less than the minimum quantity of 100.");return}else{uc.result.Clear_Error()}var l=m/k;var g=k-m;var a;for(var f=0;f<d.OrderGeos.length;f++){if(jQuery.isArray(d.OrderGeos[f].OrderGeoDetails)&&d.OrderGeos[f].OrderGeoDetails.length>0){for(var e=0;e<d.OrderGeos[f].OrderGeoDetails.length;e++){a=Math.round(d.OrderGeos[f].OrderGeoDetails[e].AvailableQty*l);d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=a;g=g-(d.OrderGeos[f].OrderGeoDetails[e].AvailableQty-d.OrderGeos[f].OrderGeoDetails[e].DesiredQty)}}}g=0-g;if(g!=0){for(var f=0;f<d.OrderGeos.length;f++){if(jQuery.isArray(d.OrderGeos[f].OrderGeoDetails)&&d.OrderGeos[f].OrderGeoDetails.length>0){for(var e=0;e<d.OrderGeos[f].OrderGeoDetails.length;e++){if(g==0){break}var c=d.OrderGeos[f].OrderGeoDetails[e].DesiredQty+g;if(c<0||c>d.OrderGeos[f].OrderGeoDetails[e].AvailableQty){if(d.OrderGeos[f].OrderGeoDetails[e].DesiredQty!=d.OrderGeos[f].OrderGeoDetails[e].AvailableQty){if(g>0){g=g-(d.OrderGeos[f].OrderGeoDetails[e].AvailableQty-d.OrderGeos[f].OrderGeoDetails[e].DesiredQty);d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=d.OrderGeos[f].OrderGeoDetails[e].AvailableQty}else{if(g<0){g=g+d.OrderGeos[f].OrderGeoDetails[e].DesiredQty;d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=0}}}}else{d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=c;g=0;break}}}}}$.each(d.OrderGeos,function(j,n){d.OrderGeos[j].DesiredQty=0;$.each(d.OrderGeos[j].OrderGeoDetails,function(p,o){d.OrderGeos[j].DesiredQty+=o.DesiredQty})});OrderHelper.RecaculateTotalQty(d);OrderHelper.CaculatePrice(d,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.RenderDetailPriceInfoRaduis(d);uc.result.RenderOrderPriceInfo()},GeoDetailQty_Change_Radius:function(e){var a=page.placeorder.order;var d=$(e);var c=Number(d.attr("subrowkey"));var h=Number(d.attr("geoindex"));var f=Number(d.val());var g=Number(d.attr("max"));if(f>g){f=g;d.val(f)}var b=a.OrderGeos[h].OrderGeoDetails[c];b.DesiredQty=f;OrderHelper.RecaculateTotalGeoQty(a,h);OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.RenderOrderPriceInfo();framework.common.Ajax({url:"PlaceOrder.aspx/UpdateDesiredQtyOfOrderGeoDetails",data:{geoIndex:h,geoDetailsIndex:c,DesiredQty:f},success:function(j){},error:function(j){alert("update Desired Qty error.")}})},GeoDetailQty_CheckBox_Radius:function(b){var a=$(b).parent().parent().find("input[type='text'][rowtype='geo']");if($(b)[0].checked==true){a.val(a.attr("max"))}else{a.val(0)}uc.result.GeoDetailQty_Change_Radius(a[0])},GeoDetailQty_Change:function(e){var d=page.placeorder.order;var a=$(e);var g=Number(a.attr("rowindex"));var h=Number(a.attr("geoindex"));var c=a.attr("qtytype");var j=Number(a.val());var f=Number(a.attr("max"));if(j>f){j=f;a.val(j)}var b=d.OrderGeos[h].OrderGeoDetails[g];if(c=="Home"){b.DesiredQtyHome=j}else{if(c=="Apts"){b.DesiredQtyApt=j}else{if(c=="Buss"){b.DesiredQtyBuss=j}else{if(c=="Total"){if(j==0){b.DesiredQtyHome=0;b.DesiredQtyApt=0;b.DesiredQtyBuss=0}else{b.DesiredQtyHome=b.AvailableQtyHome;b.DesiredQtyApt=b.AvailableQtyApt;b.DesiredQtyBuss=b.AvailableQtyBuss}}}}}b.DesiredQty=b.DesiredQtyHome+b.DesiredQtyApt+b.DesiredQtyBuss;OrderHelper.RecaculateTotalGeoQty(d,h);OrderHelper.CaculatePrice(d,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.Update_GeoDetail_Row_Html(d,h,g);uc.result.Update_Geo_Row_Html(d,h);uc.result.RenderOrderPriceInfo()},GeoDetailQty_CheckBox:function(b){var a=$(b).parent().next();if($(b)[0].checked==true){a.val(a.attr("max"))}else{a.val(0)}uc.result.GeoDetailQty_Change(a[0])},Geo_Detail_Expand:function(c,d){var a=page.placeorder.order;var b=$("#result_occu_geo_detail_row"+c);b.parent().toggleClass("hidden");if(b.parent().hasClass("hidden")==false){uc.result.Render_GeoDetails_Html(a,c);$(d).find("#expandImg").attr("src","usadata/images/btn_minus_sign.gif")}else{$(d).find("#expandImg").attr("src","usadata/images/btn_plus_sign.gif")}},Google_Map_Element:null,Render_goog_map:function(b){uc.result.Google_Map_Element=b;var a=page.placeorder.order.GeoType==entity.enums.GeoType.Radius?12:13;if(page.placeorder.order.GeoType==entity.enums.GeoType.ZipMap){a=10}framework.common.GoogleMap.LoadMapApi(function(){var c=new google.maps.Circle();b.jmap("init",{mapCenter:page.placeorder.MapCenter,mapZoom:a,mapEnableScrollZoom:true},function(){uc.result.Load_Google_Map_Js()})})},AddLayer:function(b){if(framework.common.IsWMSEnable&&page.placeorder.order.GeoType==entity.enums.GeoType.ZipMap){var a=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"CR":"ZIP";framework.common.addLayer(a,a,1,Mapifies.MapObjects.Get(uc.result.Google_Map_Element));if(page.placeorder.order.SearchAddresses.length>0){var c=page.placeorder.order.SearchAddresses[0];uc.result.Google_Map_Element.jmap("MoveTo",{mapCenter:[c.Latitude,c.Longitude]})}}},Load_Google_Map_Js:function(){var d=uc.result.Google_Map_Element;var b=d;var a=page.placeorder.order;if(a.SearchAddresses.length>0&&a.GeoType!=entity.enums.GeoType.ZipMap){if(a.TargetType==entity.enums.GeoType.ACXIOM_CloseX){a.SearchAddresses[0].Radius=a.MaxRadius;a.SearchAddresses[0].AddressName=a.SearchAddresses[0].AddressLine}framework.ui.ShowMarkers(a.SearchAddresses,b,false);var e=a.SearchAddresses[a.SearchAddresses.length-1];b.jmap("MoveTo",{mapCenter:[e.Latitude,e.Longitude]})}uc.result.AddLayer(d);if(a.GeoType==entity.enums.GeoType.ZipMap&&a.OrderGeos!=null){var f=[];uc.result.Overlays=new Object();jQuery.each(a.OrderGeos,function(g,h){f.push(h.GeoKeyDesc)});uc.geo.radius.MapZips=[];var c=page.placeorder.order.RadiusTypeChoice==entity.enums.RadiusTypeChoice.CRRT?"crid":"zip";framework.common.ShowGeoElements(c,f,uc.result.Overlays,uc.result.MapZips,Mapifies.MapObjects.Get(d),uc.result.AddGeoElement)}},Overlays:null,MapZips:[],AddGeoElement:function(d,b,c){var a=new Array();_.each(b,function(g){var f=new Array();_.each(g,function(l){f.push({points:l.encodedPoints,levels:l.encodedLevels,opacity:0.8,weight:2,numLevels:18,zoomFactor:2})});var h={center:new google.maps.LatLng(0,0),strokeWeight:2,strokeOpacity:1,fillOpacity:0.25,map:c,radius:100,clickable:false};var k=new google.maps.Circle(h);k.setMap(null);var e={strokeColor:"#0000ff",strokeWeight:2,strokeOpacity:1,fillColor:"#0000ff",fillOpacity:0.4,map:c,paths:google.maps.geometry.encoding.decodePath(f[0].points),clickable:false};var j=new google.maps.Polygon(e);a.push(j)});uc.result.Overlays[d]=a;if(!String.IsNullOrEmpty(d)){uc.result.MapZips.push(d)}},Render_Geos_Html:function(a){var b;if(a.TotalAvailableQty<page.placeorder.minQuantityOfOrder){$("#tdSearch_bottom").addClass("hidden");b="disabled";jQuery("td[attr='search_result_button']").addClass("hidden")}else{$("#tdSearch_bottom").removeClass("hidden");if(jQuery("td[attr='search_result_button']").hasClass("hidden")){jQuery("td[attr='search_result_button']").removeClass("hidden")}b=""}$("#ct_results_geos").setTemplateElement("ct_results_geos_template");$("#ct_results_geos").setParam("disable",b);$("#ct_results_geos").processTemplate(a);if(page.placeorder.order.GeoType==entity.enums.GeoType.Radius||page.placeorder.order.GeoType==entity.enums.GeoType.Closex||page.placeorder.order.GeoType==entity.enums.GeoType.Polygon||page.placeorder.order.GeoType==entity.enums.GeoType.MultiRadius||page.placeorder.order.GeoType==entity.enums.GeoType.MultiClosex||page.placeorder.order.GeoType==entity.enums.GeoType.AcxiomMultiRadius||page.placeorder.order.GeoType==entity.enums.GeoType.AcxiomZipRadius||page.placeorder.order.GeoType==entity.enums.GeoType.ZipMap){if(!page.placeorder.IsShowOrderGeoDetailQuantity){jQuery("#ct_result_raduis_address_table tr[attr='detail']").addClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_hide_detail").addClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_show_detail").addClass("hidden")}uc.result.Render_goog_map(jQuery("#geo_result_raduisMap"));$("#ct_results_geos input[type='text'][rowtype='total']").setMask("9999999999").bind("change",function(c){uc.result.GeoTotalQtyChange(this)}).bind("keydown",function(c){if(!framework.common.IsEnterKeyDown(c)){return true}framework.common.StopEvent(c);uc.result.GeoTotalQtyChange(this);return false});jQuery("#ct_result_radius_div").jScrollTouch()}else{if(!page.placeorder.IsShowOrderGeoDetailQuantity){jQuery("#adjustdt1 tr[attr='detail']").addClass("hidden")}$("#ct_results_geos input[type='text'][rowtype='total']").setMask("9999999999").bind("change",function(c){if(page.placeorder.IsValassisZip(a)){uc.result.GeoTotalQtyRaduis_Change(this)}else{uc.result.GeoTotalQtyChange(this)}}).bind("keydown",function(c){if(!framework.common.IsEnterKeyDown(c)){return true}framework.common.StopEvent(c);if(page.placeorder.IsValassisZip(a)){uc.result.GeoTotalQtyRaduis_Change(this)}else{uc.result.GeoTotalQtyChange(this)}return false});jQuery("#adjustdiv1").jScrollTouch()}uc.result.RendeGeoDetails(a);$("#ct_results_audience").setTemplateElement("ct_results_audience_template");$("#ct_results_audience").processTemplate(a);$("#ct_results_audience_panel").jScrollTouch();if(page.placeorder.order.GeoType==entity.enums.GeoType.Radius&&page.placeorder.order.SeeBreakDown==true&&page.placeorder.currentDataSource==entity.enums.DataSourceType.Consumer){jQuery("[name='span_seereport']").removeClass("hidden")}else{jQuery("[name='span_seereport']").addClass("hidden")}if(page.placeorder.isMultiCount){$("#ct_results_audience").addClass("hidden")}else{$("#ct_results_audience").removeClass("hidden")}},RendeGeoDetails:function(a){if(a.OrderGeos.length<1){return}if(a.ListType==entity.enums.DataSourceType.InfoUSAConsumer||a.ListType==entity.enums.DataSourceType.InfoUSABusiness||a.ListType==entity.enums.DataSourceType.InfoUSA_Consumer||a.ListType==entity.enums.DataSourceType.InfoUSA_Business){return}var b='<div class="orderGeoDetails"></div>';$maskOfGeo=$(b);$maskOfGeo.setTemplateElement("ct_result_geo_details_template");$maskOfGeo.processTemplate(a);jQuery(".geoDetails").replaceWith($maskOfGeo.html());if(a.GeoType==entity.enums.GeoType.Radius||a.GeoType==entity.enums.GeoType.MultiRadius||a.GeoType==entity.enums.GeoType.Closex||a.GeoType==entity.enums.GeoType.MultiClosex||a.GeoType==entity.enums.GeoType.Polygon||a.GeoType==entity.enums.GeoType.ZipMap||page.placeorder.IsValassisZip(a)){$("#ct_results_geos input[type='text'][rowtype='geo']").setMask("9999999999").bind("change",function(c){uc.result.GeoDetailQty_Change_Radius(this)}).bind("keydown",function(c){if(!framework.common.IsEnterKeyDown(c)){return true}framework.common.StopEvent(c);uc.result.GeoDetailQty_Change_Radius(this);return false});$("#ct_results_geos input[type='checkbox'][rowtype='geo']").bind("click",function(c){uc.result.GeoDetailQty_CheckBox_Radius(this)});if(!page.placeorder.IsValassisZip(a)){jQuery("#ct_result_raduis_address_table #raduis_hide_detail").removeClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_show_detail").addClass("hidden")}}else{$("#ct_results_geos input[type='text'][rowtype='geo']").setMask("9999999999").bind("change",function(c){uc.result.GeoQty_Change(this)}).bind("keydown",function(c){if(!framework.common.IsEnterKeyDown(c)){return true}framework.common.StopEvent(c);uc.result.GeoQty_Change(this);return false});$("#ct_results_geos input[type='checkbox'][rowtype='geo']").bind("click",function(c){uc.result.GeoQty_CheckBox(this)})}},GeoTotalQtyChange:function(h){var d=page.placeorder.order;var b=$(h);var m=Number(b.val());var k=Number(b.attr("max"));if(m>k){m=k;b.val(m)}if(m<page.placeorder.minQuantityOfOrder){b.val(d.TotalDesiredQty);uc.result.Show_Error(String.format(" The quantity that you entered is less than the minimum quantity of {0}.",page.placeorder.minQuantityOfOrder));return}else{uc.result.Clear_Error()}if(d.OrderGeos.length<1){framework.common.Ajax({url:"PlaceOrder.aspx/RedistributeOrderTotalQty",data:{totalDesiredQty:m},success:function(j){if(j.ResultFlag==true){d.TotalDesiredQty=m;uc.result.UpdateOrderAndPrice(d)}},waitingElement:"ct_results"})}else{var l=m/k;var g=k-m;var a;for(var f=0;f<d.OrderGeos.length;f++){if(jQuery.isArray(d.OrderGeos[f].OrderGeoDetails)&&d.OrderGeos[f].OrderGeoDetails.length>0){for(var e=0;e<d.OrderGeos[f].OrderGeoDetails.length;e++){a=Math.round(d.OrderGeos[f].OrderGeoDetails[e].AvailableQty*l);d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=a;g=g-(d.OrderGeos[f].OrderGeoDetails[e].AvailableQty-d.OrderGeos[f].OrderGeoDetails[e].DesiredQty)}}}g=0-g;if(g!=0){for(var f=0;f<d.OrderGeos.length;f++){if(jQuery.isArray(d.OrderGeos[f].OrderGeoDetails)&&d.OrderGeos[f].OrderGeoDetails.length>0){for(var e=0;e<d.OrderGeos[f].OrderGeoDetails.length;e++){if(g==0){break}var c=d.OrderGeos[f].OrderGeoDetails[e].DesiredQty+g;if(c<0||c>d.OrderGeos[f].OrderGeoDetails[e].AvailableQty){if(d.OrderGeos[f].OrderGeoDetails[e].DesiredQty!=d.OrderGeos[f].OrderGeoDetails[e].AvailableQty){if(g>0){g=g-(d.OrderGeos[f].OrderGeoDetails[e].AvailableQty-d.OrderGeos[f].OrderGeoDetails[e].DesiredQty);d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=d.OrderGeos[f].OrderGeoDetails[e].AvailableQty}else{if(g<0){g=g+d.OrderGeos[f].OrderGeoDetails[e].DesiredQty;d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=0}}}}else{d.OrderGeos[f].OrderGeoDetails[e].DesiredQty=c;g=0;break}}}}}$.each(d.OrderGeos,function(j,n){d.OrderGeos[j].DesiredQty=0;$.each(d.OrderGeos[j].OrderGeoDetails,function(p,o){d.OrderGeos[j].DesiredQty+=o.DesiredQty})});uc.result.UpdateOrderAndPrice(d)}},UpdateOrderAndPrice:function(a){OrderHelper.RecaculateTotalQty(a);OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);if(a.GeoType==entity.enums.GeoType.Radius||a.GeoType==entity.enums.GeoType.Closex||a.GeoType==entity.enums.GeoType.Polygon||a.GeoType==entity.enums.GeoType.MultiRadius||a.GeoType==entity.enums.GeoType.MultiClosex){uc.result.RenderDetailPriceInfoRaduis(a)}else{uc.result.RenderDetailPriceInfo(a)}uc.result.RenderOrderPriceInfo();uc.result.ChangeNumberRender4InfoPackage()},RenderDetailPriceInfo:function(a){var b=$("#ct_results_geos");for(i=0;i<a.OrderGeos.length;i++){b.find("input[type='text'][rowtype='geo'][rowindex='"+i+"']").val(a.OrderGeos[i].DesiredQty);if(a.OrderGeos[i].DesiredQty==0){b.find("input[type='checkbox'][rowtype='geo'][rowindex='"+i+"']").attr("checked",false)}else{b.find("input[type='checkbox'][rowtype='geo'][rowindex='"+i+"']").attr("checked",true)}}},RenderDetailPriceInfoRaduis:function(a){var b=$("#ct_results_geos tr[attr='detail']");b.each(function(f,g){var d=$(g);var c=d.find("input[type='text'][rowtype='geo']");var e=d.find("input[type='checkbox']");var j=c.attr("rowkey");var h=c.attr("subrowkey");c.val(a.OrderGeos[j].OrderGeoDetails[h].DesiredQty);if(a.OrderGeos[j].OrderGeoDetails[h].DesiredQty==0){e.attr("checked",false)}else{e.attr("checked",true)}})},Render_Geos_Html_Occupant:function(a){if(a.TotalAvailableQty<page.placeorder.minQuantityOfOrder){$("#tdSearch_bottom").addClass("hidden");jQuery("td[attr='search_result_button']").addClass("hidden")}else{$("#tdSearch_bottom").removeClass("hidden");if(jQuery("td[attr='search_result_button']").hasClass("hidden")){jQuery("td[attr='search_result_button']").removeClass("hidden")}}$("#ct_results_geos").setTemplateElement("ct_results_geos_occupant_template");$("#ct_results_geos").processTemplate(a);if(page.placeorder.order.GeoType==entity.enums.GeoType.Radius||page.placeorder.order.GeoType==entity.enums.GeoType.Closex||page.placeorder.order.GeoType==entity.enums.GeoType.MultiRadius||page.placeorder.order.GeoType==entity.enums.GeoType.MultiClosex||page.placeorder.order.GeoType==entity.enums.GeoType.ZipMap){uc.result.Render_goog_map(jQuery("#geo_result_raduisMap_occupant"))}$("#ct_results_occupant").setTemplateElement("ct_results_geodetails_occupant_template");$("#ct_results_occupant").processTemplate(a);$("#ct_results_occupant [type='checkbox'][rowtype='geo']").bind("click",function(h){$e=$(this);var f=$e.attr("rowindex");var c=$e.attr("qtytype");var b=$e[0].checked;var g=a.OrderGeos[f];g.DesiredQtyHome=0;g.DesiredQtyApt=0;g.DesiredQtyBuss=0;$.each(g.OrderGeoDetails,function(e,j){if(c=="Home"){g.OrderGeoDetails[e].DesiredQtyHome=b?g.OrderGeoDetails[e].AvailableQtyHome:0}else{if(c=="Apts"){g.OrderGeoDetails[e].DesiredQtyApt=b?g.OrderGeoDetails[e].AvailableQtyApt:0}else{if(c=="Buss"){g.OrderGeoDetails[e].DesiredQtyBuss=b?g.OrderGeoDetails[e].AvailableQtyBuss:0}else{if(c=="Total"){g.OrderGeoDetails[e].DesiredQtyHome=b?g.OrderGeoDetails[e].AvailableQtyHome:0;g.OrderGeoDetails[e].DesiredQtyApt=b?g.OrderGeoDetails[e].AvailableQtyApt:0;g.OrderGeoDetails[e].DesiredQtyBuss=b?g.OrderGeoDetails[e].AvailableQtyBuss:0}}}}g.OrderGeoDetails[e].DesiredQty=g.OrderGeoDetails[e].DesiredQtyHome+g.OrderGeoDetails[e].DesiredQtyApt+g.OrderGeoDetails[e].DesiredQtyBuss});OrderHelper.RecaculateTotalGeoQty(a,f);uc.result.Update_Geo_Row_Html(a,f);var d=$("#result_occu_geo_detail_row"+f).html("");if(d.parent().hasClass("hidden")==false){uc.result.Render_GeoDetails_Html(a,f)}OrderHelper.CaculatePrice(a,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);uc.result.RenderOrderPriceInfo();uc.result.ChangeNumberRender4InfoPackage()})},Render_GeoDetails_Html:function(a,c){var d=a.OrderGeos[c];d.index=c;var b=$("#result_occu_geo_detail_row"+c);if(b.html()==""){b.setTemplateElement("ct_results_geodetails_template");b.processTemplate(d);b.find("input[type='text'][rowtype='geo']").setMask("9999999").bind("change",function(f){uc.result.GeoDetailQty_Change(this)}).bind("keydown",function(f){if(!framework.common.IsEnterKeyDown(f)){return true}framework.common.StopEvent(f);uc.result.GeoDetailQty_Change(this);return false});b.find("input[type='checkbox']").bind("click",function(f){uc.result.GeoDetailQty_CheckBox(this)})}},Update_Total_Row_Html:function(a){$chks=$("#results_occu_total_row input[type='checkbox']");$chks[0].checked=a.DesiredQtyHome>0;$chks[1].checked=a.DesiredQtyApt>0;$chks[2].checked=a.DesiredQtyBuss>0;$spans=$("#results_occu_total_row span[rowtype='total']");$spans[0].innerHTML=a.DesiredQtyHome;$spans[1].innerHTML=a.DesiredQtyApt;$spans[2].innerHTML=a.DesiredQtyBuss;$spans[3].innerHTML=a.TotalDesiredQty},Update_Geo_Row_Html:function(a,c){var b=a.OrderGeos[c];$chks=$("#ct_results_occupant input[rowtype='geo'][rowindex='"+c+"']");$chks[0].checked=b.DesiredQtyHome>0;$chks[1].checked=b.DesiredQtyApt>0;$chks[2].checked=b.DesiredQtyBuss>0;$chks[3].checked=b.DesiredQty>0;$spans=$("#ct_results_occupant span[rowtype='geo'][rowindex='"+c+"']");$spans[0].innerHTML=b.DesiredQtyHome;$spans[1].innerHTML=b.DesiredQtyApt;$spans[2].innerHTML=b.DesiredQtyBuss;$spans[3].innerHTML=b.DesiredQty;uc.result.Update_Total_Row_Html(a)},Update_GeoDetail_Row_Html:function(a,e,d){var b=a.OrderGeos[e].OrderGeoDetails[d];var c=$("#result_occu_geo_detail_row"+e);$chks=c.find("input[type='checkbox'][rowindex='"+d+"']");$chks[0].checked=b.DesiredQtyHome>0;$chks[1].checked=b.DesiredQtyApt>0;$chks[2].checked=b.DesiredQtyBuss>0;$chks[3].checked=b.DesiredQty>0;$inputs=c.find("input[type='text'][rowindex='"+d+"']");$inputs[0].value=b.DesiredQtyHome;$inputs[1].value=b.DesiredQtyApt;$inputs[2].value=b.DesiredQtyBuss;$inputs[3].value=b.DesiredQty;$spans=c.find("span[rowindex='"+d+"']");$spans[0].innerHTML=b.DesiredQty},GetOrderAddress:function(c,b){if(c==null||String.IsNullOrEmpty(b)){return null}var a=null;for(var d in c){a=c[d];if(a.AddressName==b){return a}}},ResetMiles:function(){var a=[];if(page.placeorder.order.ListType!=entity.enums.DataSourceType.Occupant){a=$("#ct_results_geos input[attr='geo_result_miles']")}else{a=$("#ct_results_geos input[attr='geo_result_occupant_miles']")}var d=null;var l=framework.ui.GetRadiusUnitDesc(page.placeorder.RadiusUnit);for(var e=0;e<a.length;e++){d=a[e];var g=d.value;if(isNaN(Number(g))||g<=0||g>200){uc.result.Show_Error(String.format("The radius must be between 0.1 {0} to 200.0 {0}.",l));return}}if(page.placeorder.originalOrder==null){page.placeorder.originalOrder=page.placeorder.order}var k=null;var b=null;var h=null;var f=[];for(var e=0;e<a.length;e++){d=a[e];b=d.attributes.address.value;h=d.value;k=uc.result.GetOrderAddress(page.placeorder.order.OrderAddresses,b);var c=new entity.OrderGeo();var j=null;if(k!=null){k.Radius=h;j=String.format("{0}:{1}:{2}:{3}",k.Longitude,k.Latitude,k.Radius,page.placeorder.order.UmCode);k.AddrSearchString=j;k.GeoKeyCode=j;c.GeoKeyCode=j;c.AddressLine=j;c.GeoKeyDesc=k.AddressName;f.push(c)}}page.placeorder.order.OrderGeos=f;page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);framework.common.Ajax({url:"PlaceOrder.aspx/SubmitOrder",data:{order:page.placeorder.order},success:function(m){if(m.ResultFlag==true){page.placeorder.order=m.DataSource;page.placeorder.order.NextStep=entity.enums.OrderStep.PollCount;page.placeorder.GoNext()}},error:function(m){}})},Click_SaveCount:function(){uc.savecount.Init();page.placeorder.TrackOrderPathGAEvent("Step 3 - Save Count","Save Count Button");framework.ui.ShowDialog("ct_results_save_count",{appendForm:true,hermesTheme:true,fixedOnScroll:false})},Click_RequirePromotion:function(){framework.ui.ShowDialog("ct_results_promocode_popup")},Click_AnotherFormat:function(){framework.ui.ShowDialog("ct_results_need_other_format_popup")},Click_MoreAboutUseage:function(){framework.ui.ShowDialog("ct_result_more_about_useage")},Click_EditSelections_Geo:function(){var a=page.placeorder.order;page.placeorder.order.NextStep=entity.enums.OrderStep.Geo;page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);page.placeorder.GoNext({gotoresult:true})},Click_EditSelections_Demo:function(){page.placeorder.order.NextStep=entity.enums.OrderStep.Demo;page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);page.placeorder.GoNext()},CheckInputPrice:function(a){if(String.IsNullOrEmpty(a)||Number(a)<page.placeorder.order.GoodsCost){return false}return true},Click_Next:function(){uc.result.Clear_Error();var a=page.placeorder.order;a.ListUsage=Number(jQuery("input[name='results_listusages']:checked").attr("data-mul"));if(a.TotalDesiredQty<page.placeorder.minQuantityOfOrder){uc.result.Show_Error(String.format(" The quantity that you desired is less than the minimum quantity of {0}.",page.placeorder.minQuantityOfOrder));return}if(page.placeorder.IsInputPrice){var b=jQuery("#result_info_order_price_value").val();if(!uc.result.CheckInputPrice(b)){uc.result.Show_Error(String.format("The order price your entered is empty or less than the cost price {0}.",framework.common.formatPrice(page.placeorder.order.GoodsCost,4)));return}else{page.placeorder.order.RetailCost=page.placeorder.order.TotalEstmCost;page.placeorder.order.TotalEstmCost=Number(b)}}page.placeorder.order.NextStep=entity.enums.OrderStep.Payment;page.placeorder.GoNext()},Click_Back:function(){page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);page.placeorder.TrackOrderPathGAEvent("Step 3 - Count","Count Back Button");page.placeorder.GoBack()},Hide_Detail:function(){jQuery("#ct_result_raduis_address_table tr[attr='detail']").addClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_hide_detail").addClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_show_detail").removeClass("hidden")},Show_Detail:function(){if(page.placeorder.order.OrderGeos.length<1){jQuery(".geoDetails").removeClass("hidden");uc.result.GetOrderGeos()}else{jQuery("#ct_result_raduis_address_table tr[attr='detail']").removeClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_hide_detail").removeClass("hidden");jQuery("#ct_result_raduis_address_table #raduis_show_detail").addClass("hidden")}},Show_Error:function(a){jQuery("#result_error").removeClass("hidden");jQuery("#result_error").html(a);setTimeout(function(){uc.result.Clear_Error()},10000)},Clear_Error:function(){jQuery("#result_error").addClass("hidden");jQuery("#result_error").html("")},CheckDemobreakdown:function(){var a=page.placeorder.order;jQuery("#demoBreakdown").addClass("hidden");jQuery("#twoDimensionalReport").addClass("hidden");if(a==null||a.ListType==entity.enums.DataSourceType.Occupant){return}uc.result.StartTime=new Date();if(page.placeorder.isTwoDimensionalMatrixEnabled||page.placeorder.isDemoBreakdownEnabled){framework.common.Ajax({url:"PlaceOrder.aspx/IsExistingDemoBreakdown",data:{},success:function(b){if(b.ResultFlag==true){if(b.DataSource.Exists){if(page.placeorder.isTwoDimensionalMatrixEnabled&&(page.placeorder.order.GeoType!=entity.enums.GeoType.Radius&&page.placeorder.order.GeoType!=entity.enums.GeoType.ZipRadius&&page.placeorder.order.GeoType!=entity.enums.GeoType.Polygon&&page.placeorder.order.GeoType!=entity.enums.GeoType.Closex)){jQuery("#twoDimensionalReport").removeClass("hidden")}if(page.placeorder.isDemoBreakdownEnabled){jQuery("#ToShowBreakdownLink").attr("sid",a.ListModuleSessionId);jQuery("#demoBreakdown").removeClass("hidden")}}}framework.common.Log(uc.result.StartTime,"Check if existing demo breakdown")},error:function(b){jQuery("#demoBreakdown").addClass("hidden")}})}},ShowDemobreakdown:function(b){var a=$(b).attr("sid");$.fn.colorbox({href:String.format("OC/ShowCountBreakdown.aspx?sid={0}",a),iframe:true,width:540,height:600,opacity:0.5,scrolling:true});return false},ShowDemoBreakdownAndGeoDetails:function(b){var a=page.placeorder.order.ListModuleSessionId;$.fn.colorbox({href:String.format("OC/ShowCountBreakdownAndDetailReport.aspx?sid={0}",a),iframe:true,width:640,height:600,opacity:0.5,scrolling:false});return false},SetDemoBreakdown:function(b,a){jQuery("#demoBreakdown").addClass("hidden");jQuery("#twoDimensionalReport").addClass("hidden");if(b==null||a==null||a.ListType==entity.enums.DataSourceType.Occupant){return}if(b.Exists){if(page.placeorder.isTwoDimensionalMatrixEnabled&&(page.placeorder.order.GeoType!=entity.enums.GeoType.Radius&&page.placeorder.order.GeoType!=entity.enums.GeoType.ZipRadius&&page.placeorder.order.GeoType!=entity.enums.GeoType.Polygon&&page.placeorder.order.GeoType!=entity.enums.GeoType.Closex)){jQuery("#twoDimensionalReport").removeClass("hidden")}if(page.placeorder.isDemoBreakdownEnabled){jQuery("#ToShowBreakdownLink").attr("sid",a.ListModuleSessionId);jQuery("#demoBreakdown").removeClass("hidden")}}},ShowGeoAndDemoForTwoDimensionalReport:function(){var a=page.placeorder.order;uc.result.SelectsValue.clear();if(a.OrderGeos==null||a.OrderGeos.length<1){uc.result.GetOrderGeos()}uc.result.bindCriteriaForTwoDimensionalReport();uc.result.SelectsValue.AvailableGeos=a.OrderGeos;jQuery("#twoDimensionalReportResult").removeClass("hidden");jQuery("#twoDimensionalMessageDiv").addClass("hidden");framework.common.Ajax({url:"PlaceOrder.aspx/GetDemosFromDemoBreakdown",data:{order:page.placeorder.order},success:function(b){if(b.ResultFlag==true){uc.result.SelectsValue.AvailableDemos=b.DataSource.SelectedCategories;$("#TwoDimensionalReportGeo").setTemplateElement("GeoOfTwoDimensionalReport");$("#TwoDimensionalReportGeo").processTemplate(a);$("#TwoDimensionalReportDemo").setTemplateElement("DemoCategoryFromTwoDimensionalReport");$("#TwoDimensionalReportDemo").processTemplate(b.DataSource);$("#TargetEmail").val(b.DataSource.TargetEmail);framework.ui.ShowDialog("TwoDimensionalMatrixReportContainer")}},error:function(b){alert("Two dimensional report is not available for the selections you have made.")},waitingElement:"ct_results"})},ShowSuppressionOrders:function(){var b=page.placeorder.order;var d=b.OrderSuppressions;var e=b.CustomSuppressions;var a=b.SaveCountSuppressions;var c=0;framework.common.sortJson(d,"OriginalOrderId","desc",null);framework.common.sortJson(e,"OrderDate","desc",null);framework.common.sortJson(a,"OriginalOrderId","desc",null);jQuery("#divSuppressionOrder").removeClass("hidden");if(d!=undefined&&d.length>0){c=c+d.length;jQuery("#divpriorOrderSuppression").removeClass("hidden");jQuery("#priorOrderSuppressionContainer").removeClass("hidden");$("#priorOrderSuppressionContainer").setTemplateElement("priorOrderSuppression");$("#priorOrderSuppressionContainer").processTemplate(d)}else{jQuery("#divpriorOrderSuppression").addClass("hidden");jQuery("#priorOrderSuppressionContainer").addClass("hidden")}if(e!=undefined&&e.length>0){c=c+e.length;jQuery("#divcustomerOrderSuppression").removeClass("hidden");jQuery("#customerOrderSuppressionContainer").removeClass("hidden");$("#customerOrderSuppressionContainer").setTemplateElement("customerOrderSuppression");$("#customerOrderSuppressionContainer").processTemplate(e)}else{jQuery("#divcustomerOrderSuppression").addClass("hidden");jQuery("#customerOrderSuppressionContainer").addClass("hidden")}if(a!=undefined&&a.length>0){c=c+a.length;jQuery("#divcountOrderSuppression").removeClass("hidden");jQuery("#countOrderSuppressionContainer").removeClass("hidden");$("#countOrderSuppressionContainer").setTemplateElement("countOrderSuppression");$("#countOrderSuppressionContainer").processTemplate(a)}else{jQuery("#divcountOrderSuppression").addClass("hidden");jQuery("#countOrderSuppressionContainer").addClass("hidden")}if(c>20){jQuery("#SuppressionOrderContainer").attr("style","width:400px; height:400px;");jQuery("#divSuppressionOrders").attr("style","overflow-y:auto;height:360px;")}else{jQuery("#SuppressionOrderContainer").attr("style","width:400px;")}framework.ui.ShowDialog("SuppressionOrderContainer")},addGeoCriteriaForTwoDimensionalReport:function(){var a=jQuery("#TwoDimensionalReportGeo").val();var c=jQuery("#TwoDimensionalReportGeo option:selected");var b=c.attr("desc");if(String.IsNullOrEmpty(a)&&b=="All"){uc.result.addAllGeosForTwoDimensionalReport()}else{if(!String.IsNullOrEmpty(a)){uc.result.SelectsValue.addGeo(a,b)}}uc.result.bindCriteriaForTwoDimensionalReport()},addAllGeosForTwoDimensionalReport:function(){jQuery.each(uc.result.SelectsValue.AvailableGeos,function(a,b){uc.result.SelectsValue.addGeo(b.GeoKeyCode,b.GeoKeyDesc)})},removeGeoCriteriaForTwoDimensionalReport:function(){var a=jQuery("#TwoDimensionalReportGeo").val();if(String.IsNullOrEmpty(a)){return}var b=jQuery("#TwoDimensionalReportGeo option:selected");uc.result.SelectsValue.removeGeo(a);uc.result.bindCriteriaForTwoDimensionalReport()},addDemoCriteriaForTwoDimensionalReport:function(){var d=jQuery("#TwoDimensionalReportDemo").val();if(String.IsNullOrEmpty(d)){return}var f=jQuery("#TwoDimensionalReportDemo option:selected");var e=f.attr("valuename");var c=f.attr("attrname");var b=f.attr("columnname");var a=f.attr("sortseq");uc.result.SelectsValue.addDemo(b,c,d,e,a);uc.result.bindCriteriaForTwoDimensionalReport()},addDemoCategoryCriteriaForTwoDimensionalReport:function(){var a=jQuery("#TwoDimensionalReportDemo").val();if(String.IsNullOrEmpty(a)){return}var c=jQuery("#TwoDimensionalReportDemo option:selected");var b=c.attr("attrname");uc.result.SelectsValue.addDemoCategory(a,b);uc.result.bindCriteriaForTwoDimensionalReport()},removeDemoCriteriaForTwoDimensionalReport:function(){var b=jQuery("#TwoDimensionalReportDemo").val();if(String.IsNullOrEmpty(b)){return}var d=jQuery("#TwoDimensionalReportDemo option:selected");var c=d.attr("valuename");var a=d.attr("columnname");uc.result.SelectsValue.removeDemo(a,b);uc.result.bindCriteriaForTwoDimensionalReport()},removeCriteriaForTwoDimensionalReport:function(){var a=jQuery("#criteria option:selected");jQuery.each(a,function(){var b=jQuery(this);var c=b.attr("datatype");var d=b.val();if(c=="geo"){if(String.IsNullOrEmpty(d)){uc.result.SelectsValue.SelectedGeos=[]}else{uc.result.SelectsValue.removeGeo(d)}}else{if(c=="demo"){if(String.IsNullOrEmpty(d)){uc.result.SelectsValue.SelectedDemos=[]}else{uc.result.SelectsValue.removeDemoCategory(d)}}}});uc.result.bindCriteriaForTwoDimensionalReport()},bindCriteriaForTwoDimensionalReport:function(){var c=jQuery("#criteria");c.html("");var b="";var a="<option style='{0}' value='{1}' datatype='{3}'>{2}</option>";if(uc.result.SelectsValue.SelectedGeos.length>0){b=String.format(a,"","","Rows:","geo");b=b+String.format(a,"margin-left: 10px;","","Geography","geo");jQuery.each(uc.result.SelectsValue.SelectedGeos,function(d,e){b=b+String.format(a,"margin-left:20px;",e.GeoKeyCode,e.GeoKeyDesc,"geo")})}if(uc.result.SelectsValue.SelectedDemos.length>0){b=b+String.format(a,"","","Columns:","demo");jQuery.each(uc.result.SelectsValue.SelectedDemos,function(d,e){b=b+String.format(a,"margin-left:20px;",e.ColumnName,e.AttributeName,"demo")})}c.html(b)},Submit2DReportRequest:function(){var c=jQuery("#searchDescription").val();var a=jQuery("#TargetEmail").val();if(String.IsNullOrEmpty(a)){alert("Please enter the email address");return}var b=[];if(uc.result.SelectsValue.SelectedDemos.length<1){b=uc.result.SelectsValue.AvailableDemos}else{b=uc.result.SelectsValue.SelectedDemos}var d=[];if(uc.result.SelectsValue.SelectedGeos.length<1){d=uc.result.SelectsValue.AvailableGeos}else{d=uc.result.SelectsValue.SelectedGeos}framework.common.Ajax({url:"PlaceOrder.aspx/Submit2DReportConditions",data:{order:page.placeorder.order,demoCategories:b,geos:d,desc:c,delimiterOfEmails:",",targetEmail:a},success:function(e){if(e.ResultFlag==true){jQuery("#recipients").html(a);jQuery("#twoDimensionalReportResult").addClass("hidden");jQuery("#twoDimensionalMessageDiv").removeClass("hidden")}},error:function(e){alert("Fail to submit two dimensional report request")},waitingElement:"TwoDimensionalMatrixReportContainer"})},ClearFields:function(){uc.result.SelectsValue.clearSelected();uc.result.bindCriteriaForTwoDimensionalReport()},PopUpRenderFacebook:function(){$.fn.colorbox({href:"help/facebook.htm",iframe:true,width:920,height:700,opacity:0.5,scrolling:true})},PopUpRenderNewMobile:function(){$.fn.colorbox({href:"help/MobileAd.htm",iframe:true,width:920,height:700,opacity:0.5,scrolling:true})},GetExcelReport:function(){var b=jQuery("#searchDescription").val();var a=[];if(uc.result.SelectsValue.SelectedDemos.length<1){a=uc.result.SelectsValue.AvailableDemos}else{a=uc.result.SelectsValue.SelectedDemos}var c=[];if(uc.result.SelectsValue.SelectedGeos.length<1){c=uc.result.SelectsValue.AvailableGeos}else{c=uc.result.SelectsValue.SelectedGeos}framework.common.Ajax({url:"PlaceOrder.aspx/GenerateTwoDimensionalMatrixForExcel",data:{demoCategories:a,geos:c,desc:b},success:function(d){if(d.ResultFlag==true){window.location.href=d.DataSource}else{alert(d.ResultMessage)}},error:function(d){alert("Fail to download report")},waitingElement:"TwoDimensionalMatrixReportContainer"})},SelectsValue:{SelectedDemos:[],SelectedGeos:[],AvailableDemos:[],AvailableGeos:[],addDemoCategory:function(a,b){var c=uc.result.SelectsValue.AvailableDemos;var d=jQuery.grep(c,function(e){if(e.ColumnName==a){jQuery.each(e.Values,function(f,g){uc.result.SelectsValue.addDemo(e.ColumnName,b,g.AttributeValue,g.AttributeValueName,f)})}})},addDemo:function(h,c,f,a,d){var b=new entity.SelectedDemoCategory();var g=false;for(var e=0;e<uc.result.SelectsValue.SelectedDemos.length;e++){if(uc.result.SelectsValue.SelectedDemos[e].ColumnName==h){b=uc.result.SelectsValue.SelectedDemos[e];g=true;break}}b.ColumnName=h;b.AttributeName=c;var j=d||0;b.addValue(f,a,j);if(!g){uc.result.SelectsValue.SelectedDemos=[];uc.result.SelectsValue.SelectedDemos.push(b)}},removeDemo:function(b,a){uc.result.SelectsValue.SelectedDemos=$.grep(uc.result.SelectsValue.SelectedDemos,function(c){if(c.ColumnName==b){c.removeValue(a);if(c.Values.length==0){return false}}return true})},removeDemoCategory:function(a){uc.result.SelectsValue.SelectedDemos=$.grep(uc.result.SelectsValue.SelectedDemos,function(b){if(b.ColumnName==a){return false}return true})},addGeo:function(a,c){var e=new entity.OrderGeo();e.GeoKeyCode=a;e.GeoKeyDesc=c;var d=false;for(var b=0;b<uc.result.SelectsValue.SelectedGeos.length;b++){if(uc.result.SelectsValue.SelectedGeos[b].GeoKeyCode==a){e=uc.result.SelectsValue.SelectedGeos[b];d=true}}if(!d){uc.result.SelectsValue.SelectedGeos.push(e);framework.common.sortJson(uc.result.SelectsValue.SelectedGeos,"GeoKeyDesc","asc")}},removeGeo:function(a){uc.result.SelectsValue.SelectedGeos=$.grep(uc.result.SelectsValue.SelectedGeos,function(b){return b.GeoKeyCode!=a})},clearSelected:function(){uc.result.SelectsValue.SelectedGeos=[];uc.result.SelectsValue.SelectedDemos=[]},clear:function(){uc.result.SelectsValue.SelectedGeos=[];uc.result.SelectsValue.SelectedDemos=[];uc.result.SelectsValue.AvailableDemos=[];uc.result.SelectsValue.AvailableGeos=[]}},CalculateCost:function(){jQuery("#results_info_of_cost_of_goods").addClass("hidden");if(page.placeorder.isDLGReseller){jQuery("#TotalPriceHeader").html("Recommended Price:");var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/getCostOfOrders",data:{order:a},success:function(b){if(b.ResultFlag==true){jQuery("#results_info_cost_of_goods").html(framework.common.formatMoney(b.DataSource.CostOfOrder));jQuery("#results_info_projected_profit").html(framework.common.formatMoney(b.DataSource.Profit));jQuery("#results_info_of_cost_of_goods").removeClass("hidden")}},error:function(b){}})}},DoOrderQuote:function(){uc.result.Clear_Error();page.placeorder.TrackOrderPathGAEvent("Step 3 - Send Quote","Send Quote Button");var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/IsOrderQuoteAvailable",data:{order:a},success:function(b){if(b.ResultFlag==true){if(b.DataSource.OrderExisted&&b.DataSource.OrderAvailable){$.fn.colorbox({href:"Dialogs/OrderQuote.aspx",iframe:true,width:750,height:830,opacity:0.5,scrolling:true})}else{uc.result.Show_Error('In order to "Send Quote", please first "Save Count".')}}},error:function(b){},waitingElement:"ct_main_panel"});return false},NailPoint:function(e){var c=jQuery(e).attr("address");if(String.IsNullOrEmpty(c)){return}var h=page.placeorder.order;var b=null;var a=null;for(var d in h.SearchAddresses){a=h.SearchAddresses[d];if(a.AddressName==c){b=a;break}}if(b!=null){uc.result.Google_Map_Element.jmap("ClearMap");if(page.placeorder.order.GeoType!=entity.enums.GeoType.Polygon){var g=Number(b.Radius);if(g>0){uc.result.Google_Map_Element.jmap("AddRoundGroundOverlay",{mapCenter:[b.Latitude,b.Longitude],radius:b.Radius})}}else{var f=uc.geo.radius.ParsePoints(b.AddrSearchString);uc.geo.radius.DrawPolygon(uc.result.Google_Map_Element,f)}uc.result.Google_Map_Element.jmap("AddMarker",{pointLatLng:[b.Latitude,b.Longitude],pointIcon:"themes/default/assets/images/gmap/mm_20_blue.png",pointTitle:b.AddressName});uc.result.Google_Map_Element.jmap("MoveTo",{mapCenter:[b.Latitude,b.Longitude]})}},RequestCountReport:function(){uc.result.ShowRequestCountReportMessage(null,false);var b=jQuery("#countReportRecipient").val().trim();var c=jQuery("#countReportRecipientCC").val().trim();var d=jQuery("#countReportName").val().trim();if(String.IsNullOrEmpty(b)){uc.result.ShowRequestCountReportMessage("Please set target email.",true);return}if(String.IsNullOrEmpty(d)){uc.result.ShowRequestCountReportMessage("Please name this count.",true);return}var a=page.placeorder.order;framework.common.Ajax({url:"PlaceOrder.aspx/GetCountReport",data:{recipient:b,recipientCC:c,reportName:d},success:function(e){if(e.ResultFlag==true){uc.result.ShowRequestCountReportMessage("The request to get count report has been sent successfully.",true)}else{uc.result.ShowRequestCountReportMessage("Fail to send request to get count report, please try again.",true)}},error:function(e){uc.result.ShowRequestCountReportMessage("Fail to send request to get count report, please try again.",true)},waitingElement:"getCountReportDiv"});return false},ShowRequestCountReportMessage:function(c,a){var b=jQuery("#countReportMessage");if(!a){b.html("");b.addClass("hidden")}else{b.html(c);b.removeClass("hidden")}},ShowRequestCountReport:function(){framework.ui.ShowDialog("InfoUSACountReports")}};var toJSONOrder=function(){return jQuery.toJSON(page.placeorder.order)};var evalJSONOrder=function(a){page.placeorder.order=jQuery.evalJSON(a)};
;
ni.RegisterNameSpace("uc");uc.savecount={_Validator:null,_IsInit:false,_UserCountry:null,Init:function(){if(page.placeorder.currentDataSource==entity.enums.DataSourceType.Mobile_Consumer_Advertising){var a="<div class='dialog-title-m'>Save Campaign</div><div class='break'></div><div class='dialog-description'><span>Please complete the form below to save your campaign. Upon completion you will:</span><ul style='list-style-type: decimal; margin-top: 0pt; margin-bottom: 0pt;'><li>Instantly receive links to download (pdf) and print this quote</li><li>Receive an email with a link to retrieve your saved campaign</li></ul></div>";jQuery("#ct_result_save_count_header").html(a);jQuery("#slc_interesting").addClass("hidden");jQuery("#ct_result_save_count_special").html("campaign")}var b=page.placeorder.order;uc.savecount.ShowSaveCountEditing(b);uc.savecount.SetErrorMessage();if(!uc.savecount._IsInit){uc.savecount._IsInit=true;$("#results_sc_phone").setMask("(999) 999-9999");$("#results_sc_phoneext").setMask("99999")}},Continue:function(){var c=page.placeorder.order;framework.common.LogClickEvent("Click continue button in save count page.",null,"Continue.");uc.savecount.Save_Data();var a=page.placeorder.order;var b=uc.savecount.DoValidation();if(typeof(page.placeorder.CurrentSessionId)==null||typeof(page.placeorder.CurrentSessionId)=="undefined"){uc.payment.SetErrorMessage(true,"The browser didn't get session.");return}if(page.placeorder.CurrentSessionId==""){uc.payment.SetErrorMessage(true,"Browser session value is empty.");return}if(b){uc.savecount.Load_Google_Analytics_Js_For_SLC();framework.ui.showWaiting("ct_results_save_count_edit",true);uc.savecount.Click_Google_Analytics_SaveCount();framework.common.Ajax({url:"PlaceOrder.aspx/SaveCount",data:{order:a,currentSessionId:page.placeorder.CurrentSessionId},success:function(d){framework.ui.showWaiting("ct_results_save_count_edit",false);if(!d.ResultFlag){uc.savecount.SetErrorMessage(true,d.ResultMessage);return}var e=d.DataSource;if(e!=null){uc.savecount.ShowOrderDetail(a)}},error:function(d){framework.ui.showWaiting("ct_results_save_count_edit",false);uc.savecount.SetErrorMessage(true,"Unfortunately, the system is unable to process your request. Our technical support specialists have been notified. Thank you for your patience while we work to resolve the error.")}})}},Click_Google_Analytics_SaveCount:function(){if(typeof ga!=="undefined"){ga("send","event","Save Count","Clicked through to save count")}if(typeof _gaq!=="undefined"){_gaq.push(["_trackEvent","Save Count","Clicked through to save count"])}},Load_Google_Analytics_Js:function(){$.getScript("//www.googleadservices.com/pagead/conversion.js");$("#SaveCount_Google_Analytics_Js")[0].innerHTML='<script type="text/javascript">try {var pageTracker = _gat._getTracker("UA-3481158-4");pageTracker._trackPageview("/0480296263/goal");} catch (err) { }<\/script><noscript><img height=1 width=1 border=0 src=\'http://www.googleadservices.com/pagead/conversion/1072646300/?value=2&label=Zl1MCNHaRhCckb3_Aw&script=0\' ></img>';"</noscript>;"},Load_Google_Analytics_Js_For_SLC:function(){$.getScript("//www.googleadservices.com/pagead/conversion.js");$("#SaveCount_Google_Analytics_Js_For_SLC")[0].innerHTML='<script type="text/javascript">try {var google_conversion_id = 1072646300;var google_conversion_language = "en_US";var google_conversion_format = "1";var google_conversion_color = "ffffff";var google_conversion_label = "Zl1MCNHaRhCckb3_Aw";var google_conversion_value = 3;pageTracker._trackPageview("/0480296263/goal");} catch (err) { }<\/script><noscript><div style="display:inline;"><img height=\'1\' width=\'1\' style="border-style:none;" alt=\'\' src=\'http://www.googleadservices.com/pagead/conversion/1072646300/?value=3&amp;label=Zl1MCNHaRhCckb3_Aw&amp;guid=ON&amp;script=0\' /></div>';"</noscript>;"},Save_Data:function(){var b=parent.page.placeorder.order;var a=b.OrderContactInformation;if(a==null){a=new entity.OrderContact()}a.FirstName=jQuery("#results_sc_firstname").val();a.LastName=jQuery("#results_sc_lastname").val();a.Company=jQuery("#results_sc_company").val();a.Phone=jQuery("#results_sc_phone").val();a.Email=jQuery("#results_sc_email").val();a.OrderName=jQuery("#results_sc_ordername").val();a.CallMe=jQuery("#results_sc_callme")[0].checked;a.OrderForClients=jQuery("#results_sc_orderforclient")[0].checked;a.AddToMailingList=false;a.CountryCode=String.IsNullOrEmpty(a.CountryCode)?"US":a.CountryCode;a.IsContactMeByEmail=jQuery("#results_sc_contact_me").attr("checked");a.IsSendEmailToList=jQuery("#results_sc_contact_list").attr("checked");b.OrderContactInformation=a},ShowSaveCountEditing:function(c){jQuery("#ct_results_save_count_edit").removeClass("hidden");jQuery("#ct_results_save_count_success").addClass("hidden");uc.savecount.SetErrorMessage(false);framework.common.LogClickEvent("Save count page init",null,"Load_Data.");if(page.global.IsVertaxEnabled){jQuery("#results_sc_taxnote").removeClass("hidden")}var a=c.OrderContactInformation;if(a!=null){jQuery("#results_sc_firstname").val(a.FirstName);jQuery("#results_sc_lastname").val(a.LastName);jQuery("#results_sc_company").val(a.Company);jQuery("#results_sc_phone").val(a.Phone);jQuery("#results_sc_email").val(a.Email);jQuery("#results_sc_ordername").val(a.OrderName)}else{jQuery("#results_sc_ordername").val("");var b=null;framework.common.Ajax({url:"PlaceOrder.aspx/GetUserInformation",success:function(e){if(e.ResultFlag==true){b=e.DataSource;if(b!=null){var d=new entity.OrderContact();d.FirstName=b.FirstName;d.LastName=b.LastName;d.Company=b.Company;d.Email=b.Email;if(!String.IsNullOrEmpty(b.HomePhone)){var g=b.HomePhone;g=g.replace("(","").replace(")","").replace(" ","").replace("x","").replace("-","");d.Phone=String.format("({0}) {1}-{2}",g.substr(0,3),g.substr(3,3),g.substr(6,4))}if(b.UsersAddress!=null&&b.UsersAddress.length>0){var f=b.UsersAddress[0];d.AddressLine=f.AddressLine;d.City=f.CityName;d.State=f.StateCode;d.Zipcode=f.ZipCode;d.CountryCode=f.CountryCode}c.OrderContactInformation=d;jQuery("#results_sc_firstname").val(d.FirstName);jQuery("#results_sc_lastname").val(d.LastName);jQuery("#results_sc_company").val(d.Company);jQuery("#results_sc_email").val(d.Email);if(!String.IsNullOrEmpty(d.Phone)){var g=b.HomePhone;g=g.replace("(","").replace(")","").replace(" ","").replace("x","").replace("-","");jQuery("#results_sc_phone").val(d.Phone);if(g.length>10){jQuery("#results_sc_phoneext").val(d.Phone.substr(10,d.Phone.length-10))}}}else{uc.savecount.ResetSaveCount()}}},error:function(d){uc.savecount.ResetSaveCount()},waitingElement:"ct_results_save_count"})}},ResetSaveCount:function(){jQuery("#results_sc_firstname").val("");jQuery("#results_sc_lastname").val("");jQuery("#results_sc_company").val("");jQuery("#results_sc_phone").val("");jQuery("#results_sc_email").val("")},ShowOrderDetail:function(b){jQuery("#ct_results_save_count_edit").addClass("hidden");jQuery("#ct_results_save_count_success").removeClass("hidden");var a=b.OrderContactInformation;if(a!=null){if(page.placeorder.currentDataSource==entity.enums.DataSourceType.Mobile_Consumer_Advertising){jQuery("#results_sc_success_titledesc").html(String.format("An email has been sent to {0} with a link to retrieve your campaign. ",a.Email))}else{jQuery("#results_sc_success_titledesc").html(String.format("An email has been sent to {0} with a link to retrieve your saved count. ",a.Email))}jQuery("#results_sc_success_firstname").val(a.FirstName);jQuery("#results_sc_success_lastname").val(a.LastName);jQuery("#results_sc_success_company").val(a.Company);jQuery("#results_sc_success_phone").val(a.Phone);jQuery("#results_sc_success_email").val(a.Email);jQuery("#results_sc_success_ordername").val(a.OrderName)}},GetValidator:function(){var a=jQuery("form[name='PopupForm']").validate({rules:{results_sc_firstname:{required:true},results_sc_lastname:{required:true},results_sc_company:{required:true},results_sc_email:{required:true,email:true},results_sc_ordername:{required:true}},messages:{results_sc_firstname:{required:"Please enter your first name. "},results_sc_lastname:{required:"Please enter your last name. "},results_sc_company:{required:"Please enter your company name. "},results_sc_email:{email:"Please enter a valid email address",required:"Please enter your email address. "},results_sc_ordername:{required:"Please name your list count."}},errorContainer:jQuery("#SLC_ValidateSummay"),errorLabelContainer:jQuery("ul",jQuery("#SLC_ValidateSummay")),wrapper:"li"});return a},DoValidation:function(){var a=uc.savecount.GetValidator();a.resetForm();if(!a.form()){jQuery("#SLC_ValidateSummay").removeClass("hidden");return false}else{jQuery("#SLC_ValidateSummay").addClass("hidden");return true}},SetErrorMessage:function(a,b){if(a){jQuery("#results_sc_error").removeClass("hidden").html(b)}else{jQuery("#ct_results_save_count_edit input[class*='error']").removeClass("error");jQuery("#SLC_ValidateSummay").addClass("hidden");jQuery("#results_sc_error").addClass("hidden")}}};
;
ni.RegisterNameSpace("uc");uc.payment={_IsInit:false,CurrentPaymentMethod:null,Countries:[],InternationalText:[],CreditCard:{CCNumber:"",CCType:"10",MaskNumber:"",NeedValidation:true},IsContactAddressComplete:false,enableSanNumber:false,SanNumberIsActive:false,TaxResult:null,MaxRetries:3,Retries:0,InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.Payment;b.StepTitle="";b.StepDescription="<b>You're almost finished!</b> Please confirm the order details below are correct and then enter your contact and payment information. Click 'Process Order' to complete your order. Once your payment is approved, you will receive an email with your order confirmation and receipt, with details on accessing your leads.";b.StepButtonsStatus=entity.enums.StepButtons.Back|entity.enums.StepButtons.PlaceOrder;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.Back,ButtonEvent:uc.payment.Click_Back},{ButtonKey:entity.enums.StepButtons.PlaceOrder,ButtonEvent:uc.payment.ProcessOrder}];return b},Init:function(){page.placeorder.order.CurrentStep=entity.enums.OrderStep.Payment;uc.payment.SetErrorMessage(false,"");if(framework.common.IsRegisteredSite){var b=uc.payment.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,b)}jQuery("#payment_ValidateSummay").addClass("hidden");var a=(new Date()).getFullYear()+1;jQuery("#payment_bill_year").val(a);uc.payment.GetOrderContact();uc.payment.LoadCountries();uc.payment.GetOrder();if(!page.placeorder.IsShowOrderGeoDetailQuantity){jQuery("#orderDetails td[attr='selectedQuantity']").addClass("hidden")}uc.payment.ProcessContactInfor();if(!uc.payment._IsInit){uc.payment._IsInit=true;$("#payment_agreement").colorbox({iframe:true,width:670,height:600,opacity:0.5,scrolling:false})}$("#payment_contact_firstname").first().focus()},LoadCountries:function(){var b="US";var a=page.placeorder.order.OrderContactInformation;if(a!=null&&!String.IsNullOrEmpty(a.CountryCode)){b=a.CountryCode}if(uc.payment.Countries.length<1){framework.common.Ajax({url:"PlaceOrder.aspx/GetCountries",data:{},success:function(c){if(c.ResultFlag==true){uc.payment.Countries=c.DataSource;jQuery("#countriesOfContactDiv").html(uc.payment.FillCountries("countryOfContact",uc.payment.Countries,"countryOfContact","uc.payment.LoadStatesOfContactByCountry()"));jQuery("input[type=radio][name=countryOfContact][value="+b+"]").attr("checked","checked");jQuery("#countriesOfBillDiv").html(uc.payment.FillCountries("countryOfBill",uc.payment.Countries,"countryOfBill","uc.payment.LoadStatesOfBillByCountry()"));jQuery("#divcountries").html(uc.payment.FillCountries("country",uc.payment.Countries,"country","uc.payment.LoadStatesOfByCountry()"));jQuery("input[type=radio][name=countryOfBill][value="+b+"]").attr("checked","checked");jQuery("input[type=radio][name=country][value="+b+"]").attr("checked","checked");if(page.global.isMyAcxiomPartnerUSite){uc.payment.LoadStates(b,false)}else{if(framework.common.IsRegisteredSite){uc.payment.LoadStates(b,true)}else{uc.payment.LoadStates(b,false)}}uc.payment.LoadInternationalText()}},error:function(c){}})}},FillCountries:function(b,a,d,e){var f="";var c="<input type='radio' id='{0}{1}' name='{2}' value='{3}' onClick='javascript:{5};'  ></input><label id='{0}{1}label' for='{0}{1}'>{4}</label>";if(a==null||a.length<1){return f}jQuery.each(a,function(g,h){f=f+String.format(c,b,h.CountryCode,d,h.CountryCode,h.CountryName,e)});return f},LoadStatesOfContactByCountry:function(){var a=jQuery("input[type=radio][name=countryOfContact]:checked").val();if(String.IsNullOrEmpty(a)){a="US"}if(jQuery("#payment_bill_same_as_contact:checked").length>0){var b=jQuery("input[type=radio][name=countryOfBill]:checked").val();if(a!=b){jQuery("input[type=radio][name=countryOfBill][value="+a+"]").attr("checked","checked");uc.payment.LoadStates(a,false)}}else{uc.payment.LoadStatesByCountry(a,"payment_contact_state");uc.payment.SetZipMask(a,"payment_contact_zip")}uc.payment.FillInternationalTextOfContact(a)},LoadStatesOfBillByCountry:function(){var a=jQuery("input[type=radio][name=countryOfBill]:checked").val();if(String.IsNullOrEmpty(a)){a="US"}uc.payment.LoadStatesByCountry(a,"payment_bill_state");uc.payment.SetZipMask(a,"payment_bill_zip");uc.payment.ShowMessageOfCreditCard(a);uc.payment.FillInternationalTextOfBill(a)},LoadStatesOfByCountry:function(){var a=jQuery("input[type=radio][name=country]:checked").val();if(String.IsNullOrEmpty(a)){a="US"}uc.payment.LoadStatesByCountry(a,"credit_state")},ShowMessageOfCreditCard:function(a){var b=jQuery("#messageOfCreditCard");if(!String.IsNullOrEmpty(a)&&a!="US"){b.removeClass("hidden")}else{b.addClass("hidden")}},LoadInternationalText:function(){if(uc.payment.InternationalText.length>0){return}framework.common.Ajax({url:"PlaceOrder.aspx/GetInternationalGeoDesc",data:{},success:function(a){if(a.ResultFlag==true){uc.payment.InternationalText=a.DataSource}},error:function(a){}})},FillInternationalTextOfContact:function(a){var e=uc.payment.GetInternationalTextByCountry(a);var b=null;var d=null;if(e!=null&&e.Values.length>0){for(var c=0;c<e.Values.length;c++){if(e.Values[c].TextName=="state"){b=e.Values[c]}if(e.Values[c].TextName=="zipcode"){d=e.Values[c]}}}uc.payment.FillInternationalText(b,"contact_state","State");uc.payment.FillInternationalText(d,"contact_zip","Zip")},FillInternationalTextOfBill:function(a){var e=uc.payment.GetInternationalTextByCountry(a);var b=null;var d=null;if(e!=null&&e.Values.length>0){for(var c=0;c<e.Values.length;c++){if(e.Values[c].TextName=="state"){b=e.Values[c]}if(e.Values[c].TextName=="zipcode"){d=e.Values[c]}}}uc.payment.FillInternationalText(b,"bill_state","State");uc.payment.FillInternationalText(d,"bill_zip","ZIP")},FillInternationalText:function(a,b,c){var d=c;if(a!=null){d=a.TextValue}jQuery("#"+b).html(d)},GetInternationalTextByCountry:function(a){if(uc.payment.InternationalText.length>0){for(var b=0;b<uc.payment.InternationalText.length;b++){if(uc.payment.InternationalText[b].CountryCode==a){return uc.payment.InternationalText[b]}}}return null},GetInternationalValue:function(a,c){if(c!=null&&c.length>0){for(var b=0;b<c.length;b++){if(c[b].TextName==a){return c[b]}}}return null},SetZipMask:function(a,c){var e="99999";if(uc.payment.Countries.length>0){var d=null;for(var b=0;b<uc.payment.Countries.length;b++){d=uc.payment.Countries[b];if(d.CountryCode==a){e=d.ZipMask;break}}}jQuery("#"+c).setMask(e)},LoadStatesByCountry:function(a,b){framework.common.Ajax({url:"PlaceOrder.aspx/GetStatesByCountry",data:{countryCode:a},async:false,success:function(c){if(c.ResultFlag==true){framework.ui.fillDropDownList({ElementId:b,DataSource:c.DataSource,ValueField:"StateCode",TextField:"StateCode",SelectValue:null})}},error:function(c){},waitingElement:"ct_step_payment"})},LoadStates:function(a,b){framework.common.Ajax({url:"PlaceOrder.aspx/GetStatesByCountry",data:{countryCode:a},success:function(c){if(c.ResultFlag==true){if(page.global.isMyAcxiomPartnerUSite){framework.ui.fillDropDownList({ElementId:"payment_contact_state",DataSource:c.DataSource,ValueField:"StateCode",TextField:"StateCode",SelectValue:"",EmptyValueSetting:{ValueField:"",TextField:""}});framework.ui.fillDropDownList({ElementId:"payment_bill_state",DataSource:c.DataSource,ValueField:"StateCode",TextField:"StateCode",SelectValue:"",EmptyValueSetting:{ValueField:"",TextField:""}})}else{framework.ui.fillDropDownList({ElementId:"payment_contact_state",DataSource:c.DataSource,ValueField:"StateCode",TextField:"StateCode",SelectValue:null});framework.ui.fillDropDownList({ElementId:"payment_bill_state",DataSource:c.DataSource,ValueField:"StateCode",TextField:"StateCode",SelectValue:null})}framework.ui.fillDropDownList({ElementId:"credit_state",DataSource:c.DataSource,ValueField:"StateCode",TextField:"StateCode",SelectValue:null})}if(b){uc.payment.RenderOrderContact()}},error:function(c){},waitingElement:"ct_step_payment"});uc.payment.SetZipMask(a,"payment_contact_zip");uc.payment.SetZipMask(a,"payment_bill_zip");uc.payment.ShowMessageOfCreditCard(a);uc.payment.FillInternationalTextOfContact(a);uc.payment.FillInternationalTextOfBill(a)},GetOrder:function(){uc.payment.RenderOrderDetails(page.placeorder.order);uc.payment.GetOrderContact();uc.payment.LoadCountries();uc.payment.ProcessContactInfor();uc.payment.RenderPaymentDetail()},ChangePaymentMethod:function(a){jQuery("#payment_contact_info").addClass("hidden");jQuery("#same_as_contact").addClass("hidden");jQuery("dl[grp='special_contact2']").removeClass("hidden");jQuery("#position_company").after(jQuery("dl[grp='special_contact2']"));jQuery("#position_email").after(jQuery("dl[grp='special_contact']"));jQuery("#payment_contact_ordername").removeClass("error");if(a){page.placeorder.order.PaymentMethod=entity.enums.PaymentMethod.CreditCard}else{page.placeorder.order.PaymentMethod=uc.payment.CurrentPaymentMethod}uc.payment.RenderOrderPayInfor()},FillPaymentMethod:function(a){uc.payment.CurrentPaymentMethod=a},RenderPaymentDetail:function(){if(page.placeorder.order.PaymentMethod==entity.enums.PaymentMethod.MonthlyBilling){jQuery("#payment_bill_creditcard").addClass("hidden");jQuery("#orderNameRequired").removeClass("hidden")}else{jQuery("#payment_bill_creditcard").removeClass("hidden");jQuery("#orderNameRequired").addClass("hidden")}},RenderOrderDetails:function(){var a=page.placeorder.order;$("#payment_orderdetails").setTemplateElement("orderdetails_template");$("#payment_orderdetails").processTemplate(a);if(page.global.IsVertaxEnabled&&!page.global.HasExempt){$("#results_tax_wording").removeClass("hidden")}uc.result.DisplayOrderMobileInfo(a.MobilePackages)},GetOrderContact:function(){var b=page.placeorder.order;var a=b.OrderContactInformation;if(a==null){var c=null;framework.common.Ajax({url:"PlaceOrder.aspx/GetUserInformation",async:false,success:function(n){if(n.ResultFlag==true){c=n.DataSource;if(c!=null){var h=new entity.OrderContact();h.FirstName=c.FirstName;h.LastName=c.LastName;h.Company=c.Company;h.Email=c.Email;h.SANNumber=c.SANNumber;h.LicenseNumber=c.LicenseNumber;h.SANNumberLastUpdatedDateTime=c.SANNumberLastUpdatedDateTime;if(!String.IsNullOrEmpty(c.HomePhone)){var j=c.HomePhone;j=j.replace("(","").replace(")","").replace(" ","").replace("x","").replace("-","");h.Phone=String.format("({0}) {1}-{2}",j.substr(0,3),j.substr(3,3),j.substr(6,4))}if(uc.payment.IsContactAddressComplete){var m=c.UsersAddress[0];h.AddressLine=m.AddressLine;h.City=m.CityName;h.State=m.StateCode;h.Zipcode=m.ZipCode;h.CountryCode=m.CountryCode;jQuery("#specail_contact_info").append(jQuery("dl[grp='special_contact']")).append(jQuery("dl[grp='special_contact2']"));if(page.placeorder.order.PaymentMethod==entity.enums.PaymentMethod.MonthlyBilling){jQuery("#payment_bill_creditcard").addClass("hidden")}}else{if(b.PaymentMethod==entity.enums.PaymentMethod.CreditCard){jQuery("#same_as_contact").removeClass("hidden")}jQuery("#payment_contact_info").removeClass("hidden")}b.OrderContactInformation=h;uc.payment.RenderOrderContact();if(uc.payment.enableSanNumber){var e=entity.lookup.DataSource.getByCode(b.ListType);jQuery("#san_number_required").addClass("hidden");jQuery("#san_exp_date_required").addClass("hidden");jQuery("#license_name_required").addClass("hidden");var f=new Date();var k=f.getFullYear();var i=f.getMonth()+1;var l=f.getDate();var g=String.format("{0}/{1}/{2}",i,l+1,k-1);$("#san_exp_date").datePicker({san_exp_date:g});if((e==entity.lookup.DataSource.Consumer||e==entity.lookup.DataSource.NewHomeowner||e==entity.lookup.DataSource.NewMover)&&(b.PhoneOption==2||b.PhoneOption==3)){if(h.SANNumber==null||h.SANNumber.length<=0||h.LicenseNumber==null||h.LicenseNumber.length<=0||h.SANNumberLastUpdatedDateTime==null||new Date()-h.SANNumberLastUpdatedDateTime>=365*24*60*60*1000){jQuery("#san_number_required").removeClass("hidden");jQuery("#san_exp_date_required").removeClass("hidden");jQuery("#license_name_required").removeClass("hidden");uc.payment.SanNumberIsActive=true}}}}}},error:function(e){},waitingElement:"payment_contact_info"})}else{if(uc.payment.enableSanNumber){jQuery("#san_number_required").addClass("hidden");jQuery("#san_exp_date_required").addClass("hidden");jQuery("#license_name_required").addClass("hidden");var d=entity.lookup.DataSource.getByCode(b.ListType);if((d==entity.lookup.DataSource.Consumer||d==entity.lookup.DataSource.NewHomeowner||d==entity.lookup.DataSource.NewMover)&&(b.PhoneOption==2||b.PhoneOption==3)){if(a.SANNumber==null||a.SANNumber.length<=0||a.LicenseNumber==null||a.LicenseNumber.length<=0||a.SANNumberLastUpdatedDateTime==null||new Date()-a.SANNumberLastUpdatedDateTime>=365*24*60*60*1000){jQuery("#san_number_required").removeClass("hidden");jQuery("#san_exp_date_required").removeClass("hidden");jQuery("#license_name_required").removeClass("hidden");uc.payment.SanNumberIsActive=true}}}uc.payment.RenderOrderPayInfor()}},RenderOrderPayInfor:function(){if(uc.payment.IsContactAddressComplete){jQuery("#specail_contact_info").append(jQuery("dl[grp='special_contact']")).append(jQuery("dl[grp='special_contact2']"));if(page.placeorder.order.PaymentMethod==entity.enums.PaymentMethod.MonthlyBilling){jQuery("#payment_bill_creditcard").addClass("hidden")}}else{if(page.placeorder.order.PaymentMethod==entity.enums.PaymentMethod.CreditCard){jQuery("#same_as_contact").removeClass("hidden");jQuery("#payment_bill_info").removeClass("hidden")}else{if(page.placeorder.order.PaymentMethod==entity.enums.PaymentMethod.MonthlyBilling){jQuery("#payment_bill_info").addClass("hidden")}}jQuery("#payment_contact_info").removeClass("hidden")}},RenderOrderContact:function(){var b=page.placeorder.order;var a=b.OrderContactInformation;uc.payment.FillContact(a)},FillContact:function(a){if(a!=null){$("input[name='payment_contact_firstname']").val(a.FirstName);$("input[name='payment_contact_lastname']").val(a.LastName);$("input[name='payment_contact_company']").val(a.Company);if(!String.IsNullOrEmpty(a.Company)){$("input[name='payment_contact_company']").attr("disabled","disabled")}else{$("input[name='payment_contact_company']").removeAttr("disabled")}$("input[name='payment_contact_address']").val(a.AddressLine);$("input[name='payment_contact_city']").val(a.City);$("#payment_contact_state").val(a.State);$("input[name='payment_contact_zip']").val(a.Zipcode);$("input[name='payment_contact_phone']").val(a.Phone);$("input[name='payment_contact_email']").val(a.Email);$("input[name='payment_contact_ordername']").val(a.OrderName)}},SubmitOrder:function(){framework.common.Ajax({url:"PlaceOrder.aspx/SubmitOrder",data:{order:page.placeorder.order},success:function(a){alert(a)},error:function(a){}})},CheckInputPrice:function(a){if(String.IsNullOrEmpty(a)||Number(a)<page.placeorder.order.GoodsCost){return false}return true},CheckUserPlcae4InfoOrder:function(){var b=$("#payment_contact_email").val();var a=true;framework.common.Ajax({url:"PlaceOrder.aspx/CheckUserPlcae4InfoOrder",async:false,data:{email:b},success:function(c){if(c.ResultFlag==false){a=false}},error:function(c){}});return a},ProcessOrder:function(){uc.result.Clear_Error();var e=page.placeorder.order;e.ListUsage=Number(jQuery("input[name='results_listusages']:checked").attr("data-mul"));OrderHelper.RecaculateTotalQty(e);OrderHelper.CaculatePrice(e,uc.result.UserPriceList,uc.result.GlobalPriceList,uc.result.Promotion,uc.result.MetaDataPriceList);if(e.TotalDesiredQty<=0){uc.result.Show_Error(" The quantity that you desired is can not be less than zero ");return}if(page.placeorder.currentDataSource==entity.enums.DataSourceType.Mobile_Consumer_Advertising||page.placeorder.order.Chose4Info){if(!uc.payment.CheckUserPlcae4InfoOrder()){$.colorbox({html:"<span style='color:red'>You can not place mobile order,please remove it to continue.</span>",width:200,height:150,opacity:0.5,scrolling:false});return}}if(e.TotalDesiredQty<page.placeorder.minQuantityOfOrder){uc.result.Show_Error(String.format(" Minimum quantity of {0} is required for purchasing a mobile ad campaign. Please change your Target Area and Audience selections.",page.placeorder.minQuantityOfOrder));return}if(page.placeorder.IsInputPrice){var g=jQuery("#result_info_order_price_value").val();if(!uc.result.CheckInputPrice(g)){uc.result.Show_Error(String.format("The order price your entered is empty or less than the cost price {0}.",framework.common.formatPrice(page.placeorder.order.GoodsCost,4)));return}else{page.placeorder.order.RetailCost=page.placeorder.order.TotalEstmCost;page.placeorder.order.TotalEstmCost=Number(g)}}framework.common.LogClickEvent("Click Process Order button",null,"ProcessOrder.");page.placeorder.TrackOrderPathGAEvent("Step 3 - Place Order","Place Order Button");var b=$("#payment_bill_cardnumber").val();var a=$("#payment_bill_cardtype").val();if(b.length>0&&a==uc.payment.CreditCard.CCType&&(b==uc.payment.CreditCard.CCNumber||b==uc.payment.CreditCard.MaskNumber)){uc.payment.CreditCard.NeedValidation=false}else{uc.payment.CreditCard.NeedValidation=true}uc.payment.Save_Data();if(page.placeorder.order.GeoType==entity.enums.GeoType.MultiCount){$("#adjustdt1").find("input[type='text'][rowtype='keycode']").each(function(){var h=$(this).attr("rowindex");page.placeorder.order.OrderGeos[h].GeoUserKeyCode=$(this).val()})}if(framework.common.IsRegisteredSite){var f=uc.result.PaymentCheckDigitalFileQty();if(!f){return}}var d=false;if(e.PaymentMethod==entity.enums.PaymentMethod.MonthlyBilling){d=uc.payment.DoValidation_OnlyContact()}else{d=uc.payment.DoValidation()}if(!d){framework.ui.ShowDialog("payment_message_summary");return}if(typeof(page.placeorder.CurrentSessionId)==null||typeof(page.placeorder.CurrentSessionId)=="undefined"){uc.payment.SetErrorMessage(true,"The browser didn't get session.");return}if(page.placeorder.CurrentSessionId==""){uc.payment.SetErrorMessage(true,"Browser session value is empty.");return}var c=jQuery("#payment_contact_email").val();framework.common.Ajax({url:"PlaceOrder.aspx/ValidateEmailAddress",data:{emailAddress:c},success:function(h){if(h.DataSource&&h.DataSource==true){if(d){uc.payment.Calculate_Tax()}}else{uc.payment.SetErrorMessage(true,"The email entered could not be validated. Please enter a valid email address.");return}},error:function(h){uc.payment.SetErrorMessage(true,"The email entered could not be validated. Please enter a valid email address.")},waitingElement:"ct_main_panel"});return d},ProcessOrder2:function(){var a=$("#san_number").val();var e=$("#license_name").val();var d=$("#san_exp_date").val();var c="";var b="";if((page.global.isMyAcxiomPartnerUSite||page.global.isDatabilitiesUSite)&&$("#contact_signup").is(":checked")){c=$("#signup_user_password").val();b=$("#signup_user_industry").val()}framework.common.Ajax({url:"PlaceOrder.aspx/ProcessOrder",data:{order:page.placeorder.order,currentSessionId:page.placeorder.CurrentSessionId,sanNumber:a,licenseName:e,sanExpDate:d,password:c,industry:b},success:function(f){uc.payment.CancelTax_PlaceOrder();if(!f.ResultFlag){uc.payment.SetErrorMessage(true,f.ResultMessage);return}if(!f.DataSource.IsSuccess){uc.payment.SetErrorMessage(true,f.DataSource.Message)}else{var h=page.placeorder.order;var g=f.DataSource;if(g!=null){h.OrderId=g.OrderId;h.OrderCode=g.OrderCode;h.OrderDate=g.OrderSubmittedDate;h.AccountName=g.AccountName}h.NextStep=entity.enums.OrderStep.Success;page.placeorder.GoNext()}},error:function(f){},waitingElement:"ct_main_panel"})},DoValidation:function(){var s=false;var l={};var x={};var a={payment_contact_firstname:{required:true},payment_contact_lastname:{required:true},payment_contact_address:{required:true},payment_contact_company:{required:true},payment_contact_city:{required:true},payment_contact_state:{required:true},payment_contact_zip:{required:true,minlength:5},payment_contact_phone:{required:true}};var c={payment_bill_nameoncard:{required:true},payment_bill_address:{required:true},payment_bill_city:{required:true},payment_bill_state:{required:true},payment_bill_zip:{required:true,minlength:5},payment_bill_cardnumber:{creditcard2:function(){var B=$("#payment_bill_cardtype").val();var A=null;switch(B){case"10":A="Visa";break;case"20":A="MasterCard";break;case"30":A="AmEx";break;case"40":A="Discover";break}return A}},payment_bill_securitycode:{required:true},carddate_validate:{CommonIsValid:function(D){var G=$("#payment_bill_month").val();var E=$("#payment_bill_year").val();var C=new Date();var F=C.getFullYear();var B=C.getMonth();var A;if(G!=0&&(F<E||(F==E&&B<=G))){$(".carddate_validate").parent().removeClass("invalid_border");return true}else{$(".carddate_validate").parent().addClass("invalid_border");return false}}}};var y={payment_contact_email:{required:true,email:true},payment_contact_company:{required:true}};var n={san_number:{required:true},license_name:{required:true},san_exp_date:{CommonIsValid:function(B){try{var A=Date.fromString(jQuery("#san_exp_date").val());if(A==null){return false}return true}catch(C){return false}}}};var q={payment_payment_agreement:{required:true}};var h={payment_payment_agreement:{required:true},payment_payment_agreement_extral_2:{required:true},payment_payment_agreement_extral_3:{required:true}};var w={signup_user_password:{required:true,passwordCheck:true},signup_user_repassword:{required:true,minlength:10,maxlength:20,equalTo:"#signup_user_password"},signup_user_industry:{required:true}};var z=jQuery("input[type=radio][name=countryOfContact]:checked").val();var v="state";var m="zip code";var t=uc.payment.GetInternationalTextByCountry(z);if(t!=null){var r=uc.payment.GetInternationalValue("state",t.Values);if(r!=null){v=r.TextValue.toLowerCase()}r=uc.payment.GetInternationalValue("zipcode",t.Values);if(r!=null){m=r.TextValue.toLowerCase()}}var j=jQuery("input[type=radio][name=countryOfBill]:checked").val();var u="state";var k="zip code";t=uc.payment.GetInternationalTextByCountry(j);if(t!=null){var r=uc.payment.GetInternationalValue("state",t.Values);if(r!=null){u=r.TextValue.toLowerCase()}r=uc.payment.GetInternationalValue("zipcode",t.Values);if(r!=null){k=r.TextValue.toLowerCase()}}var i={payment_contact_firstname:{required:"Please enter your first name."},payment_contact_lastname:{required:"Please enter your last name."},payment_contact_company:{required:"Please enter your company name."},payment_contact_address:{required:"Please enter your address."},payment_contact_city:{required:"Please enter the city name."},payment_contact_state:{required:String.format("Please enter the {0}.",v)},payment_contact_zip:{required:String.format("Please enter the {0}.",m),minlength:String.format("Please enter a valid {0}.",m)},payment_contact_phone:{required:"Please enter your phone number."}};var o={payment_bill_nameoncard:{required:"Please enter the name as it appears on your credit card."},payment_bill_address:{required:"Please enter your cardholder's address."},payment_bill_city:{required:"Please enter the cardholder's city."},payment_bill_state:{required:String.format("Please enter the cardholder's {0}.",u)},payment_bill_zip:{required:String.format("Please enter the cardholder's {0}.",k),minlength:String.format("Please enter a valid cardholder's {0}.",k)},payment_bill_cardnumber:{creditcard2:"Invalid credit card number."},payment_bill_securitycode:{required:"Please enter the cardholder's security code."},carddate_validate:{CommonIsValid:"Expiration Date is invalid."}};var f={payment_contact_email:{required:"Please enter your email address.",email:"The format of your email address is invalid. Please re-enter."},payment_contact_company:{required:"Please enter your company name."}};var p={san_number:{required:"A SAN Number (Subscription Account Number) is required for all consumer list orders that include telephone numbers."},san_exp_date:{CommonIsValid:"Please enter the expiration date of the SAN Number."},license_name:{required:"Please enter the name of the organization associated with this SAN Number."}};var e={payment_payment_agreement:{required:"You must agree to the terms and conditions of the Data Use Agreement before placing your order. Please check the box below and click 'Place Order' when you are ready to proceed."}};var d={payment_payment_agreement:{required:"You must agree to all of the terms and conditions of the Data Use Agreement before placing your order. Please check all of the boxes below and click 'Place Order' when you are ready to proceed."},payment_payment_agreement_extral_2:{required:"You must agree to all of the terms and conditions of the Data Use Agreement before placing your order. Please check all of the boxes below and click 'Place Order' when you are ready to proceed."},payment_payment_agreement_extral_3:{required:"You must agree to all of the terms and conditions of the Data Use Agreement before placing your order. Please check all of the boxes below and click 'Place Order' when you are ready to proceed."}};var b={signup_user_password:{required:"Please enter your password."},signup_user_repassword:{required:"Please enter Re-enter New Password.",minlength:"Please enter at least 10 characters.",maxlength:"Please enter at most 20 characters.",equalTo:"The passwords you've entered do not match. Please re-enter."},signup_user_industry:{required:"Please select your industry."}};if(framework.common.IsRegisteredSite){jQuery.extend(l,y);jQuery.extend(x,f);if(!uc.payment.IsContactAddressComplete){jQuery.extend(l,a);jQuery.extend(x,i)}if(uc.payment.enableSanNumber&&uc.payment.SanNumberIsActive){jQuery.extend(l,n);jQuery.extend(x,p)}if(!uc.result.PassPay_For_DebitCard){jQuery.extend(l,c);jQuery.extend(x,o)}if(!uc.payment.CreditCard.NeedValidation){l.payment_bill_cardnumber={};x.payment_bill_cardnumber={}}}else{jQuery.extend(l,y);jQuery.extend(x,f);jQuery.extend(l,a);jQuery.extend(x,i);if(!uc.result.PassPay_For_DebitCard){jQuery.extend(l,c);jQuery.extend(x,o)}if(uc.result.IsHaveOptionForSignInOrUp&&jQuery("#contact_signup").is(":checked")){jQuery.extend(l,w);jQuery.extend(x,b)}}jQuery.extend(l,q);jQuery.extend(x,e);if(page.global.isMyAcxiomPartnerUSite){var g=$("#aspnetForm").validate({groups:{nameGroup:"payment_payment_agreement payment_payment_agreement_extral_2 payment_payment_agreement_extral_3"},rules:l,messages:x,errorContainer:jQuery("#payment_ValidateSummay"),errorLabelContainer:jQuery("ul",jQuery("#payment_ValidateSummay")),wrapper:"li"})}else{var g=$("#aspnetForm").validate({rules:l,messages:x,errorContainer:jQuery("#payment_ValidateSummay"),errorLabelContainer:jQuery("ul",jQuery("#payment_ValidateSummay")),wrapper:"li"})}g.resetForm();if(!g.form()){jQuery("#payment_ValidateSummay").removeClass("hidden");s=false}else{jQuery("#payment_ValidateSummay").addClass("hidden");s=true}return s},DoValidationForSaveCreditCard:function(){var g=false;var h={payment_contact_firstname:{required:true},payment_contact_lastname:{required:true},payment_bill_nameoncard:{required:true},payment_bill_address:{required:true},payment_bill_city:{required:true},payment_bill_state:{required:true},payment_bill_zip:{required:true,minlength:5},payment_bill_securitycode:{required:true},carddate_validate:{CommonIsValid:function(l){var o=$("#payment_bill_month").val();var m=$("#payment_bill_year").val();var k=new Date();var n=k.getFullYear();var j=k.getMonth();var i;if(o!=0&&(n<m||(n==m&&j<=o))){$(".carddate_validate").parent().removeClass("invalid_border");return true}else{$(".carddate_validate").parent().addClass("invalid_border");return false}}}};var e=jQuery("input[type=radio][name=countryOfBill]:checked").val();var b="state";var c="zip code";internationalTexts=uc.payment.GetInternationalTextByCountry(e);if(internationalTexts!=null){var a=uc.payment.GetInternationalValue("state",internationalTexts.Values);if(a!=null){b=a.TextValue.toLowerCase()}a=uc.payment.GetInternationalValue("zipcode",internationalTexts.Values);if(a!=null){c=a.TextValue.toLowerCase()}}var f={payment_contact_firstname:{required:"Please enter your first name."},payment_contact_lastname:{required:"Please enter your last name."},payment_bill_nameoncard:{required:"Please enter the name as it appears on your credit card."},payment_bill_address:{required:"Please enter your cardholder's address."},payment_bill_city:{required:"Please enter the cardholder's city."},payment_bill_state:{required:String.format("Please enter the cardholder's {0}.",b)},payment_bill_zip:{required:String.format("Please enter the cardholder's {0}.",c),minlength:String.format("Please enter a valid cardholder's {0}.",c)},payment_bill_securitycode:{required:"Please enter the cardholder's security code."},carddate_validate:{CommonIsValid:"Expiration Date is invalid."}};if(!uc.payment.CreditCard.NeedValidation){h.payment_bill_cardnumber={};f.payment_bill_cardnumber={}}var d=$("#aspnetForm").validate({rules:h,messages:f,errorContainer:jQuery("#payment_ValidateSummay"),errorLabelContainer:jQuery("ul",jQuery("#payment_ValidateSummay")),wrapper:"li"});d.resetForm();if(!d.form()){jQuery("#payment_ValidateSummay").removeClass("hidden");g=false}else{jQuery("#payment_ValidateSummay").addClass("hidden");g=true}return g},DoValidationForCard:function(){var g=false;var h={payment_contact_firstname:{required:true},payment_contact_lastname:{required:true},txtCardName:{required:true},txtAddress:{required:true},txtCity:{required:true},credit_state:{required:true},txtZip:{required:true,minlength:5},txtCardNumber:{creditcard2:function(){var j=$("#slCardType").val();var i=null;switch(j){case"10":i="Visa";break;case"20":i="MasterCard";break;case"30":i="AmEx";break;case"40":i="Discover";break}return i}},txtSecurityCode:{required:true},card_date_validate:{CommonIsValid:function(l){var o=$("#slMonth").val();var m=$("#slYear").val();var k=new Date();var n=k.getFullYear();var j=k.getMonth();var i;if(o!=0&&(n<m||(n==m&&j<=o))){$(".carddate_validate").parent().removeClass("invalid_border");return true}else{$(".carddate_validate").parent().addClass("invalid_border");return false}}}};var e=jQuery("input[type=radio][name=country]:checked").val();var b="state";var c="zip code";internationalTexts=uc.payment.GetInternationalTextByCountry(e);if(internationalTexts!=null){var a=uc.payment.GetInternationalValue("state",internationalTexts.Values);if(a!=null){b=a.TextValue.toLowerCase()}a=uc.payment.GetInternationalValue("zipcode",internationalTexts.Values);if(a!=null){c=a.TextValue.toLowerCase()}}var f={payment_contact_firstname:{required:"Please enter your first name."},payment_contact_lastname:{required:"Please enter your last name."},txtCardName:{required:"Please enter the name as it appears on your credit card."},txtAddress:{required:"Please enter your cardholder's address."},txtCity:{required:"Please enter the cardholder's city."},credit_state:{required:String.format("Please enter the cardholder's {0}.",b)},txtZip:{required:String.format("Please enter the cardholder's {0}.",c),minlength:String.format("Please enter a valid cardholder's {0}.",c)},txtCardNumber:{creditcard2:"Invalid credit card number."},txtSecurityCode:{required:"Please enter the cardholder's security code."},card_date_validate:{CommonIsValid:"Expiration Date is invalid."}};var d=$("form[name='PopupForm']").validate({rules:h,messages:f,errorContainer:jQuery("#card_ValidateSummay"),errorLabelContainer:jQuery("ul",jQuery("#card_ValidateSummay")),wrapper:"li"});d.resetForm();if(!d.form()){jQuery("#card_ValidateSummay").removeClass("hidden");g=false}else{jQuery("#card_ValidateSummay").addClass("hidden");g=true}return g},DoValidation_OnlyContact:function(){var l=false;var f={};var q={};var a={payment_contact_firstname:{required:true},payment_contact_lastname:{required:true},payment_contact_address:{required:true},payment_contact_city:{required:true},payment_contact_state:{required:true},payment_contact_zip:{required:true,minlength:5},payment_contact_phone:{required:true}};var p={payment_contact_email:{required:true,email:true},payment_contact_ordername:{required:true},payment_contact_company:{required:true},payment_payment_agreement:{required:true}};var r=jQuery("input[type=radio][name=countryOfContact]:checked").val();var o="state";var g="zip code";var m=uc.payment.GetInternationalTextByCountry(r);if(m!=null){var k=uc.payment.GetInternationalValue("state",m.Values);if(k!=null){o=k.TextValue.toLowerCase()}k=uc.payment.GetInternationalValue("zipcode",m.Values);if(k!=null){g=k.TextValue.toLowerCase()}}var e=jQuery("input[type=radio][name=countryOfBill]:checked").val();var n="state";var h="zip code";m=uc.payment.GetInternationalTextByCountry(e);if(m!=null){var k=uc.payment.GetInternationalValue("state",m.Values);if(k!=null){n=k.TextValue.toLowerCase()}k=uc.payment.GetInternationalValue("zipcode",m.Values);if(k!=null){h=k.TextValue.toLowerCase()}}var c={payment_contact_firstname:{required:"Please enter your first name."},payment_contact_lastname:{required:"Please enter your last name."},payment_contact_address:{required:"Please enter your address."},payment_contact_city:{required:"Please enter the city name."},payment_contact_state:{required:String.format("Please enter the {0}.",o)},payment_contact_zip:{required:String.format("Please enter the {0}.",g),minlength:String.format("Please enter a valid {0}.",g)},payment_contact_phone:{required:"Please enter your phone number."}};var d={payment_contact_email:{required:"Please enter your email address.",email:"The format of your email address is invalid. Please re-enter."},payment_contact_ordername:{required:"Please enter your order name."},payment_contact_company:{required:"Please enter your company name."},payment_payment_agreement:{required:"You must agree to the terms and conditions of the Data Use Agreement before placing your order. Please check the box below and click 'Place Order' when you are ready to proceed."}};var i={san_number:{required:true},license_name:{required:true},san_exp_date:{CommonIsValid:function(t){try{var s=Date.fromString(jQuery("#san_exp_date").val());return true}catch(u){return false}}}};var j={san_number:{required:"A SAN Number (Subscription Account Number) is required for all consumer list orders that include telephone numbers."},san_exp_date:{CommonIsValid:"Please enter the expiration date of the SAN Number."},license_name:{required:"Please enter the name of the organization associated with this SAN Number."}};jQuery.extend(f,p);jQuery.extend(q,d);if(!uc.payment.IsContactAddressComplete){jQuery.extend(f,a);jQuery.extend(q,c)}if(uc.payment.enableSanNumber&&uc.payment.SanNumberIsActive){jQuery.extend(f,i);jQuery.extend(q,j)}var b=$("#aspnetForm").validate({rules:f,messages:q,errorContainer:jQuery("#payment_ValidateSummay"),errorLabelContainer:jQuery("ul",jQuery("#payment_ValidateSummay")),wrapper:"li"});b.resetForm();if(!b.form()){jQuery("#payment_ValidateSummay").removeClass("hidden");l=false}else{jQuery("#payment_ValidateSummay").addClass("hidden");l=true}return l},RenderOrderSuccess:function(){jQuery("td[attr='order_another_button']").removeClass("hidden");jQuery("td[attr='back_button']").addClass("hidden");var b=page.placeorder.order;var a=b.OrderContactInformation;if(a==null){return}$("div[name='payment_information']").addClass("hidden");$("#payment_ordersuccess").setTemplateElement("ordersuccess_blue_template");$("#payment_ordersuccess").processTemplate(b);var c=entity.enums.OrderStep.Success;page.placeorder.SetVideo(c);page.placeorder.SetScreen(c,page.placeorder.order.ListType)},ProcessContactInfor:function(){$("#payment_contact_phone").setMask("(999) 999-9999");$("#payment_contact_phoneext").setMask("99999");$("#payment_contact_info #payment_contact_firstname").unbind("keyup");$("#payment_contact_info #payment_contact_lastname").unbind("keyup");$("#payment_contact_info #payment_contact_address").unbind("keyup");$("#payment_contact_info #payment_contact_city").unbind("keyup");$("#payment_contact_info #payment_contact_state").unbind("click");$("#payment_contact_info #payment_contact_zip").unbind("keyup");$("#aMyCardList").click(function(){framework.ui.ShowDialog("ct_results_save_creditCard",{appendForm:true,hermesTheme:true,fixedOnScroll:false,css:{cursor:"default",top:"15%",left:"20%",border:"0px solid #aaa"}});framework.common.Ajax({url:"PlaceOrder.aspx/GetCardList",async:false,success:function(a){if(a.ResultFlag==true){$("#CardsSummary").setTemplateElement("Users_Cards_summary_template");$("#CardsSummary").processTemplate(a.DataSource)}else{}},error:function(a){},waitingElement:"payment_contact_info"})});$("#payment_agreement").click(function(){$("#payment_agreement").colorbox({href:"Dialogs/OrderLicenseTerms.aspx",iframe:true,opacity:0.5,width:680,height:600,scrolling:false})});$("#saveCreditCard").click(function(){var b=uc.payment.DoValidationForSaveCreditCard();if(!b){framework.ui.ShowDialog("payment_message_summary");return}var a=jQuery("#payment_bill_cardnumber").val().replace(/ /g,"");if(!uc.payment.CreditCard.NeedValidation){a=uc.payment.CreditCard.CCNumber}framework.common.Ajax({url:"PlaceOrder.aspx/SaveCreditCardInfo",data:{cardType:jQuery("#payment_bill_cardtype").val(),cardName:jQuery("#payment_bill_nameoncard").val(),cardNumber:a,securityCode:jQuery("#payment_bill_securitycode").val(),expirationYear:jQuery("#payment_bill_year").val(),expirationMonth:jQuery("#payment_bill_month").val(),countryCode:jQuery("input[type=radio][name=countryOfBill]:checked").val(),stateCode:jQuery("#payment_bill_state").val(),zipCode:jQuery("#payment_bill_zip").val(),cityName:jQuery("#payment_bill_city").val(),address:jQuery("#payment_bill_address").val()},async:false,success:function(c){if(c.ResultFlag==true){alert("successfully saved.")}else{alert(c.ResultMessage)}},error:function(c){},waitingElement:"payment_contact_info"})});$("#payment_bill_same_as_contact").click(function(){if($(this).is(":checked")==true){$("#payment_bill_nameoncard").val($("#payment_contact_info #payment_contact_firstname").val()+" "+$("#payment_contact_info #payment_contact_lastname").val());$("#payment_bill_address").val($("#payment_contact_info #payment_contact_address").val());$("#payment_bill_city").val($("#payment_contact_info #payment_contact_city").val());$("#payment_bill_state").val($("#payment_contact_info #payment_contact_state").val());$("#payment_bill_zip").val($("#payment_contact_info #payment_contact_zip").val());$("#payment_contact_info #payment_contact_firstname").keyup(function(){$("#payment_bill_nameoncard").val($(this).val()+" "+$("#payment_contact_info #payment_contact_lastname").val())});$("#payment_contact_info #payment_contact_lastname").keyup(function(){$("#payment_bill_nameoncard").val($("#payment_contact_info #payment_contact_firstname").val()+" "+$(this).val())});var a=jQuery("input[type=radio][name=countryOfContact]:checked").val();var b=jQuery("input[type=radio][name=countryOfBill]:checked").val();if(a!=b){jQuery("input[type=radio][name=countryOfBill][value="+a+"]").attr("checked","checked");uc.payment.LoadStatesOfBillByCountry();$("#payment_bill_state").val($("#payment_contact_state").val())}$("#payment_contact_info #payment_contact_address").keyup(function(){$("#payment_bill_address").val($(this).val())});$("#payment_contact_info #payment_contact_city").keyup(function(){$("#payment_bill_city").val($(this).val())});$("#payment_contact_info #payment_contact_state").click(function(){$("#payment_bill_state").val($(this).val())});$("#payment_contact_info #payment_contact_zip").keyup(function(){$("#payment_bill_zip").val($(this).val())})}else{if($(this).is(":checked")==false){$("#payment_bill_nameoncard").val("");$("#payment_bill_address").val("");$("#payment_bill_city").val("");$("#payment_bill_state").val("");$("#payment_bill_zip").val("");$("#payment_contact_info #payment_contact_firstname").unbind("keyup");$("#payment_contact_info #payment_contact_lastname").unbind("keyup");$("#payment_contact_info #payment_contact_address").unbind("keyup");$("#payment_contact_info #payment_contact_city").unbind("keyup");$("#payment_contact_info #payment_contact_state").unbind("click");$("#payment_contact_info #payment_contact_zip").unbind("keyup")}}})},SetErrorMessage:function(a,b){if(a){jQuery("#payment_message_error").removeClass("hidden").html(b)}else{jQuery("#payment_message_error").addClass("hidden")}},Click_Next:function(){uc.payment.ProcessOrder()},Click_Back:function(){page.placeorder.GoBack()},Save_Data:function(){var c=page.placeorder.order;var b=new entity.OrderContact();b.FirstName=jQuery("#payment_contact_firstname").val();b.LastName=jQuery("#payment_contact_lastname").val();b.Company=jQuery("#payment_contact_company").val();b.Phone=jQuery("#payment_contact_phone").val();b.Email=jQuery("#payment_contact_email").val();b.AddressLine=jQuery("#payment_contact_address").val();b.City=jQuery("#payment_contact_city").val();b.State=jQuery("#payment_contact_state").val();b.Zipcode=jQuery("#payment_contact_zip").val();b.OrderName=jQuery("#payment_contact_ordername").val();b.CountryCode=jQuery("input[type=radio][name=countryOfContact]:checked").val();b.IsSendEmailToAudience=jQuery("#payment_send_email_to_audience").attr("checked")=="checked"?true:false;b.IsSendMobileFacebookToAudience=jQuery("#send_mobile_facebook_email_to_audience").attr("checked")=="checked"?true:false;c.OrderContactInformation=b;c.IsContactAddressComplete=uc.payment.IsContactAddressComplete;if(!framework.common.IsSubmitOrder){if(c.PaymentMethod!=entity.enums.PaymentMethod.MonthlyBilling){var a=new entity.OrderPayment();a.CardType=jQuery("#payment_bill_cardtype").val();a.HolderName=jQuery("#payment_bill_nameoncard").val();a.Number=jQuery("#payment_bill_cardnumber").val().replace(/ /g,"");if(!uc.payment.CreditCard.NeedValidation){a.Number=uc.payment.CreditCard.CCNumber}a.ExpiredYear=jQuery("#payment_bill_year").val();a.ExpiredMonth=jQuery("#payment_bill_month").val();a.SecurityCode=jQuery("#payment_bill_securitycode").val();a.Email=jQuery("#payment_contact_email").val();a.Phone=jQuery("#payment_contact_phone").val();a.AddressLine=jQuery("#payment_bill_address").val();a.City=jQuery("#payment_bill_city").val();a.State=jQuery("#payment_bill_state").val();a.Zipcode=jQuery("#payment_bill_zip").val();a.CountryCode=jQuery("input[type=radio][name=countryOfBill]:checked").val();c.OrderPaymentInformation=a}else{c.OrderPaymentInformation=a=null}}uc.payment.GetSpecificalCookie(c);c.IsNeedNotifyMe=$("#result_is_need_notify_me").attr("checked")=="checked"},GetSpecificalCookie:function(f){var b=document.cookie;var d=b.split(";");var a="";for(var c=0;c<d.length;c++){var e=d[c].split("=");if(e[0].trim()==page.placeorder.OrderSourceParameter){a=e[1]}}if(a!=""){f.OrderSource=a}},Calculate_Tax:function(){uc.result.Clear_Error();if(!page.global.IsVertaxEnabled||page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){uc.payment.GetToken_BeanStream();return}var c="<img alt='Waiting..' style='vertical-align:middle;' src='"+framework.common.SiteRootPath+"/themes/default/assets/images/spinner2.gif' />";c+="<span style='margin-left:5px;'>System is calculating sales tax...</span>";var a={message:c,css:{cursor:"default",border:"0px solid #aaa",opacity:1,backgroundColor:"transparent"},overlayCSS:{opacity:0.5,backgroundColor:"#ccc"},showOverlay:true,centerY:true,centerX:true,fadeIn:0};var b="#ct_main_panel";jQuery(b).block(a);var e=page.placeorder.order;var d=new entity.TaxRequest();d.OrderAmount=e.TotalPretaxCost;d.DesiredQty=e.TotalDesiredQty;d.Country="USA";d.AddressLine=e.OrderContactInformation.AddressLine;d.City=e.OrderContactInformation.City;d.State=e.OrderContactInformation.State;d.Zip=e.OrderContactInformation.Zipcode;framework.common.Ajax({url:"PlaceOrder.aspx/CalculateTax",data:{req:d},success:function(f){if(f.ResultFlag){uc.payment.TaxResult=f.DataSource;jQuery("#ct_result_taxconfirm_subtotal").html(framework.common.formatMoney(f.DataSource.SubTotal));jQuery("#ct_result_taxconfirm_tax").html(framework.common.formatMoney(f.DataSource.TotalTax));jQuery("#ct_result_taxconfirm_total").html(framework.common.formatMoney(f.DataSource.Total));var g={message:$("#ct_result_confirm_tax"),css:{cursor:"pointer",border:"none",backgroundColor:"white"}};jQuery(b).block(jQuery.extend({},a,g))}else{uc.payment.SetErrorMessage(true,"Fail to calculate sales tax, please try again later.");jQuery(b).unblock()}},error:function(f){uc.payment.SetErrorMessage(true,"Fail to calculate sales tax, please try again later.");jQuery(b).unblock()}})},ConfirmTax_PlaceOrder:function(){$el=$(this);var b=$el.attr("disabled");if(b==undefined){$el.attr("disabled","disabled");var a="#ct_main_panel";jQuery(a).unblock();page.placeorder.order.TaxCharge=uc.payment.TaxResult.TotalTax;page.placeorder.order.TotalPretaxCost=uc.payment.TaxResult.SubTotal;page.placeorder.order.TotalEstmCost=uc.payment.TaxResult.Total;uc.payment.GetToken_BeanStream();$el.removeProp("disabled")}},CancelTax_PlaceOrder:function(){jQuery("#ct_main_panel").unblock()},WirterLogs:function(a){framework.common.Ajax({url:"PlaceOrder.aspx/PaymentError",async:false,data:{paymentMessage:a},success:function(){},error:function(b){}})},FetchBeanstreamToken:function(a){uc.payment.SetErrorMessage(false,"");getLegato(function(b){page.placeorder.order.OrderPaymentInformation.Token="";if(b.success){page.placeorder.order.OrderPaymentInformation.Token=b.token}else{page.placeorder.order.OrderPaymentInformation.LegatoMessage=b.message}if(!String.IsNullOrEmpty(page.placeorder.order.OrderPaymentInformation.Token)){a()}else{if(uc.payment.Retries<uc.payment.MaxRetries){uc.payment.Retries++;uc.payment.WirterLogs("Try to get token with retries "+uc.payment.Retries);uc.payment.FetchBeanstreamToken(a)}else{uc.payment.WirterLogs("after max retries "+uc.payment.MaxRetries+", failed to get token");uc.payment.SetErrorMessage(true,"Unfortunately, the system is unable to process your request. Our technical support specialists have been notified. Thank you for your patience while we work to resolve the error.");return}}})},GetToken_BeanStream:function(){if(page.placeorder.order.PaymentMethod!=entity.enums.PaymentMethod.MonthlyBilling&&page.global.CreditCardProcessorType==3&&getLegato){$("#trnCardNumber").val(page.placeorder.order.OrderPaymentInformation.Number);$("#trnExpYear").val(page.placeorder.order.OrderPaymentInformation.ExpiredYear.slice(2));$("#trnExpMonth").val(page.placeorder.order.OrderPaymentInformation.ExpiredMonth);$("#trnCardCvd").val(page.placeorder.order.OrderPaymentInformation.SecurityCode);uc.payment.Retries=0;uc.payment.FetchBeanstreamToken(uc.payment.ProcessOrder2)}else{uc.payment.ProcessOrder2()}}};
;
ni.RegisterNameSpace("uc");uc.success={InitStepSetting:function(a){var b=page.placeorder.orderflow||new entity.OrderFlow();b.CurrentStep=entity.enums.OrderStep.Success;b.StepTitle="";b.StepDescription="";b.StepButtonsStatus=entity.enums.StepButtons.PlaceAnotherOrder|entity.enums.StepButtons.PrintOrder;b.StepButtonsEvent=[{ButtonKey:entity.enums.StepButtons.PrintOrder,ButtonEvent:uc.success.printOrder}];return b},Init:function(){page.placeorder.order.CurrentStep=entity.enums.OrderStep.Success;var a=uc.success.InitStepSetting();framework.listener.FireListener(framework.listener.LISTENER_INIT_STEP,a);uc.success.LoadOrder();if(!page.placeorder.IsShowOrderGeoDetailQuantity){jQuery("#geographyDetailsTable td[attr='selectedQuantity']").addClass("hidden")}$("#PriorVersion").addClass("hidden");if(!$("#order_step_header_mobile").hasClass("hidden")){$("#order_step_header_mobile").addClass("hidden")}if(!framework.common.IsRegisteredSite&&page.global.isMyAcxiomPartnerUSite){$("#order_success_time_period").text("(Mon-Fri, 9am-6pm EST)");$("#order_success_fulfill_name").text("Orders");$("#order_success_fulfill_time").addClass("hidden")}if(framework.common.IsRegisteredSite&&page.global.isMyAcxiomSite){$("#order_success_time_period").text("(Mon-Fri, 9am-6pm EST)");$("#order_success_fulfill_name").text("Orders");$("#order_success_fulfill_time").addClass("hidden")}$("#ordersuccess_mobile_standalone").addClass("hidden");if(page.placeorder.order.ListType==entity.enums.DataSourceType.Consumer&&Math.min(page.placeorder.order.TotalAvailableQty,page.placeorder.order.TotalDesiredQty)>=10000){jQuery("#ConsumerLargeRecord").removeClass("hidden")}else{jQuery("#ConsumerLargeRecord").addClass("hidden")}if(page.placeorder.order.Chose4Info){if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){$("#ordersuccess_mobile_standalone").removeClass("hidden");$("#ordersuccess_orderdetails").removeAttr("style")}}else{$("#ordersuccess_orderdetails").removeAttr("style")}$("#ordersuccess_footer").removeClass("hidden");$("#ct_ordersucess_header").removeClass("hidden");if(page.placeorder.order.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){$("#ordersuccess_footer").addClass("hidden")}else{$(".sucess_mobile_line").removeClass("hidden")}uc.success.Load_Google_Analytics_Js();uc.success.LoadGoogleAnalyticsJsCode()},Load_Google_Analytics_Js:function(){$.getScript("//www.googleadservices.com/pagead/conversion.js");$("#Success_Google_Analytics_Js")[0].innerHTML='<script type="text/javascript">try {var google_conversion_id = 1072646300;var google_conversion_language = "en_US";var google_conversion_format = "1";var google_conversion_color = "ffffff";var google_conversion_label = "n1cpCO2NPhCckb3_Aw";var google_conversion_value = 10;} catch (err) { }<\/script><noscript><div style="display:inline;"><img height=1 width=1 style="border-style:none;" alt=\'\' src=\'https://www.googleadservices.com/pagead/conversion/1072646300/?value=10&amp;label=n1cpCO2NPhCckb3_Aw&amp;guid=ON&amp;script=0\' /></div>';"</noscript>;"},LoadGoogleAnalyticsJsCode:function(){var b=page.placeorder.order;var c=null;var g=null;var f=null;var d=null;var a=b.TotalDesiredQty;var h=null;var e=null;var i=window.location.hostname.toLowerCase().substring(window.location.hostname.toLowerCase().indexOf(".")+1,window.location.hostname.toLowerCase().length);if(b.ListType==entity.enums.DataSourceType.Consumer&&b.Chose4Info==true){f=b.OrderCharge;c=Math.round((b.TotalEstmCost+b.MobilePackageCharge)*100)/100;h=Math.round((f/a)*100000)/100000;e=Math.round(((b.MobilePackageCharge)/a)*100000)/100000}else{if(b.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){c=Math.round((b.MobilePackageCharge)*100)/100;f=Math.round((b.MobilePackageCharge)*100)/100;h=Math.round((c/a)*100000)/100000}else{c=Math.round((b.TotalEstmCost)*100)/100;f=Math.round((b.OrderCharge)*100)/100;h=Math.round((c/a)*100000)/100000}}(function(l,n,t,q,p,k,j){l.GoogleAnalyticsObject=p;l[p]=l[p]||function(){(l[p].q=l[p].q||[]).push(arguments)},l[p].l=1*new Date();k=n.createElement(t),j=n.getElementsByTagName(t)[0];k.async=1;k.src=q;j.parentNode.insertBefore(k,j)})(window,document,"script","//www.google-analytics.com/analytics.js","__gaTracker");if(page.placeorder.GoogleAnalyticsCodeAccount!=null){__gaTracker("create",page.placeorder.GoogleAnalyticsCodeAccount,i)}else{__gaTracker("create","UA-51233316-1","myacxiompartner.com")}__gaTracker("send","pageview");__gaTracker("require","ecommerce","ecommerce.js");__gaTracker("ecommerce:addTransaction",{id:b.OrderCode,affiliation:page.global.SiteName,revenue:c,shipping:b.ShippingCharge,tax:"0.00"});__gaTracker("ecommerce:addItem",{id:b.OrderCode,name:entity.lookup.DataSource.getByCode(b.ListType).DisplayName,sku:uc.success.FormatItemCode(b.ListType),category:"Mailing Lists",price:h,quantity:a});if(b.ListType==entity.enums.DataSourceType.Consumer&&b.Chose4Info==true){__gaTracker("ecommerce:addItem",{id:b.OrderCode,name:"Mobile Advertising",sku:"MA",category:"Mailing Lists",price:e,quantity:a})}__gaTracker("ecommerce:send")},FormatItemCode:function(a){var b="";switch(a){case 10:b="CL";break;case 20:b="BL";break;case 30:b="NHL";break;case 40:b="NM";break;case 50:b="ROL";break;case 60:b="NH";break;case 70:b="CML";break;case 80:b="CL";break;case 90:b="B";break;case 100:b="CC";break;case 110:b="ICL";break;case 120:b="BL";break;case 130:b="O/SL";break;case 140:b="RO";break;case 150:b="ICL";break;case 160:b="IBL";break;case 170:b="IBL";break;case 180:b="BL";break;case 190:b="MC";break}return b},LoadOrder:function(){var a=page.placeorder.order;framework.ui.ReplaceEmail("SenderEmail",page.global.SenderEmail);jQuery("#ordersuccess_contact_mail").html(page.global.ContactEmail);jQuery("#ordersuccess_contact_mail").attr("href","mailto:"+page.global.ContactEmail);jQuery("#ordersuccess_contact_mail2").html(page.global.ContactEmail);jQuery("#ordersuccess_contact_mail2").attr("href","mailto:"+page.global.ContactEmail);jQuery("#ordersuccess_sender_email").html(page.global.SenderEmail);jQuery("#ordersuccess_sender_email").attr("href","mailto:"+page.global.SenderEmail);var c="";if(page.placeorder.StepSuccessDesc){c=String.format(page.placeorder.StepSuccessDesc,a.OrderCode,a.OrderContactInformation.Email,page.global.PhoneNumber);jQuery("#ordersuccess_footer").addClass("hidden");jQuery("#ct_ordersucess_header").html(c)}else{var b="<p>Thank You! Your Order Number is <b>{0}</b>. </p><p>A confirmation email with your receipt has been sent to {1}. {2} is currently being processed. When it is complete, <span id='order_success_fulfill_time'>typically within 30 minutes, </span>you will receive a second email with links to retrieve your list in MS Excel and comma-delimited text format. {3}</p>";var e="Your order";if(!a.OrderThirdPartyAccount||a.OrderThirdPartyAccount.length==0){page.placeorder.FacebkText=""}if(a.ListType==entity.enums.DataSourceType.Consumer&&a.Chose4Info){b+='<p>To add a banner and launch your mobile campaign, choose My Mobile Campaigns within the "account" menu above.</p>';e="The list portion of your order";jQuery("#ordersuccess_footer_Ad").removeClass("hidden")}c=String.format(b,a.OrderCode,a.OrderContactInformation.Email,e,page.placeorder.FacebkText);jQuery("#ct_ordersucess_header").html(c);jQuery("#ordersuccess_footer").removeClass("hidden")}jQuery("[grp='usereml']").html(a.OrderContactInformation.Email);$("#ordersuccess_orderdetails").setTemplateElement("ordersuccess_blue_sucess_template");$("#ordersuccess_orderdetails").processTemplate(a);jQuery("#ordersuccess_orderdetails table:first").addClass("mobile_table");jQuery("#targetAudienceDiv").jScrollTouch();jQuery("#targetAudienceOccupantDiv").jScrollTouch();jQuery("#geographyDetailsDiv").jScrollTouch();var d=entity.enums.OrderStep.Success},printOrder:function(){page.placeorder.TrackOrderPathGAEvent("Step 3 - Success","Print Order Button");$("#ct_ordersuccess").jqprint()}};
;
ni.RegisterNameSpace("uc");uc.stepnav={_IsInit:false,_MaxStep:entity.enums.OrderStep.ListQuote,_CurrentStep:entity.enums.OrderStep.ListQuote,Init:function(){var a=page.placeorder.order;if(uc.stepnav._IsInit==false){$("#ct_step_navs_contents .step-nav-header").bind("click",function(b){uc.stepnav.ToggleStepExpandedStatus(this)});uc.stepnav.GetAllHouseHoldsDescription(a.ListType);if(a.ListType==entity.enums.DataSourceType.Mobile_Consumer_Advertising){$("#step-nav3").html("Choose Mobile Ad Campaign")}uc.stepnav._IsInit=true}uc.stepnav.BindOrder(a);a.record="";uc.stepnav.SetStepStatus(a.CurrentStep,a.CurrentStep)},BindOrder:function(a){$("#step_nav_geos_details").html("");$("#step_nav_geos_details").setTemplateElement("step_nav_geos_template");$("#step_nav_geos_details").processTemplate(a);if(a.NextStep>=entity.enums.OrderStep.Demo){$("#step_nav_demos_details").setTemplateElement("step_nav_demos_template");$("#step_nav_demos_details").processTemplate(a)}if(a.NextStep>=entity.enums.OrderStep.ListQuote){$("#step_nav_results_details").setTemplateElement("step_nav_results_template");$("#step_nav_results_details").processTemplate(a)}if(a.OrderGeos!=null&&a.CurrentStep>=entity.enums.OrderStep.Geo&&a.CurrentStep<entity.enums.OrderStep.Success&&!page.placeorder.isMultiCount){jQuery("#step_nav_geos_details_action").removeClass("hidden");jQuery("#sl360_step_nav_geos_edit_action").removeClass("hidden")}else{jQuery("#step_nav_geos_details_action").addClass("hidden");jQuery("#sl360_step_nav_geos_edit_action").addClass("hidden")}if(a.CurrentStep>=entity.enums.OrderStep.Demo&&a.CurrentStep<entity.enums.OrderStep.Success){if(a.ListType==entity.enums.DataSourceType.Occupant&&a.TargetOption!=0&&a.RouteOption!=0){jQuery("#step_nav_demos_details_action").removeClass("hidden");jQuery("#sl360_step_nav_demos_edit_action").removeClass("hidden")}else{if(a.DemoType==entity.enums.DemoType.All){jQuery("#step_nav_demos_details_action").removeClass("hidden");jQuery("#sl360_step_nav_demos_edit_action").removeClass("hidden")}else{if(a.OrderSelectedDemos!=null&&a.OrderSelectedDemos.length>0){jQuery("#step_nav_demos_details_action").removeClass("hidden");jQuery("#sl360_step_nav_demos_edit_action").removeClass("hidden")}else{jQuery("#step_nav_demos_details_action").addClass("hidden");jQuery("#sl360_step_nav_demos_edit_action").addClass("hidden")}}}}else{jQuery("#step_nav_demos_details_action").addClass("hidden");jQuery("#sl360_step_nav_demos_edit_action").addClass("hidden")}},BindListQuoteData:function(){var a=page.placeorder.order;$("#step_nav_results_details").setTemplateElement("step_nav_results_template");$("#step_nav_results_details").processTemplate(a)},GetAllHouseHoldsDescription:function(a){if(page.placeorder.AllHouseholdDesc==null){framework.common.Ajax({url:"PlaceOrder.aspx/GetSelectAllTargetDesc",data:{listType:a},success:function(b){if(b.ResultFlag==true){page.placeorder.AllHouseholdDesc=b.DataSource}},error:function(b){framework.common.LogClickEvent(String.format("Fail to get all households option for list type {0}",a),"",b==null?"Fail to get all households option":b.responseText)}})}},SetAllHouseHoldsDescription:function(a){return page.placeorder.GetAllHouseHoldsDescription()},ToggleStepExpandedStatus:function(a){var b=$(a).attr("isexpanded")||"0";if(b=="0"){uc.stepnav.SetSingleStepStatus(a,"1")}else{uc.stepnav.SetSingleStepStatus(a,"0")}},SetSingleStepStatus:function(a,b){if(b=="1"){$(a).addClass("step-nav-header-expand").attr("isexpanded","1");$(a).next().removeClass("hidden");$(a).parent().addClass("ct-step-navs-section-expand");$(a).find(".arrow_down").removeClass("arrow_down").addClass("arrow_up");$(a).find(".arrow_up").removeClass("arrow_up").addClass("arrow_down")}else{$(a).removeClass("step-nav-header-expand").attr("isexpanded","0");$(a).next().addClass("hidden");$(a).parent().removeClass("ct-step-navs-section-expand");$(a).find(".arrow_down").removeClass("arrow_down").addClass("arrow_up")}},SetStepStatus:function(b,a){$("#ct_step_navs_contents .step-nav-header").each(function(e,f){var c=Number($(this).attr("minstep"));var d=Number($(this).attr("maxstep"));if(c<=b&&d>=b){$("#ct_step_navs_contents .step-nav-header").removeClass("step-nav-header-current");$(this).addClass("step-nav-header-current")}if(c<=a){uc.stepnav.SetSingleStepStatus(this,"1")}else{uc.stepnav.SetSingleStepStatus(this,"0")}})},Click_EditSelections_Geo:function(){var a=page.placeorder.order;page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);framework.common.LogClickEvent("Click Edit Selections link",jQuery.toJSON(a),"Click_EditSelections_Geo.");page.placeorder.order.NextStep=entity.enums.OrderStep.Geo;if(page.placeorder.order.GeoType==entity.enums.GeoType.NationWide||page.placeorder.order.GeoType==entity.enums.GeoType.MultiCount){page.placeorder.order.NextStep=entity.enums.OrderStep.GeoType}if(a.CurrentStep==entity.enums.OrderStep.ListQuote){page.placeorder.GoNext({gotoresult:true})}else{page.placeorder.GoNext()}$("#ma_explain_video_line").css("display","block");if(page.placeorder.order.GeoType==entity.enums.GeoType.Polygon){$("#ma_explain_video_line").css("display","block");$("[id^='sl360_explain_video_setp_']").css("display","none");$("#sl360_explain_video_setp_2").css("display","block")}else{$("#ma_explain_video_line").css("display","none");$("[id^='sl360_explain_video_setp_']").css("display","none")}},Click_EditSelections_Demo:function(){page.placeorder.order.NextStep=entity.enums.OrderStep.Demo;page.placeorder.ClearRedundantForSubmitOrder(page.placeorder.order);page.placeorder.GoNext();$("#ma_explain_video_line").css("display","block");$("[id^='sl360_explain_video_setp_']").css("display","none");$("#sl360_explain_video_setp_3").css("display","block")}};framework.listener.AddListener(framework.listener.LISTENER_INIT_STEP,uc.stepnav.Init);framework.listener.AddListener(framework.listener.LISTENER_UPDATE_RESULTS_ORDER,uc.stepnav.BindListQuoteData);
;
